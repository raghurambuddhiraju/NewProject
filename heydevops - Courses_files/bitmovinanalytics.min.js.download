/*!
 * @license
 * Copyright (C) 2025, Bitmovin, Inc., All Rights Reserved
 *
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 *
 * Bitmovin Analytics Collector Version 2.48.0
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.bitmovin=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.analytics=t())}(self,(function(){return function(){var e={28:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BitmovinPwxInternalAdapter=void 0;var o=n(2663),s=n(2361),l=n(556),u=n(7224),c=n(7614),d=n(9557),E=n(3413),p=n(2647),h=n(5406),v=n(7299),f=function(e){function t(t,n){var i=e.call(this,n)||this;i.context=t,i.onBeforeUnLoadEvent=!1;var a=new o.HeartbeatService((function(){return i.currentTime})),r=new h.BitmovinPwxAnalyticsStateMachine(i.stateMachineCallbacks,a,i.opts);return a.setListener(r),i.stateMachine=r,i}return a(t,e),t.prototype.getSource=function(){return this.context.registry.get(v.SourceExportNames.SourceState)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.getSource().playback.playhead.position},enumerable:!1,configurable:!0}),t.prototype.getAutoPlay=function(){return this.getSource().config.playback.autoplay},t.prototype.getCurrentPlaybackInfo=function(){var e,t,n,i,a,o,s,l=null===(e=this.getSource().sourceConfig.resources.filter((function(e){return e.url.includes(".m3u8")}))[0])||void 0===e?void 0:e.url,c=null===(t=this.getSource().sourceConfig.resources.filter((function(e){return e.url.includes(".mpd")}))[0])||void 0===t?void 0:t.url,d=null===(n=this.getSource().video.element)||void 0===n?void 0:n.getBoundingClientRect(),p=Math.round(null!==(i=null==d?void 0:d.width)&&void 0!==i?i:1),h=Math.round(null!==(a=null==d?void 0:d.height)&&void 0!==a?a:1),v=void 0;return l?v=u.StreamTypes.hls:c&&(v=u.StreamTypes.dash),r(r({},this.getCommonPlaybackInfo()),{droppedFrames:0,isMuted:null===(o=this.getSource().video.element)||void 0===o?void 0:o.muted,isLive:"live"===this.getSource().stream.type,videoWindowHeight:h,videoWindowWidth:p,videoDuration:(0,E.normalizeVideoDuration)(null===(s=this.getSource().video.element)||void 0===s?void 0:s.duration),videoPlaybackHeight:h,videoPlaybackWidth:p,m3u8Url:l,mpdUrl:c,streamFormat:v,videoCodec:void 0,audioCodec:void 0,videoBitrate:0,audioBitrate:0})},t.prototype.getDrmPerformanceInfo=function(){},t.prototype.getPlayerName=function(){return l.Player.BITMOVIN_PWX},t.prototype.getPlayerTech=function(){return"webx:html5"},t.prototype.getPlayerVersion=function(){return this.context.registry.get(v.CoreExportNames.Constants).Version},t.prototype.initialize=function(e){return this.registerEventListeners(),this.registerUnloadEventListeners(),[new d.ErrorDetailTracking(e.errorDetailTrackingSettingsProvider,new c.ErrorDetailBackend(e.errorDetailTrackingSettingsProvider.collectorConfig),[e.errorDetailSubscribable],void 0)]},t.prototype.registerUnloadEventListeners=function(){var e=this,t=function(){if(!e.onBeforeUnLoadEvent){e.onBeforeUnLoadEvent=!0;var t=e.context.registry.get(v.SourceExportNames.SourceState).playback.playhead.position;e.eventCallback(s.Event.UNLOAD,{currentTime:t})}e.release()};t=t.bind(!0),this.context.abortSignal.addEventListener("abort",t),this.windowEventTracker.addEventListener("beforeunload",t),this.windowEventTracker.addEventListener("unload",t)},t.prototype.registerEventListeners=function(){var e=this,t=this.context.registry.get(v.SourcesApiExportNames.SourceEventBus),n=this.context.registry.get(v.SourceExportNames.SourceState).playback,i=this.context.registry.get(v.PlaybackApiEventsPackageExportNames.PlaybackEvent);t.on(i.Ready,(function(){e.eventCallback(s.Event.SOURCE_LOADED,{currentTime:n.playhead.position})})),t.on(i.Play,(function(){e.eventCallback(s.Event.PLAY,{currentTime:n.playhead.position})})),t.on(i.Playing,(function(){e.eventCallback(s.Event.PLAYING,{currentTime:n.playhead.position})})),t.on(i.Paused,(function(){e.eventCallback(s.Event.PAUSE,{currentTime:n.playhead.position})})),t.on(i.TimeChanged,(function(){e.eventCallback(s.Event.TIMECHANGED,{currentTime:n.playhead.position})})),t.on(i.VideoAttached,(function(){e.eventCallback(s.Event.SOURCE_LOADED,{currentTime:n.playhead.position})})),t.on(i.Ended,(function(){e.eventCallback(s.Event.END,{currentTime:n.playhead.position})}));var a=function(){var t=e.context.abortSignal.reason;"SourceRemovedError"===t.name||"FrameworkDisposedError"===t.name?e.eventCallback(s.Event.SOURCE_UNLOADED,{currentTime:n.playhead.position}):e.eventCallback(s.Event.ERROR,{currentTime:n.playhead.position,code:1007,message:t.message,data:t,originalError:t}),e.context.abortSignal.removeEventListener("abort",a)};this.context.abortSignal.addEventListener("abort",a)},t.prototype.sourceChange=function(e){throw new Error("Method not implemented.")},t}(p.InternalAdapter);t.BitmovinPwxInternalAdapter=f},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=function(e,t,n,a){void 0===a&&(a=!0);var r,o=!1;window.XDomainRequest?(r=new window.XDomainRequest,o=!0):r=new XMLHttpRequest;var s=function(){if(r.readyState==XMLHttpRequest.DONE){if(r.responseText<=0)return;var e=JSON.parse(r.responseText);n(e)}};o?r.onload=s:r.onreadystatechange=s;try{r.open("POST",e,a),o||r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(t))}catch(e){i.logger.error("Failed to send POST request.",e)}};var i=n(1916)},236:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DashjsInternalAdapter=void 0;var o=n(2361),s=n(2168),l=n(556),u=n(7614),c=n(9557),d=n(1916),E=n(5063),p=n(7124),h=n(9991),v=function(e){function t(t,n){var i=e.call(this,void 0,n)||this;return i.getPlayerName=function(){return l.Player.DASHJS},i.getPlayerVersion=function(){return i.mediaPlayer.getVersion()},i.mediaPlayer=t,i}return a(t,e),t.prototype.initialize=function(t){var n=this;e.prototype.initialize.call(this,t);var i=null;try{i=this.mediaPlayer.getVideoElement()}catch(e){}return i?(this.setMediaElement(i),this.registerMediaElementEventsForDashJS()):this.mediaPlayer.on("manifestLoaded",(function(){try{i=n.mediaPlayer.getVideoElement(),n.setMediaElement(i),n.registerMediaElementEventsForDashJS()}catch(e){d.logger.errorMessageToUser("Something went wrong while getting underlying HTMLVideoElement. Not possible to attach adapter and initialize Bitmovin Analytics. Error: ",e),n.release()}}),this),[new c.ErrorDetailTracking(t.errorDetailTrackingSettingsProvider,new u.ErrorDetailBackend(t.errorDetailTrackingSettingsProvider.collectorConfig),[t.errorDetailSubscribable],void 0)]},t.prototype.registerMediaElementEventsForDashJS=function(){var e=this,t=this.mediaElement;t&&this.listenToMediaElementEvent("playing",(function(){var n=t.currentTime;e.needsFirstPlayIntent=!1,e.eventCallback(o.Event.TIMECHANGED,{currentTime:n})}))},t.prototype.getCurrentPlaybackInfo=function(){var t=e.prototype.getCurrentPlaybackInfo.call(this),n=r({},t),i=(0,h.getCodecInfo)(this.mediaPlayer);return this.sourceInfoFallbackService.applyAndStoreCodecInfo(n,i),n},t.prototype.getMIMEType=function(){return s.MIMETypes.DASH},t.prototype.getStreamURL=function(){if(this.mediaPlayer){var e=void 0;try{e=this.mediaPlayer.getSource()}catch(e){d.logger.warn("no source available",e)}return(0,E.isNotNullish)(e)?null==e?void 0:e.toString():void 0}},t.prototype.getCurrentQualityLevelInfo=function(){if(!this.mediaPlayer)return null;try{return(0,h.getQualityLevelInfo)(this.mediaPlayer)}catch(e){d.logger.warn("Quality information not available")}return null},t}(p.HTML5InternalAdapter);t.DashjsInternalAdapter=v},348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Feature=void 0;var i=n(5063),a=function(){function e(){this._config=void 0,this._isEnabled=!0}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),e.prototype.disable=function(){this._isEnabled=!1,this.disabled()},e.prototype.configure=function(e,t){return(0,i.isNotNullish)(t)&&(this._config=this.extractConfig(t)),this.configured(e,this._config),this._config},e}();t.Feature=a},399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LongPlaytimeFilteringBackend=void 0;var i=n(5063),a=function(){function e(e){this.nextBackend=e}return e.prototype.sendRequest=function(e){this.isPlayedAboveThreshold(e)||this.nextBackend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.isPlayedAboveThreshold(e)||this.nextBackend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.isPlayedAboveThreshold(e)||this.nextBackend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.nextBackend.sendAdRequest(e)},e.prototype.isPlayedAboveThreshold=function(e){return((0,i.isNullish)(e.played)?0:e.played)>=9e4},e}();t.LongPlaytimeFilteringBackend=a},404:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodecHelper=void 0;var n={avc:['video/mp4; codecs="avc1.42000a"'],vp9:['video/mp4; codecs="vp09.00.50.08"'],av1:['video/mp4; codecs="av01.0.08M.08"'],hevc:['video/mp4; codecs="hev1.1.6.L93.B0"']},i=function(){function e(){}return Object.defineProperty(e,"supportedVideoFormats",{get:function(){var e=this;if("MediaSource"in window)return Object.getOwnPropertyNames(n).filter((function(t){return n[t].some((function(t){return e.isCodecSupported(t)}))}))},enumerable:!1,configurable:!0}),e.isCodecSupported=function(e){return"MediaSource"in window&&MediaSource.isTypeSupported(e)},e}();t.CodecHelper=i},556:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0,function(e){e.AMAZON_IVS="amazonivs",e.BITMOVIN="bitmovin",e.BITMOVIN_PWX="bitmovin-pwx",e.CHROMECAST_SHAKA="chromecast-shaka",e.DASHJS="dashjs",e.HLSJS="hlsjs",e.HTML5="html5",e.JW="jw",e.RADIANT="radiant",e.SHAKA="shaka",e.VIDEOJS="videojs"}(n||(t.Player=n={}))},665:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeedMeterAdapter=void 0;var n=function(){function e(e,t){var n=this;this.meter=t,e.on(e.exports.PlayerEvent.DownloadFinished,(function(e){return n.handleOnDownloadFinishEvent(e)}))}return e.prototype.getDownloadSpeedMeter=function(){return this.meter},e.prototype.handleOnDownloadFinishEvent=function(e){e.success&&0===e.downloadType.indexOf("media/video")&&this.meter.addMeasurement({duration:e.downloadTime,size:e.size,timeToFirstByte:e.timeToFirstByte,timestamp:new Date,httpStatus:e.httpStatus})},e}();t.SpeedMeterAdapter=n},675:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;var n=function(){function e(){this.callbacks=[]}return e.prototype.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){return t.unsubscribe(e)}},e.prototype.dispatch=function(e){this.callbacks.slice(0).forEach((function(t){t(e)}))},e.prototype.unsubscribe=function(e){var t=this.callbacks.indexOf(e);t>-1&&this.callbacks.splice(t,1)},Object.defineProperty(e.prototype,"subscriberCount",{get:function(){return this.callbacks.length},enumerable:!1,configurable:!0}),e}();t.EventDispatcher=n},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModule=void 0;var i=n(4679);t.PlayerModule={name:"analytics",module:{Analytics:i.Bitmovin8Adapter},hooks:{setup:function(e,t){var n=t.getConfig(),i=!n,a=!1===(null==n?void 0:n.analytics);if(i||a)return Promise.resolve();var r=new(0,e.Analytics)(t);return Promise.resolve(r)}}}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLVideoElementAdapter=void 0;var i=n(5241),a=n(4350),r=n(8331),o=n(1916),s=n(2108),l=n(4926),u=n(7238),c=function(){function e(e,t,n,i){if((0,s.hasPlayerAlreadyBeenAugmented)(t))o.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,s.markPlayerInstanceAsAugmented)(t);var l=(0,r.sanitizeAnalyticsConfig)(e);(0,r.guardAgainstDuplicatedUserId)(l),this.internalAdapter=new u.HTMLVideoElementInternalAdapter(t,n,i),this.analytics=a.Analytics.create(l,this.internalAdapter)}}return Object.defineProperty(e.prototype,"sessionMetadata",{get:function(){var e=this.internalAdapter;return{setAudioLanguage:function(t){e.sessionData.audioLanguage=(0,i.sanitizeSessionMetadataAudioLanguage)(t)},setSubtitleEnabled:function(t){e.sessionData.subtitleEnabled=(0,i.sanitizeSessionMetadataSubtitleEnabled)(t)},setSubtitleLanguage:function(t){e.sessionData.subtitleLanguage=(0,i.sanitizeSessionMetadataSubtitleLanguage)(t)}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return l.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,s.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,s.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e,t){if((0,s.isDefined)(this.analytics)&&(0,s.isDefined)(this.internalAdapter)){this.analytics.sourceChange(e);var n=this.internalAdapter;n.sessionData.streamFormat=null==t?void 0:t.streamFormat,n.sessionData.audioCodec=null==t?void 0:t.audioCodec,n.sessionData.videoCodec=null==t?void 0:t.videoCodec,n.sessionData.audioLanguage=null==t?void 0:t.audioLanguage}},e.version=l.VERSION,e}();t.HTMLVideoElementAdapter=c},716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDifferentSubtitleInfo=void 0;var i=n(5063);t.isDifferentSubtitleInfo=function(e,t){return(!(0,i.isNullish)(e)||!(0,i.isNullish)(t))&&!((0,i.isNotNullish)(e)&&(0,i.isNotNullish)(t)&&e.enabled===t.enabled&&e.language===t.language)}},847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCookieMaxAgeValue=t.validateCookieDomainValue=t.SessionPersistenceHandler=t.COOKIE_DEFAULT_MAX_AGE=t.COOKIE_NAME_BITMOVIN_ANALYTICS_UUID=void 0;var i=n(4934),a=n(1820),r=n(5063),o=n(2982);t.COOKIE_NAME_BITMOVIN_ANALYTICS_UUID="bitmovin_analytics_uuid",t.COOKIE_DEFAULT_MAX_AGE=31536e3;var s=function(e){var n=e.config;if(!1===(null==n?void 0:n.cookiesEnabled))return(0,i.deleteCookie)(t.COOKIE_NAME_BITMOVIN_ANALYTICS_UUID),void(this.userId=(0,o.generateUUID)());var r=(0,i.getCookie)(t.COOKIE_NAME_BITMOVIN_ANALYTICS_UUID);this.userId=(0,a.isBlank)(r)?(0,o.generateUUID)():r;var s=(0,t.validateCookieDomainValue)(null==n?void 0:n.cookiesDomain),l=(0,t.validateCookieMaxAgeValue)(null==n?void 0:n.cookiesMaxAge),u=Date.now(),c=new Date(u+1e3*l).toUTCString();(0,i.setCookie)(t.COOKIE_NAME_BITMOVIN_ANALYTICS_UUID,this.userId,{domain:s,expires:c,maxAge:l})};t.SessionPersistenceHandler=s;t.validateCookieDomainValue=function(e){if(!(0,r.isNullish)(e)&&(0,a.isValidString)(e)&&!(0,a.isBlank)(e))return encodeURIComponent(e)};t.validateCookieMaxAgeValue=function(e){return(0,r.isNullish)(e)?t.COOKIE_DEFAULT_MAX_AGE:(0,r.isNumber)(e)?e:t.COOKIE_DEFAULT_MAX_AGE}},887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bitmovin8AdModule=void 0;var i=n(5517),a=function(){function e(e,t){var n=this;this.player=e,this.windowEventTracker=t,this.adCallbacks=new i.AdCallbacks,this.isLinearAdActive=function(){return n.player.ads&&n.player.ads.isLinearAdActive()||!1},this.getContainer=function(){return n.player.getContainer()},this.getAdModuleInfo=function(){return n.player.ads?n.player.ads.getModuleInfo():{name:void 0,version:void 0}},this.currentTime=function(){return n.player.getCurrentTime()},this.register()}return e.prototype.register=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.Play,(function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPlay(t.issuer)})),this.player.on(this.player.exports.PlayerEvent.Paused,(function(t){"advertising-api"===t.issuer&&e.adCallbacks.onPause(t.issuer)})),this.player.on(this.player.exports.PlayerEvent.AdStarted,(function(t){e.adCallbacks.onAdStarted(t)})),this.player.on(this.player.exports.PlayerEvent.AdFinished,(function(t){e.adCallbacks.onAdFinished(t)})),this.player.on(this.player.exports.PlayerEvent.AdBreakStarted,(function(t){e.adCallbacks.onAdBreakStarted(t)})),this.player.on(this.player.exports.PlayerEvent.AdBreakFinished,(function(t){e.adCallbacks.onAdBreakFinished(t)})),this.player.on(this.player.exports.PlayerEvent.AdClicked,(function(t){e.adCallbacks.onAdClicked(t)})),this.player.on(this.player.exports.PlayerEvent.AdQuartile,(function(t){e.adCallbacks.onAdQuartile(t)})),this.player.on(this.player.exports.PlayerEvent.AdSkipped,(function(t){e.adCallbacks.onAdSkipped(t)})),this.player.on(this.player.exports.PlayerEvent.AdError,(function(t){e.adCallbacks.onAdError(t)})),this.player.on(this.player.exports.PlayerEvent.AdManifestLoaded,(function(t){e.adCallbacks.onAdManifestLoaded(t)}));var t=function(){e.adCallbacks.onBeforeUnload()};this.windowEventTracker.addEventListener("beforeunload",t),this.windowEventTracker.addEventListener("unload",t)},e}();t.Bitmovin8AdModule=a},1125:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueueBackend=void 0;var n=function(){function e(){this.queue=[],this.unloadQueue=[],this.syncQueue=[],this.adQueue=[]}return e.prototype.sendRequest=function(e){this.queue.push(e)},e.prototype.sendUnloadRequest=function(e){this.unloadQueue.push(e)},e.prototype.sendRequestSynchronous=function(e){this.syncQueue.push(e)},e.prototype.sendAdRequest=function(e){this.adQueue.push(e)},e.prototype.flushTo=function(e){this.queue.forEach((function(t){e.sendRequest(t)})),this.unloadQueue.forEach((function(t){e.sendUnloadRequest(t)})),this.syncQueue.forEach((function(t){e.sendRequestSynchronous(t)})),this.adQueue.forEach((function(t){e.sendAdRequest(t)}))},e}();t.QueueBackend=n},1489:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastFrameworkEvent=void 0,t.CastFrameworkEvent={ALL:"*",BUFFERING:"BUFFERING",ERROR:"ERROR",LOADED_METADATA:"LOADED_METADATA",PAUSE:"PAUSE",PLAY:"PLAY",PLAYING:"PLAYING",PLAYER_LOAD_COMPLETE:"PLAYER_LOAD_COMPLETE",REQUEST_LOAD:"REQUEST_LOAD",SEEKED:"SEEKED",SEEKING:"SEEKING",STALLED:"STALLED",TIME_UPDATE:"TIME_UPDATE"}},1601:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getHlsCurrentLevel=t.getHlsCodecInfo=t.HlsInternalAdapter=void 0;var o=n(9664),s=n(2361),l=n(2168),u=n(556),c=n(7614),d=n(9557),E=n(5063),p=n(7124),h=n(7922),v=n(4778),f=function(e){function n(n,i){var a=e.call(this,void 0,i)||this;return a.getPlayerName=function(){return u.Player.HLSJS},a.getPlayerVersion=function(){return a.hls.constructor.version},a.isLive=function(){var e=(0,t.getHlsCurrentLevel)(a.hls);if(!(0,E.isNullish)(null==e?void 0:e.details))return e.details.live},a.onDestroying=function(){a.eventCallback(s.Event.SOURCE_UNLOADED,{}),a.release()},a.hls=n,a.speedMeter=new v.HlsSpeedMeterAdapter(n,new o.DownloadSpeedMeter).getDownloadSpeedMeter(),a}return a(n,e),Object.defineProperty(n.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t){return e.prototype.initialize.call(this,t),this.registerHlsEvents(),[new d.ErrorDetailTracking(t.errorDetailTrackingSettingsProvider,new c.ErrorDetailBackend(t.errorDetailTrackingSettingsProvider.collectorConfig),[t.errorDetailSubscribable],void 0)]},n.prototype.clearValues=function(){this.speedMeter.reset()},n.prototype.getCurrentQualityLevelInfo=function(){var e=(0,t.getHlsCurrentLevel)(this.hls);return e?{bitrate:e.bitrate,width:e.width,height:e.height}:null},n.prototype.getMIMEType=function(){return l.MIMETypes.HLS},n.prototype.getStreamURL=function(){return this.hls.url},n.prototype.registerHlsEvents=function(){this.hls.on(h.HLS_PLAYER_EVENT.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.MANIFEST_LOADING,this.onManifestLoading.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.SUBTITLE_TRACK_SWITCH,this.onSubtitleLanguageSwitched.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.DESTROYING,this.onDestroying.bind(this)),this.hls.on(h.HLS_PLAYER_EVENT.ERROR,this.onHlsError.bind(this)),this.hls.media&&(this.onMediaAttaching(),this.onManifestLoading())},n.prototype.onMediaAttaching=function(){this.mediaElement||(this.mediaElement=this.hls.media,this.registerMediaElement(),this.onMaybeReady())},n.prototype.onMediaDetaching=function(){this.unregisterMediaElement()},n.prototype.onManifestLoading=function(){this.onMaybeReady()},n.prototype.getCurrentPlaybackInfo=function(){var n=this.getSelectedSubtitleLanguage(),i=r(r({},e.prototype.getCurrentPlaybackInfo.call(this)),{audioLanguage:this.getSelectedAudioLanguage(),subtitleEnabled:(0,E.isNotNullish)(n)?n.enabled:void 0,subtitleLanguage:(0,E.isNotNullish)(n)?n.language:void 0}),a=(0,t.getHlsCodecInfo)(this.hls);return this.sourceInfoFallbackService.applyAndStoreCodecInfo(i,a),i},n.prototype.onHlsError=function(e,t){if(!t||t.fatal){var n=this.mediaElement,i=void 0;(0,E.isNotNullish)(n)&&(i=n.currentTime);var a=(0,E.isNotNullish)(t)?"".concat(t.type,": ").concat(t.details):void 0;this.eventCallback(s.Event.ERROR,{currentTime:i,code:this.getErrorCodeFromHlsErrorType(t.type),message:a,originalError:t,data:{}})}},n.prototype.onAudioTrackSwitched=function(e,t){var n,i=this.mediaElement;(0,E.isNotNullish)(i)&&(n=i.currentTime),this.eventCallback(s.Event.AUDIOTRACK_CHANGED,{currentTime:n})},n.prototype.onSubtitleLanguageSwitched=function(e,t){var n,i=this.mediaElement;(0,E.isNotNullish)(i)&&(n=i.currentTime),this.eventCallback(s.Event.SUBTITLE_CHANGE,{currentTime:n})},n.prototype.getErrorCodeFromHlsErrorType=function(e){switch(e){case"networkError":return 2;case"mediaError":return 3;case"keySystemError":return 4;case"muxError":return 5;default:return 1}},n.prototype.getSelectedAudioLanguage=function(){if(!((0,E.isNullish)(this.hls.audioTrack)||this.hls.audioTrack<0))return this.hls.audioTracks[this.hls.audioTrack].lang},n.prototype.getSelectedSubtitleLanguage=function(){if((0,E.isNotNullish)(this.hls.subtitleDisplay)){var e=this.hls.subtitleTrack>=0&&!0===this.hls.subtitleDisplay;return{enabled:e,language:e?this.hls.subtitleTracks[this.hls.subtitleTrack].lang:void 0}}var t=this.hls.subtitleTrackController;if((0,E.isNotNullish)(t)&&(0,E.isNotNullish)(t.media))return this.getSelectedSubtitleFromMediaElement(t.media)},n}(p.HTML5InternalAdapter);t.HlsInternalAdapter=f;t.getHlsCodecInfo=function(e){var n=(0,t.getHlsCurrentLevel)(e);if(n)return{videoCodec:n.videoCodec,audioCodec:n.audioCodec}};t.getHlsCurrentLevel=function(e){if(!(0,E.isNullish)(e.levels)&&0!==e.levels.length&&(0,E.isNumber)(e.currentLevel)&&!(e.currentLevel<0))return e.levels[e.currentLevel]}},1652:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDebugging=void 0;var n=function(e,t,n,i,a){this.event=e,this.from=t,this.to=n,this.timestamp=i,this.eventObject=a};t.EventDebugging=n},1820:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startsWith=t.endsWith=t.isBlank=t.isEmpty=t.isValidString=void 0;var i=n(5063);t.isValidString=function(e){return(0,i.isNotNullish)(e)&&"string"==typeof e};t.isEmpty=function(e){return(0,i.isNullish)(e)||0===e.length};t.isBlank=function(e){return(0,t.isEmpty)(e)||(0,t.isEmpty)(null==e?void 0:e.trim())};t.endsWith=function(e,n){return!(!(0,t.isValidString)(e)||!(0,t.isValidString)(n))&&((0,i.isNotNullish)(String.prototype.endsWith)?e.endsWith(n):e.substring(e.length-n.length)===n)};t.startsWith=function(e,n){return!(!(0,t.isValidString)(e)||!(0,t.isValidString)(n))&&((0,i.isNotNullish)(String.prototype.startsWith)?e.startsWith(n):e.substring(0,n.length)===n)}},1916:function(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.padRight=void 0;var i=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.initialize=function(e){this.analyticsDebugConfig=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.enabled&&console.log(e,t)},e.prototype.table=function(e,t){this.enabled&&console.table(e,t)},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.enabled&&console.warn(e,t)},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.enabled&&console.error(e,t)},e.prototype.errorMessageToUser=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];console.error.apply(console,n([e],t,!1))},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.analyticsDebugConfig||!1},enumerable:!1,configurable:!0}),e}();t.padRight=function(e,t){return(e+new Array(t).join(" ")).slice(0,t)},t.logger=i.getInstance()},2063:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaAdapter=void 0;var i=n(4350),a=n(2361),r=n(8331),o=n(1916),s=n(2108),l=n(4926),u=n(2092),c=function(){function e(e,t,n){if((0,s.hasPlayerAlreadyBeenAugmented)(t))o.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,s.markPlayerInstanceAsAugmented)(t);var a=(0,r.sanitizeAnalyticsConfig)(e);(0,r.guardAgainstDuplicatedUserId)(a),this.internalAdapter=new u.ShakaInternalAdapter(t,n),this.analytics=i.Analytics.create(a,this.internalAdapter),this.wrapPlayerLoad(t)}}return e.prototype.wrapPlayerLoad=function(e){var t,n=Object.getPrototypeOf(e),i=null!==(t=Object.getOwnPropertyDescriptor(e,"load"))&&void 0!==t?t:Object.getOwnPropertyDescriptor(n,"load");if(!0===(null==i?void 0:i.writable)||void 0!==(null==i?void 0:i.set)){var r=e.load,s=this.internalAdapter;e.load=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,i){r.apply(e,t).then((function(e){return n(e)})).catch((function(e){var t,n={currentTime:0,code:null!==(t=null==e?void 0:e.code)&&void 0!==t?t:void 0,message:JSON.stringify({category:null==e?void 0:e.category,severity:null==e?void 0:e.severity}),data:{additionalData:JSON.stringify(null==e?void 0:e.data)},originalError:e};s.eventCallback(a.Event.ERROR,n),i(e)}))}))}}else o.logger.errorMessageToUser("Bitmovin Analytics is unable to intercept player.load method. The provided Shaka player instance appears to be a proxy object (e.g. created via Shaka UI Library). Ensure you provide the local player instance instead.")},Object.defineProperty(e.prototype,"version",{get:function(){return l.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,s.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,s.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,s.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=l.VERSION,e}();t.ShakaAdapter=c},2092:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getShakaStreamFormat=t.getShakaCodecInfo=t.ShakaInternalAdapter=void 0;var o=n(2361),s=n(556),l=n(7224),u=n(7614),c=n(9557),d=n(1916),E=n(5063),p=n(7124),h=n(4654),v=function(e){function n(t,n){var i=e.call(this,t.getMediaElement(),n)||this;return i.player=t,i.getPlayerName=function(){return s.Player.SHAKA},i.getPlayerVersion=function(){return i.player.constructor.version},i.isLive=function(){return i.player?i.player.isLive():void 0},i.registerMediaElementErrorEvent=function(e){i.player.addEventListener(h.ShakaPlayerEvent.ERROR,(function(e){var t,n,a,r,s,l,u,c,d,E,p;i.eventCallback(o.Event.ERROR,{currentTime:null!==(n=null===(t=i.mediaElement)||void 0===t?void 0:t.currentTime)&&void 0!==n?n:0,code:null!==(r=null===(a=e.detail)||void 0===a?void 0:a.code)&&void 0!==r?r:void 0,message:null!==(l=null===(s=e.detail)||void 0===s?void 0:s.message)&&void 0!==l?l:void 0,originalError:e,data:{additionalData:JSON.stringify(e.detail),exceptionMessage:null!==(c=null===(u=e.detail)||void 0===u?void 0:u.message)&&void 0!==c?c:void 0,exceptionStacktrace:null!==(p=null===(E=null===(d=e.detail)||void 0===d?void 0:d.stack)||void 0===E?void 0:E.split("\n"))&&void 0!==p?p:void 0}})}))},i}return a(n,e),n.prototype.initialize=function(t){var n,i=this;e.prototype.initialize.call(this,t);try{n=this.player.getMediaElement()}catch(e){}if((0,E.isNotNullish)(n))this.setMediaElement(n);else{var a=function(e){if("media-source"===e.state)try{i.player.removeEventListener(h.ShakaPlayerEvent.ONSTATECHANGE,a),i.setMediaElement(i.player.getMediaElement())}catch(e){d.logger.errorMessageToUser("Something went wrong while getting underlying HTMLVideoElement. Not possible to attach adapter and initialize Bitmovin Analytics. Error: ",e),i.release()}};this.player.addEventListener(h.ShakaPlayerEvent.ONSTATECHANGE,a)}return this.player.addEventListener(h.ShakaPlayerEvent.BUFFERING,(function(e){i.checkQualityLevelAttributes()})),this.player.addEventListener(h.ShakaPlayerEvent.ONSTATECHANGE,(function(e){"detach"===e.state&&(i.eventCallback(o.Event.UNLOAD,{}),i.release())})),[new c.ErrorDetailTracking(t.errorDetailTrackingSettingsProvider,new u.ErrorDetailBackend(t.errorDetailTrackingSettingsProvider.collectorConfig),[t.errorDetailSubscribable],void 0)]},n.prototype.getCurrentPlaybackInfo=function(){var n=r({},e.prototype.getCurrentPlaybackInfo.call(this)),i=(0,t.getShakaCodecInfo)(this.player);return this.sourceInfoFallbackService.applyAndStoreCodecInfo(n,i),n},n.prototype.getStreamType=function(){return(0,t.getShakaStreamFormat)(this.player)},n.prototype.getStreamURL=function(){return this.player?this.player.getAssetUri():null},n.prototype.getCurrentQualityLevelInfo=function(){var e=this.player.getVariantTracks().filter((function(e){return e.active})).filter((function(e){return e.videoCodec||void 0!==e.videoId}))[0];return e?{bitrate:e.videoBandwidth||e.bandwidth,width:e.width,height:e.height}:null},n}(p.HTML5InternalAdapter);t.ShakaInternalAdapter=v;t.getShakaCodecInfo=function(e){var t=e.getVariantTracks().find((function(e){return e.active}));return{videoCodec:null==t?void 0:t.videoCodec,audioCodec:null==t?void 0:t.audioCodec}};t.getShakaStreamFormat=function(e){var t,n;if(e){var i=null===(n=null===(t=e.getManifestType)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.toLowerCase();if(i===l.StreamTypes.dash)return l.StreamTypes.dash;if(i===l.StreamTypes.hls)return l.StreamTypes.hls;return(0,E.isNullish)(i)&&3===e.getLoadMode()&&(0,E.isNotNullish)(e.getAssetUri())?l.StreamTypes.prog:void 0}}},2108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BITMOVIN_ANALYTICS_AUGMENTED_MARKER=void 0,t.hasPlayerAlreadyBeenAugmented=function(e){return!0===e[t.BITMOVIN_ANALYTICS_AUGMENTED_MARKER]},t.markPlayerInstanceAsAugmented=function(e){e[t.BITMOVIN_ANALYTICS_AUGMENTED_MARKER]=!0},t.isDefined=function(e){if((0,a.isNullish)(e))return i.logger.log("Bitmovin Analytics: Adapter hasn't been initialized yet"),!1;return!0};var i=n(1916),a=n(5063);t.BITMOVIN_ANALYTICS_AUGMENTED_MARKER="__bitmovinAnalyticsHasBeenSetup"},2168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIMETypes=void 0,t.getMIMETypeFromFileExtension=function(e){var n=e.split(/[?#]/)[0].toLowerCase();if((0,i.endsWith)(n,".m3u8"))return t.MIMETypes.HLS;if((0,i.endsWith)(n,".mp4")||(0,i.endsWith)(n,".m4v")||(0,i.endsWith)(n,".m4a"))return t.MIMETypes.MP4;if((0,i.endsWith)(n,".webm"))return t.MIMETypes.WEBM;if((0,i.endsWith)(n,".mpd"))return t.MIMETypes.DASH;return};var i=n(1820);t.MIMETypes={MP4:"video/mp4",WEBM:"video/webm",HLS:"application/x-mpegURL",DASH:"application/dash+xml"}},2226:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpBackend=void 0;var n=function(){function e(){}return e.prototype.sendRequest=function(e){},e.prototype.sendUnloadRequest=function(e){},e.prototype.sendRequestSynchronous=function(e){},e.prototype.sendAdRequest=function(e){},e}();t.NoOpBackend=n},2235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSPlayerEventHandler=void 0;var i=n(1916),a=n(3037),r=n(9810),o=n(4025),s=function(){function e(e,t,n){this.videoStartupService=e,this.playbackService=t,this.errorService=n}return e.prototype.onRebuffering=function(){i.logger.log("onRebuffering"),this.playbackService.onRebuffering()},e.prototype.onDurationChanged=function(e){i.logger.log("onDurationChanged: "+e)},e.prototype.onError=function(e){i.logger.log("onError: "+JSON.stringify(e)),this.errorService.onError(e)},e.prototype.onInitialized=function(){i.logger.log("onInitialized"),this.videoStartupService.finishedStartup||this.videoStartupService.onInitialized()},e.prototype.onQualityChanged=function(e){i.logger.log("onQualityChanged: "+JSON.stringify(e)),this.playbackService.onQualityChange(e)},e.prototype.onTimeUpdate=function(e){i.logger.log("onTimeUpdate: "+e)},e.prototype.onPlay=function(e){this.videoStartupService.finishedStartup?i.logger.log("onPlay:",e):this.videoStartupService.onPlay()},e.prototype.onPause=function(e){this.videoStartupService.finishedStartup&&(i.logger.log("onPause:",e),this.playbackService.onPause())},e.prototype.onPlaying=function(e){i.logger.log("onPlaying:",e),this.videoStartupService.finishedStartup?this.playbackService.onPlaying():(this.videoStartupService.onPlaying(),this.playbackService.onStartupPlaying())},e.prototype.onSeek=function(){this.videoStartupService.finishedStartup&&this.playbackService.onSeek()},e.prototype.onSeeked=function(){this.videoStartupService.finishedStartup&&this.playbackService.onSeeked()},e.create=function(t,n,i){return new e(new o.VideoStartupService(t,n,i),r.PlaybackService.create(t,n,i),new a.ErrorService(t,n))},e}();t.AmazonIVSPlayerEventHandler=s},2361:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.JSM_INITIAL_EVENT=void 0,t.JSM_INITIAL_EVENT="jsm-initial",function(e){e.AUDIO_CHANGE="audioChange",e.AUDIOTRACK_CHANGED="audioTrackChanged",e.CUSTOM_DATA_CHANGE="customDataChange",e.END="end",e.END_AD="adEnd",e.END_BUFFERING="endBuffering",e.END_CAST="endCasting",e.END_FULLSCREEN="endFullscreen",e.ERROR="playerError",e.MANUAL_SOURCE_CHANGE="manualSourceChangeInitiated",e.MUTE="mute",e.PAUSE="pause",e.PLAY="play",e.PLAYING="playing",e.READY="ready",e.SCREEN_RESIZE="resize",e.SEEK="seek",e.SEEKED="seeked",e.SOURCE_LOADED="sourceLoaded",e.SOURCE_UNLOADED="sourceUnloaded",e.START_AD="adStart",e.START_BUFFERING="startBuffering",e.START_CAST="startCasting",e.START_FULLSCREEN="startFullscreen",e.SUBTITLE_CHANGE="subtitleChange",e.TIMECHANGED="timechanged",e.UN_MUTE="unMute",e.UNLOAD="unload",e.VIDEO_CHANGE="videoChange",e.VIDEOSTART_TIMEOUT="VIDEOSTART_TIMEOUT"}(n||(t.Event=n={}))},2364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteBackend=void 0;var i=n(5426),a=n(5063),r=function(){function e(e,t,n){this.licenseKey=n,this.hasAdModule=e,this.analyticsCall=new i.AnalyticsCall(t)}return e.prototype.sendRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequest(e,a.noOp)},e.prototype.sendUnloadRequest=function(e){e.key=this.licenseKey,this.analyticsCall.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){e.key=this.licenseKey,this.analyticsCall.sendRequestSynchronous(e,a.noOp)},e.prototype.sendAdRequest=function(e){e.key=this.licenseKey,this.hasAdModule&&this.analyticsCall.sendAdRequest(e)},e}();t.RemoteBackend=r},2376:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowEventTracker=void 0;var n=function(){function e(){this.trackedObjects=[]}return e.prototype.addEventListener=function(e,t){this.trackedObjects.push({eventName:e,func:t}),window.addEventListener(e,t)},e.prototype.release=function(){for(;0!==this.trackedObjects.length;){var e=this.trackedObjects.pop();void 0!==e&&window.removeEventListener(e.eventName,e.func)}},e}();t.WindowEventTracker=n},2403:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Bitmovin8AnalyticsStateMachine=void 0;var r,o=n(2595),s=n(2361),l=n(3565),u=n(1652),c=n(1916),d=n(5063),E=n(7596),p=n(8253);!function(e){e.AD_PAUSE="AD_PAUSE",e.AD_PLAYING="AD_PLAYING",e.AD_READY="AD_READY",e.AD_STARTUP="AD_STARTUP",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.CASTING="CASTING",e.CUSTOMDATACHANGE="CUSTOMDATACHANGE",e.END="END",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.ERROR="ERROR",e.INITIAL_SOURCE_CHANGE="INITIAL_SOURCE_CHANGE",e.MUTING_PAUSE="MUTING_PAUSE",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_READY="MUTING_READY",e.PAUSE="PAUSE",e.PLAY_SEEKING="PLAY_SEEKING",e.PLAYING="PLAYING",e.QUALITYCHANGE="QUALITYCHANGE",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.READY="READY",e.REBUFFERING="REBUFFERING",e.SETUP="SETUP",e.SOURCE_CHANGING="SOURCE_CHANGING",e.STARTUP="STARTUP",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(r||(r={}));var h=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.debuggingStates=[],a.enabledDebugging=!1,a}return a(t,e),t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter((function(t){return e.indexOf(t)<0}))},t.prototype.getAllStates=function(){return Object.keys(r).map((function(e){return r[e]}))},t.prototype.createStateMachine=function(e){var t,n=this;return o.create({initial:{state:r.SETUP,event:s.JSM_INITIAL_EVENT},error:p.customStateMachineErrorCallback,events:[{name:s.Event.SOURCE_LOADED,from:[r.SETUP,r.ERROR,r.SOURCE_CHANGING,r.INITIAL_SOURCE_CHANGE],to:r.READY},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.PLAYING,from:r.READY,to:r.PLAYING},(0,p.on)(s.Event.READY).stayIn(r.READY),(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.READY),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.READY),{name:s.Event.ERROR,from:[r.STARTUP,r.AD_STARTUP],to:r.VIDEOSTART_FAILED},{name:s.Event.UNLOAD,from:[r.STARTUP,r.AD_STARTUP],to:r.VIDEOSTART_FAILED},{name:s.Event.VIDEOSTART_TIMEOUT,from:r.STARTUP,to:r.VIDEOSTART_FAILED},(0,p.on)(s.Event.PLAY).stayIn(r.STARTUP),(0,p.on)(s.Event.PLAYING).stayIn(r.STARTUP),{name:s.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},(0,p.on)(s.Event.START_BUFFERING).stayIn(r.STARTUP),(0,p.on)(s.Event.END_BUFFERING).stayIn(r.STARTUP),(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.STARTUP),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.STARTUP),(0,p.on)(s.Event.READY).stayIn(r.STARTUP),{name:s.Event.PAUSE,from:r.STARTUP,to:r.READY},(0,p.on)(s.Event.PLAYING).stayIn(r.PLAYING),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.PLAYING),(0,p.on)(s.Event.END_BUFFERING).stayIn(r.PLAYING),{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.END_BUFFERING,from:r.REBUFFERING,to:r.PLAYING},(0,p.on)(s.Event.TIMECHANGED).stayIn(r.REBUFFERING),{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PAUSE,from:r.REBUFFERING,to:r.PAUSE},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},{name:s.Event.AUDIO_CHANGE,from:r.PLAYING,to:r.QUALITYCHANGE},(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.QUALITYCHANGE),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.QUALITYCHANGE),{name:"FINISH_QUALITYCHANGE",from:r.QUALITYCHANGE,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},{name:s.Event.AUDIO_CHANGE,from:r.PAUSE,to:r.QUALITYCHANGE_PAUSE},(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.QUALITYCHANGE_PAUSE),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.QUALITYCHANGE_PAUSE),{name:"FINISH_QUALITYCHANGE_PAUSE",from:r.QUALITYCHANGE_PAUSE,to:r.PAUSE},{name:s.Event.SEEK,from:r.PLAYING,to:r.PLAY_SEEKING},{name:s.Event.PLAY,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.PLAYING,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEKED,from:r.PLAY_SEEKING,to:r.END_PLAY_SEEKING},{name:s.Event.SEEK,from:r.END_PLAY_SEEKING,to:r.PLAY_SEEKING},{name:s.Event.PLAYING,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.TIMECHANGED,from:r.END_PLAY_SEEKING,to:r.PLAYING},{name:s.Event.PAUSE,from:[r.PLAY_SEEKING,r.END_PLAY_SEEKING],to:r.PAUSE},(0,p.on)(s.Event.SEEK).stayIn(r.PLAY_SEEKING),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.PLAY_SEEKING),(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.PLAY_SEEKING),(0,p.on)(s.Event.START_BUFFERING).stayIn(r.PLAY_SEEKING),(0,p.on)(s.Event.END_BUFFERING).stayIn(r.PLAY_SEEKING),(0,p.on)(s.Event.START_BUFFERING).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.END_BUFFERING).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.SEEKED).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.PLAY).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.SEEK).stayIn(r.PAUSE),(0,p.on)(s.Event.SEEKED).stayIn(r.PAUSE),(0,p.on)(s.Event.SEEKED).stayIn(r.PLAYING),{name:s.Event.END,from:r.PLAY_SEEKING,to:r.END},{name:s.Event.END,from:r.PLAYING,to:r.END},{name:s.Event.END,from:r.PAUSE,to:r.END},(0,p.on)(s.Event.SEEK).stayIn(r.END),(0,p.on)(s.Event.SEEKED).stayIn(r.END),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.END),(0,p.on)(s.Event.END_BUFFERING).stayIn(r.END),(0,p.on)(s.Event.START_BUFFERING).stayIn(r.END),(0,p.on)(s.Event.END).stayIn(r.END),{name:s.Event.PLAY,from:r.END,to:r.STARTUP},{name:s.Event.ERROR,from:this.getAllStatesBut([r.STARTUP]),to:r.ERROR},{name:s.Event.UNLOAD,from:this.getAllStatesBut([r.STARTUP,r.AD_STARTUP]),to:r.END},{name:s.Event.SUBTITLE_CHANGE,from:r.PLAYING,to:r.SUBTITLE_CHANGING},(0,p.on)(s.Event.SUBTITLE_CHANGE).stayIn(r.PAUSE),(0,p.on)(s.Event.SUBTITLE_CHANGE).stayIn(r.REBUFFERING),(0,p.on)(s.Event.SUBTITLE_CHANGE).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.SUBTITLE_CHANGE).stayIn(r.SUBTITLE_CHANGING),{name:s.Event.TIMECHANGED,from:r.SUBTITLE_CHANGING,to:r.PLAYING},{name:s.Event.AUDIOTRACK_CHANGED,from:r.PLAYING,to:r.AUDIOTRACK_CHANGING},(0,p.on)(s.Event.AUDIOTRACK_CHANGED).stayIn(r.PAUSE),(0,p.on)(s.Event.AUDIOTRACK_CHANGED).stayIn(r.REBUFFERING),(0,p.on)(s.Event.AUDIOTRACK_CHANGED).stayIn(r.END_PLAY_SEEKING),(0,p.on)(s.Event.AUDIOTRACK_CHANGED).stayIn(r.AUDIOTRACK_CHANGING),{name:s.Event.TIMECHANGED,from:r.AUDIOTRACK_CHANGING,to:r.PLAYING},{name:s.Event.START_AD,from:r.STARTUP,to:r.AD_STARTUP},{name:s.Event.END_AD,from:r.AD_STARTUP,to:r.STARTUP},(0,p.on)(s.Event.PLAY).stayIn(r.AD_STARTUP),(0,p.on)(s.Event.PAUSE).stayIn(r.AD_STARTUP),{name:s.Event.START_AD,from:r.READY,to:r.AD_READY},{name:s.Event.END_AD,from:r.AD_READY,to:r.STARTUP},(0,p.on)(s.Event.PLAY).stayIn(r.AD_READY),(0,p.on)(s.Event.PAUSE).stayIn(r.AD_READY),{name:s.Event.START_AD,from:r.PAUSE,to:r.AD_PAUSE},{name:s.Event.END_AD,from:r.AD_PAUSE,to:r.PAUSE},(0,p.on)(s.Event.PLAY).stayIn(r.AD_PAUSE),(0,p.on)(s.Event.PAUSE).stayIn(r.AD_PAUSE),{name:s.Event.START_AD,from:r.PLAYING,to:r.AD_PLAYING},{name:s.Event.END_AD,from:r.AD_PLAYING,to:r.PLAYING},(0,p.on)(s.Event.PLAY).stayIn(r.AD_PLAYING),(0,p.on)(s.Event.PAUSE).stayIn(r.AD_PLAYING),{name:s.Event.END,from:r.AD_PLAYING,to:r.END},(0,p.on)(s.Event.TIMECHANGED).stayIn(r.AD_STARTUP),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.AD_READY),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.AD_PAUSE),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.AD_PLAYING),(0,p.on)(s.Event.END_AD).stayIn(r.PLAYING),(0,p.on)(s.Event.END_AD).stayIn(r.PAUSE),(0,p.on)(s.Event.END_AD).stayIn(r.READY),(0,p.on)(s.Event.END_AD).stayIn(r.STARTUP),{name:s.Event.MUTE,from:r.READY,to:r.MUTING_READY},{name:s.Event.UN_MUTE,from:r.READY,to:r.MUTING_READY},{name:"FINISH_MUTING",from:r.MUTING_READY,to:r.READY},{name:s.Event.MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:s.Event.UN_MUTE,from:r.PLAYING,to:r.MUTING_PLAY},{name:"FINISH_MUTING",from:r.MUTING_PLAY,to:r.PLAYING},{name:s.Event.MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:s.Event.UN_MUTE,from:r.PAUSE,to:r.MUTING_PAUSE},{name:"FINISH_MUTING",from:r.MUTING_PAUSE,to:r.PAUSE},{name:s.Event.START_CAST,from:[r.READY,r.PAUSE,r.PLAYING],to:r.CASTING},(0,p.on)(s.Event.PAUSE).stayIn(r.CASTING),(0,p.on)(s.Event.PLAY).stayIn(r.CASTING),(0,p.on)(s.Event.PLAYING).stayIn(r.CASTING),(0,p.on)(s.Event.TIMECHANGED).stayIn(r.CASTING),(0,p.on)(s.Event.MUTE).stayIn(r.CASTING),(0,p.on)(s.Event.UN_MUTE).stayIn(r.CASTING),(0,p.on)(s.Event.SEEK).stayIn(r.CASTING),(0,p.on)(s.Event.SEEKED).stayIn(r.CASTING),{name:s.Event.END_CAST,from:r.CASTING,to:r.READY},(0,p.on)(s.Event.SEEK).stayIn(r.READY),(0,p.on)(s.Event.SEEKED).stayIn(r.READY),(0,p.on)(s.Event.SEEKED).stayIn(r.STARTUP),{name:s.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut([r.SETUP]),to:r.SOURCE_CHANGING},{name:s.Event.MANUAL_SOURCE_CHANGE,from:r.SETUP,to:r.INITIAL_SOURCE_CHANGE},{name:s.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:r.SOURCE_CHANGING},{name:s.Event.VIDEO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},{name:s.Event.AUDIO_CHANGE,from:r.REBUFFERING,to:r.QUALITYCHANGE_REBUFFERING},(0,p.on)(s.Event.VIDEO_CHANGE).stayIn(r.QUALITYCHANGE_REBUFFERING),(0,p.on)(s.Event.AUDIO_CHANGE).stayIn(r.QUALITYCHANGE_REBUFFERING),{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:r.QUALITYCHANGE_REBUFFERING,to:r.REBUFFERING},{name:s.Event.CUSTOM_DATA_CHANGE,from:[r.PLAYING,r.PAUSE],to:r.CUSTOMDATACHANGE},{name:s.Event.PLAYING,from:r.CUSTOMDATACHANGE,to:r.PLAYING},{name:s.Event.PAUSE,from:r.CUSTOMDATACHANGE,to:r.PAUSE}],callbacks:(t={onbeforeevent:function(e,t,n,i,a){if(t===r.REBUFFERING&&n===r.QUALITYCHANGE_REBUFFERING)return!1}},t["onleave".concat(r.END_PLAY_SEEKING)]=function(e,t,i,a,o){var s;if(i!==r.PLAY_SEEKING){var l=a-(null!==(s=n.seekStartTimestamp)&&void 0!==s?s:a);n.seekStartTimestamp=void 0,n.stateMachineCallbacks.setVideoTimeEndFromEvent(o),n.stateMachineCallbacks.end_play_seeking(l,"end_play_seeking")}},t["onleave".concat(r.PLAYING)]=function(){n.playingHeartbeatService.stopHeartbeat()},t["onleave".concat(r.PLAY_SEEKING)]=function(e,t,i,a,o){var s;if(i!==r.END_PLAY_SEEKING){var l=a-(null!==(s=n.seekStartTimestamp)&&void 0!==s?s:a);n.seekStartTimestamp=void 0,n.stateMachineCallbacks.end_play_seeking(l,"end_play_seeking")}},t.onleavestate=function(e,t,i,a,o){if((0,p.logStateMachineTransition)("LEAVE",e,t,i),e!==s.JSM_INITIAL_EVENT&&(t===r.REBUFFERING&&n.resetRebufferingHelpers(),a)){n.addStatesToLog(e,t,i,a,o);var u=a-n.onEnterStateTimestamp;o&&i!==r.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(o),o&&e!==s.Event.END_AD&&(n.lastTrackedVideoEndObject=o),t!==r.READY&&t!==r.AD_STARTUP||i!==r.STARTUP?t!==r.STARTUP||i!==r.PLAYING&&i!==r.AD_STARTUP||n.clearVideoStartTimeout():n.setVideoStartTimeout();var E=String(t).toLowerCase();if(i===r.VIDEOSTART_FAILED)n.clearVideoStartTimeout(),n.stateMachineCallbacks.videoStartFailed(u,(0,l.createVideoStartFailedReason)(e));else if(t===r.END_PLAY_SEEKING)(0,d.noOp)();else if(e===s.Event.UNLOAD)n.stateMachineCallbacks.unload(u,E);else if(t===r.AD_PAUSE||t===r.AD_READY||t===r.AD_PLAYING||t===r.AD_STARTUP)(0,d.isNotNullish)(n.lastTrackedVideoEndObject)&&(n.stateMachineCallbacks.setVideoTimeStartFromEvent(n.lastTrackedVideoEndObject),n.stateMachineCallbacks.setVideoTimeEndFromEvent(n.lastTrackedVideoEndObject)),n.stateMachineCallbacks.ad(u,"ad");else if(e===s.Event.START_AD&&t===r.STARTUP)(0,d.noOp)();else if(e===s.Event.SOURCE_LOADED&&t===r.INITIAL_SOURCE_CHANGE)(0,d.noOp)();else if(t===r.SETUP)n.stateMachineCallbacks.setup(1,r.SETUP.toLowerCase());else if(e===s.Event.PAUSE&&t===r.STARTUP&&i===r.READY)n.clearVideoStartTimeout();else if(t!==r.ERROR){var h=n.stateMachineCallbacks[E];if((0,d.isFunction)(h))try{h(u,E,o)}catch(e){c.logger.error("Exception occurred in State Machine callback "+E,o,e)}else(0,p.logMissingCallbackWarning)(t,[r.READY,r.SOURCE_CHANGING])}o&&i!==r.END_PLAY_SEEKING&&t!==r.PLAY_SEEKING&&i!==r.PLAY_SEEKING&&t!==r.AD_STARTUP&&t!==r.AD_READY&&t!==r.AD_PLAYING&&t!==r.AD_PAUSE&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(o),e===s.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(o):e===s.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(o):e===s.Event.MUTE?n.stateMachineCallbacks.mute():e===s.Event.UN_MUTE&&n.stateMachineCallbacks.unMute()}},t["onenter".concat(r.PLAYING)]=function(){n.playingHeartbeatService.startHeartbeat()},t["onenter".concat(r.PLAY_SEEKING)]=function(e,t,i,a,o){t!==r.END_PLAY_SEEKING&&(n.seekStartTimestamp=a)},t.onenterstate=function(t,i,a,o,l){(0,p.logStateMachineTransition)("ENTER",t,i,a),n.onEnterStateTimestamp=null!=o?o:Date.now(),(0,d.isNumber)(e.starttime)&&t===s.JSM_INITIAL_EVENT&&(n.onEnterStateTimestamp=e.starttime),!l||a===r.END_PLAY_SEEKING||i===r.PLAY_SEEKING||i===r.AD_STARTUP||i===r.AD_READY||i===r.AD_PLAYING||i===r.AD_PAUSE||t===s.Event.SEEK&&i===r.END_PLAY_SEEKING||n.stateMachineCallbacks.setVideoTimeStartFromEvent(l),t===s.Event.START_CAST&&a===r.CASTING&&n.stateMachineCallbacks.startCasting(o,l),a===r.REBUFFERING&&n.startRebufferingHeartbeatInterval()},t["onafter".concat(s.Event.ERROR)]=function(e,t,i,a,r){n.stateMachineCallbacks.error(r)},t.onafterevent=function(e,t,i,a,o){e===s.Event.MANUAL_SOURCE_CHANGE&&t===r.SETUP?n.stateMachineCallbacks.initialSourceChange(o):e===s.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(o),i===r.QUALITYCHANGE_PAUSE&&n.stateMachine.FINISH_QUALITYCHANGE_PAUSE(a),i===r.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(a),i===r.QUALITYCHANGE_REBUFFERING&&n.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(a),i!==r.MUTING_READY&&i!==r.MUTING_PLAY&&i!==r.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(a)},t)})},t.prototype.onSsaiPlaybackInteraction=function(e,t){this.currentState==r.PLAYING&&this.sendPlayingSample(e,t,!0)},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},t.prototype.addStatesToLog=function(e,t,n,i,a){this.enabledDebugging&&this.debuggingStates.push(new u.EventDebugging(e,t,n,i,a))},t}(E.AnalyticsStateMachine);t.Bitmovin8AnalyticsStateMachine=h},2506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BitmovinPwxAnalyticsPackage=void 0;var i,a,r,o=n(2767),s=n(7299);t.BitmovinPwxAnalyticsPackage=(i="analytics-package",a=function(e,t){var n,i,a=t.registry.get(s.CoreExportNames.CoreEffects),r=a.EventListenerEffectFactory,l=a.StateEffectFactory,u=t.using(r,l),c=u.registry.get(s.BundleExportNames.Logger),d=u.registry.get(s.SourceExportNames.SourceState),E=u.registry.get(s.BundleExportNames.PlayerConfig),p=null!==(n=E.analytics)&&void 0!==n?n:{};p.playerKey=null!==(i=p.playerKey)&&void 0!==i?i:E.key,c.log("Applying analytics config ".concat(JSON.stringify(p)));var h=new o.BitmovinPwxAdapter(u,p);c.log('Analytics package initializing for "'.concat(d.url,'"...'));var v=function(){u.abortSignal.removeEventListener("abort",v),c.log('Analytics package disposing for "'.concat(d.url,'"')),h.dispose()};u.abortSignal.addEventListener("abort",v)},r=[s.BundleExportNames.Logger,s.BundleExportNames.PlayerConfig,s.CoreExportNames.Constants,s.CoreExportNames.CoreEffects,s.CoreExportNames.CoreStateAtoms,s.SourceExportNames.SourceState,s.SourcesApiExportNames.SourceEventBus,s.PlaybackApiEventsPackageExportNames.PlaybackEvent],a._name=i,{onAdd:a,dependencies:r})},2595:function(e,t){var n;n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var i="string"==typeof e.initial?{state:e.initial}:e.initial,a=e.terminal||e.final,r=t||e.target||{},o=e.events||[],s=e.callbacks||{},l={},u={},c=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[n.WILDCARD];l[e.name]=l[e.name]||{};for(var i=0;i<t.length;i++)u[t[i]]=u[t[i]]||[],u[t[i]].push(e.name),l[e.name][t[i]]=e.to||t[i];e.to&&(u[e.to]=u[e.to]||[])};i&&(i.event=i.event||"startup",c({name:i.event,from:"none",to:i.state}));for(var d=0;d<o.length;d++)c(o[d]);for(var E in l)l.hasOwnProperty(E)&&(r[E]=n.buildEvent(E,l[E]));for(var E in s)s.hasOwnProperty(E)&&(r[E]=s[E]);return r.current="none",r.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},r.can=function(e){return!this.transition&&void 0!==l[e]&&(l[e].hasOwnProperty(this.current)||l[e].hasOwnProperty(n.WILDCARD))},r.cannot=function(e){return!this.can(e)},r.transitions=function(){return(u[this.current]||[]).concat(u[n.WILDCARD]||[])},r.isFinished=function(){return this.is(a)},r.error=e.error||function(e,t,n,i,a,r,o){throw o||r},r.states=function(){return Object.keys(u).sort()},i&&!i.defer&&r[i.event](),r},doCallback:function(e,t,i,a,r,o){if(t)try{return t.apply(e,[i,a,r].concat(o))}catch(t){return e.error(i,a,r,o,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,i,a,r){return n.doCallback(e,e.onbeforeevent,t,i,a,r)},afterAnyEvent:function(e,t,i,a,r){return n.doCallback(e,e.onafterevent||e.onevent,t,i,a,r)},leaveAnyState:function(e,t,i,a,r){return n.doCallback(e,e.onleavestate,t,i,a,r)},enterAnyState:function(e,t,i,a,r){return n.doCallback(e,e.onenterstate||e.onstate,t,i,a,r)},changeState:function(e,t,i,a,r){return n.doCallback(e,e.onchangestate,t,i,a,r)},beforeThisEvent:function(e,t,i,a,r){return n.doCallback(e,e["onbefore"+t],t,i,a,r)},afterThisEvent:function(e,t,i,a,r){return n.doCallback(e,e["onafter"+t]||e["on"+t],t,i,a,r)},leaveThisState:function(e,t,i,a,r){return n.doCallback(e,e["onleave"+i],t,i,a,r)},enterThisState:function(e,t,i,a,r){return n.doCallback(e,e["onenter"+a]||e["on"+a],t,i,a,r)},beforeEvent:function(e,t,i,a,r){if(!1===n.beforeThisEvent(e,t,i,a,r)||!1===n.beforeAnyEvent(e,t,i,a,r))return!1},afterEvent:function(e,t,i,a,r){n.afterThisEvent(e,t,i,a,r),n.afterAnyEvent(e,t,i,a,r)},leaveState:function(e,t,i,a,r){var o=n.leaveThisState(e,t,i,a,r),s=n.leaveAnyState(e,t,i,a,r);return!1!==o&&!1!==s&&(n.ASYNC===o||n.ASYNC===s?n.ASYNC:void 0)},enterState:function(e,t,i,a,r){n.enterThisState(e,t,i,a,r),n.enterAnyState(e,t,i,a,r)},buildEvent:function(e,t){return function(){var i=this.current,a=t[i]||(t[n.WILDCARD]!=n.WILDCARD?t[n.WILDCARD]:i)||i,r=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,i,a,r,n.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,i,a,r,n.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,e,i,a,r))return n.Result.CANCELLED;if(i===a)return n.afterEvent(this,e,i,a,r),n.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=a,n.enterState(o,e,i,a,r),n.changeState(o,e,i,a,r),n.afterEvent(o,e,i,a,r),n.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,n.afterEvent(o,e,i,a,r)};var s=n.leaveState(this,e,i,a,r);return!1===s?(this.transition=null,n.Result.CANCELLED):n.ASYNC===s?n.Result.PENDING:this.transition?this.transition():void 0}}},e.exports&&(t=e.exports=n),t.StateMachine=n},2647:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalAdapter=void 0;var a=n(675),r=n(9796),o=n(4916),s=n(4300),l=n(2361),u=n(4820),c=n(1916),d=n(5063),E=n(2376),p=function(){function e(e){var t=this;this.stateMachineCallbacks=i({},u.defaultStateMachineCallbacks),this.qualityChangeService=new r.default,this.ssaiService=new s.SsaiService,this._onLicenseKeyReceived=new a.EventDispatcher,this._onLicenseCallFailed=new a.EventDispatcher,this.sourceInfoFallbackService=new o.SourceInfoFallbackService,this.drmPerformanceInfo=void 0,this._windowEventTracker=new E.WindowEventTracker,this.eventCallback=function(e,n){n=n||{},t.stateMachine?t.stateMachine.callEvent(e,n,Date.now()):c.logger.log("Bitmovin Analytics: StateMachine isn't ready yet")},e||(e={starttime:void 0}),e.starttime||(e.starttime=(0,d.getCurrentTimestamp)()),this.opts=e}return Object.defineProperty(e.prototype,"windowEventTracker",{get:function(){return this._windowEventTracker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLicenseKeyReceived",{get:function(){return this._onLicenseKeyReceived},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLicenseCallFailed",{get:function(){return this._onLicenseCallFailed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"downloadSpeedInfo",{get:function(){return{segmentsDownloadCount:0,segmentsDownloadSize:0,segmentsDownloadTime:0,avgDownloadSpeed:0,minDownloadSpeed:0,maxDownloadSpeed:0,avgTimeToFirstByte:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.release=function(){this.stateMachine.resetIntervals(),this.stateMachineCallbacks.release(),this.resetSourceRelatedState(),this._windowEventTracker.release()},e.prototype.getCommonPlaybackInfo=function(){var e=1;return window.devicePixelRatio>0&&(e=window.devicePixelRatio),{screenHeight:window.screen.height*e,screenWidth:window.screen.width*e}},e.prototype.clearValues=function(){},e.prototype.clearSegments=function(){},e.prototype.resetSourceRelatedState=function(){this.sourceInfoFallbackService.reset(),this.drmPerformanceInfo=void 0},e.prototype.setCustomData=function(e){var t=this.stateMachine.currentState,n={customDataValues:e,currentTime:this.currentTime};!this.stateMachine.currentState||"PAUSE"!==this.stateMachine.currentState&&"PLAYING"!==this.stateMachine.currentState?this.stateMachineCallbacks.customdatachange(void 0,void 0,n):(this.eventCallback(l.Event.CUSTOM_DATA_CHANGE,{currentTime:this.currentTime}),this.eventCallback(l.Event[t],n))},e.prototype.isAudioMuted=function(e,t){return e||t<.01},e}();t.InternalAdapter=p},2663:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartbeatService=t.DEFAULT_HEARTBEAT_INTERVAL_MS=void 0,t.DEFAULT_HEARTBEAT_INTERVAL_MS=59700;var n=function(){function e(e){this.getPlayerCurrentTime=e}return e.prototype.setListener=function(e){this.listener=e},e.prototype.startHeartbeat=function(){var e=this;void 0!==this.heartbeatInterval&&this.clearHeartbeat(),this.heartbeatInterval=window.setInterval((function(){var t,n={currentTime:e.getPlayerCurrentTime()};null===(t=e.listener)||void 0===t||t.onHeartbeat(n)}),t.DEFAULT_HEARTBEAT_INTERVAL_MS)},e.prototype.stopHeartbeat=function(){this.clearHeartbeat()},e.prototype.clearHeartbeat=function(){window.clearTimeout(this.heartbeatInterval),this.heartbeatInterval=void 0},e}();t.HeartbeatService=n},2751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSPlayerEventListener=t.IVS_PLAYER_EVENT=void 0;var i=n(2235);t.IVS_PLAYER_EVENT={DURATION_CHANGED:"PlayerDurationChanged",ERROR:"PlayerError",INITIALIZED:"PlayerInitialized",QUALITY_CHANGED:"PlayerQualityChanged",REBUFFERING:"PlayerRebuffering",SEEK_COMPLETED:"PlayerSeekCompleted",TIME_UPDATE:"PlayerTimeUpdate",PLAYBACK_RATE_CHANGED:"PlayerPlaybackRateChanged",PLAYBACK_BLOCKED:"PlayerPlaybackBlocked"};var a=function(){function e(e){this.eventHandler=e}return e.prototype.startMonitoring=function(e){this.startMonitoringIVSPlayer(e),this.startMonitoringHTMLVideoElement(e.getHTMLVideoElement())},e.prototype.startMonitoringHTMLVideoElement=function(e){e.addEventListener("play",this.eventHandler.onPlay.bind(this.eventHandler)),e.addEventListener("playing",this.eventHandler.onPlaying.bind(this.eventHandler)),e.addEventListener("pause",this.eventHandler.onPause.bind(this.eventHandler)),e.addEventListener("seeking",this.eventHandler.onSeek.bind(this.eventHandler)),e.addEventListener("seeked",this.eventHandler.onSeeked.bind(this.eventHandler))},e.prototype.startMonitoringIVSPlayer=function(e){e.addEventListener(t.IVS_PLAYER_EVENT.REBUFFERING,this.eventHandler.onRebuffering.bind(this.eventHandler)),e.addEventListener(t.IVS_PLAYER_EVENT.DURATION_CHANGED,this.eventHandler.onDurationChanged.bind(this.eventHandler)),e.addEventListener(t.IVS_PLAYER_EVENT.ERROR,this.eventHandler.onError.bind(this.eventHandler)),e.addEventListener(t.IVS_PLAYER_EVENT.INITIALIZED,this.eventHandler.onInitialized.bind(this.eventHandler)),e.addEventListener(t.IVS_PLAYER_EVENT.QUALITY_CHANGED,this.eventHandler.onQualityChanged.bind(this.eventHandler)),e.addEventListener(t.IVS_PLAYER_EVENT.TIME_UPDATE,this.eventHandler.onTimeUpdate.bind(this.eventHandler))},e.create=function(t,n,a){return new e(i.AmazonIVSPlayerEventHandler.create(t,n,a))},e}();t.AmazonIVSPlayerEventListener=a},2767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BitmovinPwxAdapter=void 0;var i=n(4350),a=n(8331),r=n(4926),o=n(28),s=function(){function e(e,t){var n=this;this.getCurrentImpressionId=function(){return n.analytics.getCurrentImpressionId()},this.getUserId=function(){return n.analytics.getUserId()},this.setCustomData=function(e){return n.internalAdapter.setCustomData(e)},this.setCustomDataOnce=function(e){return n.analytics.setCustomDataOnce(e)},this.sourceChange=function(e){return n.analytics.sourceChange(e)};var r=(0,a.sanitizeAnalyticsConfig)(t);(0,a.guardAgainstDuplicatedUserId)(r),this.internalAdapter=new o.BitmovinPwxInternalAdapter(e),this.analytics=i.Analytics.create(r,this.internalAdapter)}return e.prototype.dispose=function(){this.internalAdapter.release()},Object.defineProperty(e.prototype,"version",{get:function(){return r.VERSION},enumerable:!1,configurable:!0}),e.version=r.VERSION,e}();t.BitmovinPwxAdapter=s},2857:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceUrlProvider=void 0;var n=function(){};t.SourceUrlProvider=n},2974:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectValues=void 0;t.objectValues=function(e){return Object.keys(e).map((function(t){return e[t]}))}},2982:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=void 0;t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},3003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PauseEventDispatcher=void 0;var i,a=n(2361);!function(e){e[e.IDLE=0]="IDLE",e[e.PAUSE_SCHEDULED=1]="PAUSE_SCHEDULED",e[e.PAUSE_CANCELLED=2]="PAUSE_CANCELLED"}(i||(i={}));var r=function(){function e(e,t){this.dispatcher=e,this.playerContext=t,this.EVENT_DELAY_MS=10,this.state=i.IDLE}return e.prototype.cancelPause=function(){this.state==i.PAUSE_SCHEDULED&&(this.state=i.PAUSE_CANCELLED)},e.prototype.schedulePauseEvent=function(){var e=this;if(this.state!=i.PAUSE_SCHEDULED){this.state=i.PAUSE_SCHEDULED;var t={currentTime:this.playerContext.position};setTimeout((function(){e.triggerPause(t),e.state=i.IDLE}),this.EVENT_DELAY_MS,this)}},e.prototype.triggerPause=function(e){this.state!=i.PAUSE_CANCELLED&&this.dispatcher.eventCallback(a.Event.PAUSE,e)},e}();t.PauseEventDispatcher=r},3037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorService=void 0;var i=n(2361),a=function(){function e(e,t){this.dispatcher=e,this.playerContext=t}return e.prototype.onError=function(e){var t={currentTime:this.playerContext.position,code:e.code,message:e.message,originalError:e,data:{exceptionMessage:e.message,exceptionStacktrace:[e.source]}};this.dispatcher.eventCallback(i.Event.ERROR,t)},e}();t.ErrorService=a},3054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackendFactory=void 0;var i=n(5253),a=n(4649),r=n(7540),o=n(3489),s=n(399),l=n(2226),u=n(7390),c=function(){function e(){}return e.prototype.createBackend=function(e,t,n,i){if(!this.isEnabled(e))return new l.NoOpBackend;var a=this.createInnerBackend(e,t,n,i);return this.decorateWithDebuggingBackend(e,a)},e.prototype.decorateWithDebuggingBackend=function(e,t){return e.debug?new r.DebuggingBackend(e,t):t},e.prototype.decorateWithBackendFromConfigIfAvailable=function(e,t){return void 0!==e&&void 0!==e.config&&void 0!==e.config.wrapBackend?e.config.wrapBackend(t):t},e.prototype.isEnabled=function(e){return void 0===e.config||!1!==e.config.enabled},e.prototype.createInnerBackend=function(e,t,n,r){var l=e.config&&e.config.backendUrl||a.ANALYTICS_BACKEND_BASE_URL,c=new o.LicenseCheckingBackend(t,i.LicenseCall,l,n,r);c=this.decorateWithBackendFromConfigIfAvailable(e,c);var d=new u.SequenceNumberBackend(c);return new s.LongPlaytimeFilteringBackend(d)},e}();t.BackendFactory=c},3129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var n=function(){function e(){this._items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._items.length},enumerable:!1,configurable:!0}),e.prototype.offer=function(e){this._items.push(e)},e.prototype.poll=function(){return this._items.shift()},e.prototype.clear=function(){this._items.splice(0)},e.prototype.limit=function(e){for(;this._items.length>e;)this.poll()},e}();t.Queue=n},3236:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CAFv3InternalAdapter=void 0,t.detectCAFv3PlaybackInfoStreamTypeFields=S;var o=n(3453),s=n(2663),l=n(2361),u=n(556),c=n(7224),d=n(7614),E=n(9557),p=n(3413),h=n(1820),v=n(5063),f=n(2647),A=n(1489),m=function(e){function t(t,n){var i=e.call(this,n)||this;i.onBeforeUnLoadEvent=!1,i.activeTextTracks=[],i.getPlayerVersion=function(){var e,t;return null!==(t=null===(e=null===cast||void 0===cast?void 0:cast.framework)||void 0===e?void 0:e.VERSION)&&void 0!==t?t:"unknown"},i.getPlayerName=function(){return u.Player.CHROMECAST_SHAKA},i.getPlayerTech=function(){return"html5"},i.getAutoPlay=function(){var e,t,n;return null!==(n=null===(t=null===(e=i.playerManager.getQueueManager())||void 0===e?void 0:e.getCurrentItem())||void 0===t?void 0:t.autoplay)&&void 0!==n&&n},i.getDrmPerformanceInfo=function(){return i.drmPerformanceInfo};var a=new s.HeartbeatService((function(){return t.getPlayerManager().getCurrentTimeSec()})),r=new o.CAFv3AnalyticsStateMachine(i.stateMachineCallbacks,a,i.opts);return a.setListener(r),i.playerManager=t.getPlayerManager(),i.stateMachine=r,i}return a(t,e),t.prototype.initialize=function(e){return this.registerCastFrameworkEventListeners(),this.registerWindowUnloadEventListeners(),[new E.ErrorDetailTracking(e.errorDetailTrackingSettingsProvider,new d.ErrorDetailBackend(e.errorDetailTrackingSettingsProvider.collectorConfig),[e.errorDetailSubscribable],void 0)]},t.prototype.sourceChange=function(e){this.stateMachine.callManualSourceChangeEvent(e,this.playerManager.getCurrentTimeSec())},t.prototype.getCurrentPlaybackInfo=function(){var e,t,n,i=this.playerManager.getStats(),a=null===(e=this.activeTextTracks)||void 0===e?void 0:e.map((function(e){return e.language})).filter(v.isNotNullish);return r(r(r(r({},this.getCommonPlaybackInfo()),S(this.playerManager)),function(e){var t;try{var n=e.getAudioTracksManager().getActiveTrack();return{audioLanguage:null==n?void 0:n.language,audioCodec:null===(t=null==n?void 0:n.audioTrackInfo)||void 0===t?void 0:t.audioCodec,audioBitrate:void 0}}catch(e){return{}}}(this.playerManager)),{isLive:y(this.playerManager),playerTech:this.getPlayerTech(),videoDuration:(0,p.normalizeVideoDuration)(null!==(n=null===(t=this.playerManager.getMediaInformation())||void 0===t?void 0:t.duration)&&void 0!==n?n:0),videoPlaybackHeight:i.height,videoPlaybackWidth:i.width,subtitleLanguage:a?a.join(","):void 0,droppedFrames:0})},t.prototype.registerCastFrameworkEventListeners=function(){var e=this;this.playerManager.addEventListener(A.CastFrameworkEvent.LOADED_METADATA,(function(t){e.eventCallback(l.Event.SOURCE_LOADED,{})})),this.playerManager.addEventListener(A.CastFrameworkEvent.PLAYER_LOAD_COMPLETE,(function(){var t=e.playerManager.getTextTracksManager();e.activeTextTracks=t.getActiveTracks(),e.eventCallback(l.Event.READY,{})})),this.playerManager.addEventListener(A.CastFrameworkEvent.PLAY,(function(t){e.eventCallback(l.Event.PLAY,{currentTime:t.currentMediaTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.PLAYING,(function(t){e.eventCallback(l.Event.PLAYING,{currentTime:e.currentTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.TIME_UPDATE,(function(t){e.eventCallback(l.Event.TIMECHANGED,{currentTime:t.currentMediaTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.PAUSE,(function(t){e.eventCallback(l.Event.PAUSE,{currentTime:e.currentTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.ERROR,(function(t){var n=(0,v.isNotNullish)(t.error)?t.error:void 0;e.eventCallback(l.Event.ERROR,{currentTime:e.playerManager.getCurrentTimeSec(),code:t.detailedErrorCode,message:t.reason,legacyData:n,originalError:t,data:{additionalData:JSON.stringify(n)}})})),this.playerManager.addEventListener(A.CastFrameworkEvent.SEEKING,(function(t){e.eventCallback(l.Event.SEEK,{currentTime:t.currentMediaTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.SEEKED,(function(t){e.eventCallback(l.Event.SEEKED,{currentTime:t.currentMediaTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.BUFFERING,(function(t){t.isBuffering&&e.eventCallback(l.Event.START_BUFFERING,{currentTime:e.currentTime})})),this.playerManager.addEventListener(A.CastFrameworkEvent.REQUEST_LOAD,(function(t){e.sourceChange({})}))},t.prototype.registerWindowUnloadEventListeners=function(){var e=this,t=function(){e.onBeforeUnLoadEvent||(e.onBeforeUnLoadEvent=!0,e.eventCallback(l.Event.UNLOAD,{currentTime:e.currentTime})),e.release()};this.windowEventTracker.addEventListener("beforeunload",t),this.windowEventTracker.addEventListener("unload",t)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.playerManager.getCurrentTimeSec()},enumerable:!1,configurable:!0}),t}(f.InternalAdapter);function y(e){var t;return"LIVE"===(null===(t=e.getMediaInformation())||void 0===t?void 0:t.streamType)||(!!e.getLiveSeekableRange()||void 0)}function S(e){var t,n,i=null===(t=e.getMediaInformation())||void 0===t?void 0:t.contentUrl;((0,v.isNullish)(i)||(0,h.isBlank)(i))&&(i=null===(n=e.getMediaInformation())||void 0===n?void 0:n.contentId);var a=(0,c.getStreamTypesFromURL)(i);return(0,p.buildPlaybackInfoStreamTypeFields)(a,i)}t.CAFv3InternalAdapter=m},3413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeVideoDuration=function(e){if((0,a.isNullish)(e)||Number.isNaN(e)||e===1/0)return 0;return e},t.buildPlaybackInfoStreamTypeFields=function(e,t){var n={streamFormat:null!=e?e:void 0,progUrl:t};if((0,a.isNullish)(e))return n;if(e===i.StreamTypes.dash)return{streamFormat:e,mpdUrl:t};if(e===i.StreamTypes.hls)return{streamFormat:e,m3u8Url:t};if(e===i.StreamTypes.prog)return{streamFormat:e,progUrl:t};return n};var i=n(7224),a=n(5063)},3453:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.CAFv3AnalyticsStateMachine=t.State=void 0;var o,s=n(2595),l=n(2361),u=n(3565),c=n(1916),d=n(5063),E=n(7596),p=n(8253);!function(e){e.CUSTOMDATACHANGE="CUSTOMDATACHANGE",e.ERROR="ERROR",e.PAUSE="PAUSE",e.PLAYING="PLAYING",e.READY="READY",e.REBUFFERING="REBUFFERING",e.SEEKING="SEEKING",e.SEEKING_IN_PAUSE="SEEKING_IN_PAUSE",e.SETUP="SETUP",e.SOURCE_CHANGING="SOURCE_CHANGING",e.STARTUP="STARTUP",e.UNLOADED="UNLOADED",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(o||(t.State=o={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createStateMachine=function(e){var t,n=this;return(0,s.create)({initial:{state:o.SETUP,event:l.JSM_INITIAL_EVENT},error:p.customStateMachineErrorCallback,events:r(r(r(r(r(r(r(r(r(r(r(r(r(r([],(0,p.whileIn)(o.SETUP).passOver(l.Event.START_BUFFERING),!0),[{name:l.Event.SOURCE_LOADED,from:o.SETUP,to:o.READY},{name:l.Event.READY,from:o.SETUP,to:o.READY}],!1),(0,p.whileIn)(o.READY).passOver(l.Event.READY,l.Event.START_BUFFERING,l.Event.END_BUFFERING,l.Event.TIMECHANGED,l.Event.SEEK,l.Event.SEEKED),!0),[{name:l.Event.PLAY,from:o.READY,to:o.STARTUP},{name:l.Event.ERROR,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.UNLOAD,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.VIDEOSTART_TIMEOUT,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.ERROR,from:(0,p.getAllStatesBut)([o.STARTUP],o),to:o.ERROR},{name:l.Event.UNLOAD,from:(0,p.getAllStatesBut)([o.STARTUP],o),to:o.UNLOADED},{name:l.Event.TIMECHANGED,from:o.STARTUP,to:o.PLAYING}],!1),(0,p.whileIn)(o.PLAYING).passOver(l.Event.TIMECHANGED),!0),[{name:l.Event.START_BUFFERING,from:o.PLAYING,to:o.REBUFFERING},{name:l.Event.TIMECHANGED,from:o.REBUFFERING,to:o.PLAYING},{name:l.Event.PAUSE,from:o.PLAYING,to:o.PAUSE},{name:l.Event.PAUSE,from:o.REBUFFERING,to:o.PAUSE},{name:l.Event.PAUSE,from:o.SEEKING,to:o.PAUSE}],!1),(0,p.whileIn)(o.PAUSE).passOver(l.Event.START_BUFFERING,l.Event.END_BUFFERING),!0),[{name:l.Event.PLAYING,from:o.PAUSE,to:o.PLAYING},{name:l.Event.SEEK,from:o.PAUSE,to:o.SEEKING_IN_PAUSE}],!1),(0,p.whileIn)(o.SEEKING_IN_PAUSE).passOver(l.Event.SEEK,l.Event.START_BUFFERING,l.Event.END_BUFFERING,l.Event.TIMECHANGED),!0),[{name:l.Event.SEEKED,from:o.SEEKING_IN_PAUSE,to:o.PAUSE},{name:l.Event.SEEK,from:o.PLAYING,to:o.SEEKING}],!1),(0,p.whileIn)(o.SEEKING).passOver(l.Event.SEEK,l.Event.START_BUFFERING,l.Event.END_BUFFERING,l.Event.TIMECHANGED),!0),[{name:l.Event.SEEKED,from:o.SEEKING,to:o.PLAYING},{name:l.Event.MANUAL_SOURCE_CHANGE,from:(0,p.getAllStatesBut)([o.SETUP],o),to:o.SOURCE_CHANGING}],!1),(0,p.whileIn)(o.SOURCE_CHANGING).passOver(l.Event.START_BUFFERING,l.Event.TIMECHANGED),!0),[{name:l.Event.SOURCE_LOADED,from:o.SOURCE_CHANGING,to:o.READY},{name:l.Event.CUSTOM_DATA_CHANGE,from:[o.PLAYING,o.PAUSE],to:o.CUSTOMDATACHANGE},{name:l.Event.PLAYING,from:o.CUSTOMDATACHANGE,to:o.PLAYING},{name:l.Event.PAUSE,from:o.CUSTOMDATACHANGE,to:o.PAUSE}],!1),callbacks:(t={},t["onleave".concat(o.PLAYING)]=function(){n.playingHeartbeatService.stopHeartbeat()},t["onleave".concat(o.STARTUP)]=function(){n.clearVideoStartTimeout()},t.onleavestate=function(e,t,i,a,r){if((0,p.logStateMachineTransition)("LEAVE",e,t,i),e!==l.JSM_INITIAL_EVENT&&(t===o.REBUFFERING&&n.resetRebufferingHelpers(),a&&t!==o.ERROR&&!(t===o.PAUSE&&i===o.SEEKING_IN_PAUSE||t===o.SEEKING_IN_PAUSE&&i===o.PAUSE))){r&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(r);var s=a-n.onEnterStateTimestamp,E=String(t).toLowerCase();if(t!==o.STARTUP||i!==o.VIDEOSTART_FAILED)if(t!==o.SEEKING)if(e!==l.Event.UNLOAD){var h=n.stateMachineCallbacks[E];if((0,d.isFunction)(h))try{h(s,E,r)}catch(e){c.logger.error("Exception occurred in State Machine callback "+E,r,e)}else(0,p.logMissingCallbackWarning)(t,[o.READY,o.SOURCE_CHANGING])}else n.stateMachineCallbacks.unload(s,E);else n.stateMachineCallbacks.seeking(s);else n.stateMachineCallbacks.videoStartFailed(s,(0,u.createVideoStartFailedReason)(e))}},t["onenter".concat(o.PLAYING)]=function(){n.playingHeartbeatService.startHeartbeat()},t["onenter".concat(o.SOURCE_CHANGING)]=function(e,t,i,a,r){n.stateMachineCallbacks.manualSourceChange(r)},t["onenter".concat(o.STARTUP)]=function(){n.setVideoStartTimeout()},t.onenterstate=function(t,i,a,r,s){(0,p.logStateMachineTransition)("ENTER",t,i,a),i===o.PAUSE&&a===o.SEEKING_IN_PAUSE||i===o.SEEKING_IN_PAUSE&&a===o.PAUSE||(n.onEnterStateTimestamp=null!=r?r:Date.now(),(0,d.isNumber)(e.starttime)&&t===l.JSM_INITIAL_EVENT&&(n.onEnterStateTimestamp=e.starttime),s&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(s),a===o.REBUFFERING&&n.startRebufferingHeartbeatInterval())},t["onafter".concat(l.Event.ERROR)]=function(e,t,i,a,r){n.stateMachineCallbacks.error(r)},t)})},t.prototype.onSsaiPlaybackInteraction=function(e,t){},t}(E.AnalyticsStateMachine);t.CAFv3AnalyticsStateMachine=h},3458:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0;var n=function(){function e(e,t,n){void 0===n&&(n="CRITICAL"),this.code=e,this.message=t,this.errorSeverity=n}return e.BITMOVIN_PLAYER_LICENSING_ERROR=new e(1103,""),e.SETUP_MISSING_LICENSE_WHITELIST=new e(1105,""),e.QUALITY_CHANGE_THRESHOLD_EXCEEDED=new e(1e4,"ANALYTICS_QUALITY_CHANGE_THRESHOLD_EXCEEDED","INFO"),e.BUFFERING_TIMEOUT_REACHED=new e(10001,"ANALYTICS_BUFFERING_TIMEOUT_REACHED"),e.VIDEO_STARTUP_TIMEOUT_REACHED=new e(10002,"ANALYTICS_VIDEOSTART_TIMEOUT_REACHED"),e}();t.ErrorCode=n},3489:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LicenseCheckingBackend=void 0;var a=n(4501),r=n(1916),o=n(4649),s=n(2226),l=n(1125),u=n(2364),c=function(){function e(e,t,n,a,r){var u=this;this.licenseCall=t,this.backendBaseUrl=n,this.adapter=a,this.authenticationCallback=r,this.licenseKeyReceived=function(e){clearTimeout(u.licenseLazyLoadingTimeoutHandle),u.unsubscribeFromAdapter(),u.info.key=e.licenseKey,u.promise=u.wrapLicenseCheckPromiseWithCallback(u.performLicenseCheck(),u.authenticationCallback)},this.licenseCallFailed=function(){clearTimeout(u.licenseLazyLoadingTimeoutHandle),u.unsubscribeFromAdapter(),u.backend=new s.NoOpBackend,u.authenticationCallback.authenticationCompleted(!1,void 0)},this.licenseLazyLoadingTimeout=function(){u.unsubscribeFromAdapter(),u.backend=new s.NoOpBackend,u.authenticationCallback.authenticationCompleted(!1,void 0)},this.info=i({},e),this.backend=new l.QueueBackend,this.licenseCall=t,void 0!==e.key&&""!==e.key?this.promise=this.wrapLicenseCheckPromiseWithCallback(this.performLicenseCheck(),this.authenticationCallback):!0===a.supportsDeferredLicenseLoading?(a.onLicenseKeyReceived.subscribe(this.licenseKeyReceived),a.onLicenseCallFailed.subscribe(this.licenseCallFailed),this.licenseLazyLoadingTimeoutHandle=window.setTimeout(this.licenseLazyLoadingTimeout,o.ANALYTICS_LICENSECALL_TIMEOUT)):(r.authenticationCompleted(!1,void 0),this.backend=new s.NoOpBackend)}return e.prototype.performLicenseCheck=function(){var e=this,t=this.info,n=t.key,i=t.domain,o=t.version;if(!n||""===n){var l={status:a.LicensingResult.Denied,message:"No license key provided"};return this.backend=new s.NoOpBackend,Promise.resolve(l)}return this.licenseCall(n,i,o,this.backendBaseUrl).then((function(t){if(t.status!==a.LicensingResult.Granted)throw new Error(t.message);var i=new u.RemoteBackend(!0,e.backendBaseUrl,n);return e.backend.flushTo(i),e.backend=i,t})).catch((function(t){return"Ignoring Impression due to DNT Header being set"===t.message?r.logger.error("License Check for Bitmovin Analytics failed because of",t):r.logger.errorMessageToUser("License Check for Bitmovin Analytics failed because of",t),e.backend=new s.NoOpBackend,{status:a.LicensingResult.Denied,message:t.message}}))},e.prototype.sendRequest=function(e){this.backend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.backend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.backend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.backend.sendAdRequest(e)},e.prototype.unsubscribeFromAdapter=function(){this.adapter.onLicenseKeyReceived.unsubscribe(this.licenseKeyReceived),this.adapter.onLicenseCallFailed.unsubscribe(this.licenseCallFailed)},e.prototype.wrapLicenseCheckPromiseWithCallback=function(e,t){return e.then((function(e){return t.authenticationCompleted(e.status===a.LicensingResult.Granted,e.features),e}))},e}();t.LicenseCheckingBackend=c},3565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStartFailedReason=void 0,t.createVideoStartFailedReason=function(e){switch(e){case a.Event.ERROR:return i.PLAYER_ERROR;case a.Event.UNLOAD:return i.PAGE_CLOSED;case a.Event.VIDEOSTART_TIMEOUT:return i.TIMEOUT;default:return i.UNKNOWN}};var i,a=n(2361);!function(e){e.PAGE_CLOSED="PAGE_CLOSED",e.PLAYER_ERROR="PLAYER_ERROR",e.TIMEOUT="TIMEOUT",e.UNKNOWN="UNKNOWN"}(i||(t.VideoStartFailedReason=i={}))},3588:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AD_TYPE=void 0,function(e){e[e.NO_AD=0]="NO_AD",e[e.CSAI=1]="CSAI",e[e.SSAI=2]="SSAI"}(n||(t.AD_TYPE=n={}))},3612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportTracker=void 0;var i=n(1916),a=n(5063),r=n(5063),o=function(){function e(e,t,n){void 0===n&&(n=1);var r=this;this.inViewport=void 0,this.threshold=n,this.onIntersectionChanged=t,this.element=e;try{var o={root:null,rootMargin:"0px",threshold:n};this.observer=new IntersectionObserver((function(e,t){return r.handleIntersect(e,t)}),o),this.observer.observe(e)}catch(e){i.logger.log("Couldn't create instance of IntersectionObserver. timeInViewport will always be reported as 100%.")}this.hidden=a.getHiddenProp(),this.hidden&&(this.visibilityChange=this.hidden.replace("hidden","")+"visibilitychange",document.addEventListener(this.visibilityChange,this.handleVisibilityChange=this.handleVisibilityChange.bind(this),!1))}return e.prototype.isHidden=function(){return this.hidden&&document[this.hidden]},e.prototype.isInViewport=function(){return!this.isHidden()&&(!!(0,r.isNullish)(this.inViewport)||this.inViewport)},e.prototype.dispose=function(){this.observer&&(this.observer.unobserve(this.element),this.observer.disconnect()),this.visibilityChange&&document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},e.prototype.handleVisibilityChange=function(){this.onIntersectionChanged()},e.prototype.handleIntersect=function(e,t){var n=this;e.forEach((function(e){e.target===n.element&&(n.inViewport=!(e.intersectionRatio<n.threshold))})),this.onIntersectionChanged()},e}();t.ViewportTracker=o},3674:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HTML5AnalyticsStateMachine=void 0;var o,s=n(2595),l=n(2361),u=n(3565),c=n(1916),d=n(5063),E=n(7596),p=n(8253);!function(e){e.AD="AD",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.CASTING="CASTING",e.CUSTOMDATACHANGE="CUSTOMDATACHANGE",e.END="END",e.ERROR="ERROR",e.MUTING_PAUSE="MUTING_PAUSE",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_READY="MUTING_READY",e.PAUSE="PAUSE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAYING="PLAYING",e.QUALITYCHANGE="QUALITYCHANGE",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.READY="READY",e.REBUFFERING="REBUFFERING",e.SETUP="SETUP",e.SETUP_SOURCE_CHANGE="SETUP_SOURCE_CHANGE",e.SOURCE_CHANGING="SOURCE_CHANGING",e.STARTUP="STARTUP",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(o||(o={}));var h=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.createStateMachine(i),a}return a(t,e),t.prototype.getAllStates=function(){return r(r([],Object.keys(o).map((function(e){return o[e]})),!0),["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"],!1)},t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter((function(t){return e.indexOf(t)<0}))},t.prototype.createStateMachine=function(e){var t,n=this;return s.create({initial:{state:o.SETUP,event:l.JSM_INITIAL_EVENT},error:p.customStateMachineErrorCallback,events:r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r(r([{name:l.Event.SOURCE_LOADED,from:[o.SETUP,o.SETUP_SOURCE_CHANGE,o.SOURCE_CHANGING],to:o.READY}],(0,p.whileIn)(o.READY).passOver(l.Event.SEEK,l.Event.SEEKED),!0),[(0,p.on)(l.Event.TIMECHANGED).stayIn(o.SETUP),(0,p.on)(l.Event.SOURCE_LOADED).stayIn(o.READY),{name:l.Event.PLAY,from:o.READY,to:o.STARTUP},{name:l.Event.PLAY,from:o.SOURCE_CHANGING,to:o.STARTUP},{name:l.Event.ERROR,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.UNLOAD,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.VIDEOSTART_TIMEOUT,from:o.STARTUP,to:o.VIDEOSTART_FAILED}],!1),(0,p.whileIn)(o.STARTUP).passOver(l.Event.SOURCE_LOADED,l.Event.START_BUFFERING,l.Event.END_BUFFERING,l.Event.VIDEO_CHANGE,l.Event.AUDIO_CHANGE,l.Event.SEEK,l.Event.SEEKED),!0),[{name:l.Event.TIMECHANGED,from:o.READY,to:o.STARTUP},{name:l.Event.TIMECHANGED,from:o.STARTUP,to:o.PLAYING}],!1),(0,p.whileIn)(o.PLAYING).passOver(l.Event.TIMECHANGED),!0),[(0,p.on)(l.Event.SEEKED).stayIn(o.PAUSE),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.PLAYING),{name:l.Event.START_BUFFERING,from:o.PLAYING,to:o.REBUFFERING},(0,p.on)(l.Event.START_BUFFERING).stayIn(o.REBUFFERING),{name:l.Event.PLAY,from:o.REBUFFERING,to:o.PLAYING},{name:l.Event.TIMECHANGED,from:o.REBUFFERING,to:o.PLAYING},{name:l.Event.PAUSE,from:o.PLAYING,to:o.PAUSE},{name:l.Event.PAUSE,from:o.REBUFFERING,to:o.PAUSE},{name:l.Event.PLAY,from:o.PAUSE,to:o.PLAYING},{name:l.Event.TIMECHANGED,from:o.PAUSE,to:o.PLAYING},{name:l.Event.VIDEO_CHANGE,from:o.PLAYING,to:o.QUALITYCHANGE},{name:l.Event.AUDIO_CHANGE,from:o.PLAYING,to:o.QUALITYCHANGE}],!1),(0,p.whileIn)(o.QUALITYCHANGE).runEventCallbacksFor(l.Event.VIDEO_CHANGE,l.Event.AUDIO_CHANGE),!0),[{name:"FINISH_QUALITYCHANGE",from:o.QUALITYCHANGE,to:o.PLAYING},{name:l.Event.VIDEO_CHANGE,from:o.PAUSE,to:o.QUALITYCHANGE_PAUSE},{name:l.Event.AUDIO_CHANGE,from:o.PAUSE,to:o.QUALITYCHANGE_PAUSE}],!1),(0,p.whileIn)(o.QUALITYCHANGE_PAUSE).runEventCallbacksFor(l.Event.VIDEO_CHANGE,l.Event.AUDIO_CHANGE),!0),[{name:"FINISH_QUALITYCHANGE_PAUSE",from:o.QUALITYCHANGE_PAUSE,to:o.PAUSE},{name:l.Event.SEEK,from:o.PAUSE,to:o.PAUSED_SEEKING}],!1),(0,p.whileIn)(o.PAUSED_SEEKING).passOver(l.Event.PLAY,l.Event.SEEK,l.Event.AUDIO_CHANGE,l.Event.VIDEO_CHANGE,l.Event.START_BUFFERING,l.Event.END_BUFFERING),!0),[{name:l.Event.SEEKED,from:o.PAUSED_SEEKING,to:o.PAUSE},{name:l.Event.TIMECHANGED,from:o.PAUSED_SEEKING,to:o.PLAYING},{name:l.Event.PAUSE,from:o.PAUSED_SEEKING,to:o.PAUSE},{name:l.Event.END,from:o.PAUSED_SEEKING,to:o.END},{name:l.Event.END,from:o.PLAYING,to:o.END},{name:l.Event.END,from:o.PAUSE,to:o.END}],!1),(0,p.whileIn)(o.END).passOver(l.Event.PAUSE,l.Event.SEEK,l.Event.SEEKED,l.Event.TIMECHANGED,l.Event.END_BUFFERING,l.Event.START_BUFFERING,l.Event.END),!0),(0,p.whileIn)(o.PLAYING).passOver(l.Event.SEEK,l.Event.SEEKED),!0),[{name:l.Event.PLAY,from:o.END,to:o.PLAYING},{name:l.Event.ERROR,from:this.getAllStatesBut([o.STARTUP]),to:o.ERROR},{name:l.Event.PAUSE,from:o.ERROR,to:o.ERROR},{name:l.Event.UNLOAD,from:this.getAllStatesBut([o.STARTUP]),to:o.END},{name:l.Event.SUBTITLE_CHANGE,from:o.PLAYING,to:o.SUBTITLE_CHANGING},(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.PAUSE),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.READY),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.STARTUP),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.REBUFFERING),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.SUBTITLE_CHANGING),{name:l.Event.TIMECHANGED,from:o.SUBTITLE_CHANGING,to:o.PLAYING},{name:l.Event.AUDIOTRACK_CHANGED,from:o.PLAYING,to:o.AUDIOTRACK_CHANGING},(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.PAUSE),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.READY),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.STARTUP),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.REBUFFERING),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.AUDIOTRACK_CHANGING),{name:l.Event.TIMECHANGED,from:o.AUDIOTRACK_CHANGING,to:o.PLAYING},{name:l.Event.START_AD,from:o.PLAYING,to:o.AD},{name:l.Event.END_AD,from:o.AD,to:o.PLAYING},{name:l.Event.MUTE,from:o.READY,to:o.MUTING_READY},{name:l.Event.UN_MUTE,from:o.READY,to:o.MUTING_READY},{name:"FINISH_MUTING",from:o.MUTING_READY,to:o.READY},{name:l.Event.MUTE,from:o.PLAYING,to:o.MUTING_PLAY},{name:l.Event.UN_MUTE,from:o.PLAYING,to:o.MUTING_PLAY},{name:"FINISH_MUTING",from:o.MUTING_PLAY,to:o.PLAYING},{name:l.Event.MUTE,from:o.PAUSE,to:o.MUTING_PAUSE},{name:l.Event.UN_MUTE,from:o.PAUSE,to:o.MUTING_PAUSE},{name:"FINISH_MUTING",from:o.MUTING_PAUSE,to:o.PAUSE},{name:l.Event.START_CAST,from:[o.READY,o.PAUSE],to:o.CASTING}],!1),(0,p.whileIn)(o.CASTING).passOver(l.Event.PAUSE,l.Event.PLAY,l.Event.TIMECHANGED,l.Event.MUTE,l.Event.SEEK,l.Event.SEEKED),!0),[{name:l.Event.END_CAST,from:o.CASTING,to:o.READY},{name:l.Event.MANUAL_SOURCE_CHANGE,from:o.SETUP,to:o.SETUP_SOURCE_CHANGE},(0,p.on)(l.Event.MANUAL_SOURCE_CHANGE).stayIn(o.SETUP_SOURCE_CHANGE),{name:l.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut([o.SETUP,o.SETUP_SOURCE_CHANGE]),to:o.SOURCE_CHANGING},{name:l.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:o.SOURCE_CHANGING},(0,p.on)(l.Event.TIMECHANGED).stayIn(o.SOURCE_CHANGING),(0,p.on)(l.Event.PAUSE).stayIn(o.SOURCE_CHANGING),{name:l.Event.VIDEO_CHANGE,from:o.REBUFFERING,to:o.QUALITYCHANGE_REBUFFERING},{name:l.Event.AUDIO_CHANGE,from:o.REBUFFERING,to:o.QUALITYCHANGE_REBUFFERING}],!1),(0,p.whileIn)(o.QUALITYCHANGE_REBUFFERING).runEventCallbacksFor(l.Event.VIDEO_CHANGE,l.Event.AUDIO_CHANGE),!0),[{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:o.QUALITYCHANGE_REBUFFERING,to:o.REBUFFERING},{name:l.Event.CUSTOM_DATA_CHANGE,from:[o.PLAYING,o.PAUSE],to:o.CUSTOMDATACHANGE},{name:l.Event.PLAYING,from:o.CUSTOMDATACHANGE,to:o.PLAYING},{name:l.Event.PAUSE,from:o.CUSTOMDATACHANGE,to:o.PAUSE}],!1),callbacks:(t={},t["onleave".concat(o.PLAYING)]=function(e,t,i,a,r){n.playingHeartbeatService.stopHeartbeat()},t["onleave".concat(o.STARTUP)]=function(e,t,i,a,r){n.clearVideoStartTimeout()},t.onleavestate=function(e,t,i,a,r){if((0,p.logStateMachineTransition)("LEAVE",e,t,i),e!==l.JSM_INITIAL_EVENT&&(t===o.REBUFFERING&&n.resetRebufferingHelpers(),a&&(t!==o.ERROR||e!==l.Event.MANUAL_SOURCE_CHANGE&&e!==l.Event.SOURCE_UNLOADED))){var s=a-n.onEnterStateTimestamp;r&&i!==o.PAUSED_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(r);var E=String(t).toLowerCase();if(i===o.VIDEOSTART_FAILED)n.clearVideoStartTimeout(),n.stateMachineCallbacks.videoStartFailed(s,(0,u.createVideoStartFailedReason)(e));else if(t===o.PAUSED_SEEKING)n.stateMachineCallbacks[E](s,E,r);else if(e===l.Event.UNLOAD)n.stateMachineCallbacks.unload(s,E);else if(t===o.PAUSE&&i!==o.PAUSED_SEEKING)n.stateMachineCallbacks.pause(s,E);else{var h=n.stateMachineCallbacks[E];if((0,d.isFunction)(h))try{h(s,E,r)}catch(e){c.logger.error("Exception occurred in State Machine callback "+E,r,e)}else(0,p.logMissingCallbackWarning)(t,[o.READY,o.SOURCE_CHANGING,o.SETUP_SOURCE_CHANGE])}r&&i!==o.PAUSED_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(r),e===l.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(r):e===l.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(r):e===l.Event.MUTE?n.stateMachineCallbacks.mute():e===l.Event.UN_MUTE&&n.stateMachineCallbacks.unMute()}},t["onenter".concat(o.PLAYING)]=function(e,t,i,a,r){n.onEnterStateTimestamp=a,n.playingHeartbeatService.startHeartbeat()},t["onenter".concat(o.SOURCE_CHANGING)]=function(e,t,i,a,r){e===l.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(r)},t["onenter".concat(o.STARTUP)]=function(e,t,i,a,r){n.setVideoStartTimeout()},t.onenterstate=function(t,i,a,r,s){(0,p.logStateMachineTransition)("ENTER",t,i,a),n.onEnterStateTimestamp=null!=r?r:Date.now(),(0,d.isNumber)(e.starttime)&&t===l.JSM_INITIAL_EVENT&&(n.onEnterStateTimestamp=e.starttime),s&&a!==o.PAUSED_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(s),t===l.Event.START_CAST&&a===o.CASTING&&n.stateMachineCallbacks.startCasting(r,s),a===o.REBUFFERING&&n.startRebufferingHeartbeatInterval()},t["onafter".concat(l.Event.ERROR)]=function(e,t,i,a,r){n.stateMachineCallbacks.error(r)},t.onafterevent=function(e,t,i,a,r){i===o.QUALITYCHANGE_PAUSE&&n.stateMachine.FINISH_QUALITYCHANGE_PAUSE(a),i===o.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(a),i===o.QUALITYCHANGE_REBUFFERING&&n.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(a),i!==o.MUTING_READY&&i!==o.MUTING_PLAY&&i!==o.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(a)},t)})},t.prototype.onSsaiPlaybackInteraction=function(e,t){},t}(E.AnalyticsStateMachine);t.HTML5AnalyticsStateMachine=h},3703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSAdapter=void 0;var i=n(4350),a=n(8331),r=n(1916),o=n(2108),s=n(4926),l=n(9876),u=n(2857),c=function(){function e(e,t,n){if((0,o.hasPlayerAlreadyBeenAugmented)(t))r.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,o.markPlayerInstanceAsAugmented)(t);var s=(0,a.sanitizeAnalyticsConfig)(e);(0,a.guardAgainstDuplicatedUserId)(s);var c=new u.SourceUrlProvider;this.internalAdapter=new l.AmazonIVSInternalAdapter(t,c,n),this.analytics=i.Analytics.create(s,this.internalAdapter),this.wrapPlayerLoad(t,c)}}return e.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.m3u8Url=i[0],n.apply(e,i)}},Object.defineProperty(e.prototype,"version",{get:function(){return s.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,o.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=s.VERSION,e}();t.AmazonIVSAdapter=c},3786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Measure=void 0;var n=function(){function e(e){this.download=e}return Object.defineProperty(e.prototype,"speed",{get:function(){return this.download.size/this.download.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.download.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.download.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeToFirstByte",{get:function(){return this.download.timeToFirstByte},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.download.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"httpStatus",{get:function(){return this.download.httpStatus},enumerable:!1,configurable:!0}),e}();t.Measure=n},4025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStartupService=void 0;var i,a=n(2361);!function(e){e[e.SETUP=0]="SETUP",e[e.IDLE=1]="IDLE",e[e.STARTUP=2]="STARTUP",e[e.STARTUP_FINISHED=3]="STARTUP_FINISHED"}(i||(i={}));var r=function(){function e(e,t,n){this.dispatcher=e,this.playerContext=t,this.qualityChangeService=n,this.state=i.SETUP}return Object.defineProperty(e.prototype,"finishedStartup",{get:function(){return this.state==i.STARTUP_FINISHED},enumerable:!1,configurable:!0}),e.prototype.onInitialized=function(){this.finishSetup()},e.prototype.onPlay=function(){this.startStartup()},e.prototype.onPlaying=function(){this.finishStartup()},e.prototype.finishSetup=function(){this.state=i.IDLE;var e=this.playerContext.position;this.dispatcher.eventCallback(a.Event.READY,{currentTime:e})},e.prototype.startStartup=function(){if(this.state==i.IDLE){this.state=i.STARTUP;var e=this.playerContext.position;this.dispatcher.eventCallback(a.Event.PLAY,{currentTime:e})}},e.prototype.finishStartup=function(){if(this.state==i.STARTUP){this.state=i.STARTUP_FINISHED;var e=this.playerContext.position;this.dispatcher.eventCallback(a.Event.PLAYING,{currentTime:e}),this.qualityChangeService.resetValues(),this.qualityChangeService.setStartupHasFinished()}},e}();t.VideoStartupService=r},4040:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VideojsInternalAdapter=void 0,t.detectVideoJsPlaybackInfoStreamTypeFields=I;var o=n(5182),s=n(2663),l=n(6743),u=n(5626),c=n(2361),d=n(556),E=n(8525),p=n(7224),h=n(7614),v=n(9557),f=n(3413),A=n(716),m=n(1820),y=n(5063),S=function(e){function t(t,n){var i=e.call(this,n)||this;i._subtitleInfo={enabled:!1},i.onBeforeUnLoadEvent=!1,i.previousTime=0,i.getPlayerVersion=function(){var e,t,n,a=null===(t=(e=i.player).version)||void 0===t?void 0:t.call(e)["video.js"];if((0,m.isValidString)(a)&&!(0,m.isBlank)(a))return a;var r=null===(n=window.videojs)||void 0===n?void 0:n.VERSION;return(0,m.isValidString)(r)&&!(0,m.isBlank)(r)?r:"unknown"},i.getPlayerName=function(){return d.Player.VIDEOJS},i.getPlayerTech=function(){return"html5"},i.getAutoPlay=function(){return!0===i.player.autoplay()},i.getDrmPerformanceInfo=function(){return i.drmPerformanceInfo},i.player=t;var a=new s.HeartbeatService((function(){return i.currentTime})),r=new o.VideojsAnalyticsStateMachine(i.stateMachineCallbacks,a,i.opts);return a.setListener(r),i.stateMachine=r,i.videoCompletionTracker=new l.default,i}return a(t,e),t.prototype.resetSourceRelatedState=function(){e.prototype.resetSourceRelatedState.call(this),this.videoCompletionTracker.reset(),this.videoCompletionTracker.setVideoDuration(this.player.duration()),this.previousTime=0},t.prototype.initialize=function(e){return this.register(),[new v.ErrorDetailTracking(e.errorDetailTrackingSettingsProvider,new h.ErrorDetailBackend(e.errorDetailTrackingSettingsProvider.collectorConfig),[e.errorDetailSubscribable],void 0)]},t.prototype.getCurrentPlaybackInfo=function(){var e,t,n;this.selectedAudioLanguage=this.getSelectedAudioTrackLanguage(this.player);var i=this.getCodecInfo(this.player.tech({IWillNotUseThisInPlugins:!0})),a=r(r(r({},this.getCommonPlaybackInfo()),I(this.player)),{isLive:isNaN(this.player.duration())?void 0:this.player.duration()===1/0,size:this.player.isFullscreen()?E.PlayerSize.Fullscreen:E.PlayerSize.Window,playerTech:this.getPlayerTech(),isMuted:this.player.muted(),videoDuration:(0,f.normalizeVideoDuration)(this.player.duration()),videoWindowHeight:this.player.height(),videoWindowWidth:this.player.width(),videoPlaybackHeight:this.player.videoHeight(),videoPlaybackWidth:this.player.videoWidth(),audioLanguage:this.selectedAudioLanguage,subtitleEnabled:this._subtitleInfo.enabled,subtitleLanguage:this._subtitleInfo.language,videoCodec:null==i?void 0:i.videoCodec,audioCodec:null==i?void 0:i.audioCodec,droppedFrames:0}),o=this.getCurrentQualityLevelInfo();return o&&(a.videoPlaybackWidth=null!==(e=o.width)&&void 0!==e?e:a.videoPlaybackWidth,a.videoPlaybackHeight=null!==(t=o.height)&&void 0!==t?t:a.videoPlaybackHeight,a.videoBitrate=null!==(n=o.bitrate)&&void 0!==n?n:a.videoBitrate),a},t.prototype.getCurrentQualityLevelInfo=function(){return this.currentVideoJsQualityLevel()},t.prototype.register=function(){var e=this,t=this;this.player.on("loadstart",(function(){t.eventCallback(c.Event.MANUAL_SOURCE_CHANGE,{config:{}})})),this.player.on("loadedmetadata",(function(){t.videoCompletionTracker.reset(),t.videoCompletionTracker.setVideoDuration(this.duration()),t.previousTime=0,t.eventCallback(c.Event.SOURCE_LOADED,{})})),this.player.ready((function(){t._subtitleInfo=t.getSubtitleInfo(this),t.eventCallback(c.Event.READY,{})})),this.player.on("play",(function(){t.eventCallback(c.Event.PLAY,{currentTime:this.currentTime()})})),this.player.on("pause",(function(){this.seeking()||t.eventCallback(c.Event.PAUSE,{currentTime:this.currentTime()})})),this.player.on("error",(function(){var e=this.error();t.eventCallback(c.Event.ERROR,{currentTime:this.currentTime(),code:e.code,message:e.message,originalError:e,data:{}})})),this.player.on("volumechange",(function(){var e=this.muted(),n=this.volume(),i=t.isAudioMuted(e,n);this.previousMutedValue!==i&&(i?t.eventCallback(c.Event.MUTE,{currentTime:this.currentTime()}):t.eventCallback(c.Event.UN_MUTE,{currentTime:this.currentTime()}),this.previousMutedValue=i)})),this.player.on("seeking",(function(){t.eventCallback(c.Event.SEEK,{currentTime:(0,y.isNotNullish)(t.previousTime)?t.previousTime:this.currentTime()})})),this.player.on("seeked",(function(){t.eventCallback(c.Event.SEEKED,{currentTime:this.currentTime()})})),this.player.on("texttrackchange",(function(){var e=t.getSubtitleInfo(this),n=!!(0,y.isNullish)(t._subtitleInfo)||(0,A.isDifferentSubtitleInfo)(t._subtitleInfo,e);t._subtitleInfo=e,n&&t.eventCallback(c.Event.SUBTITLE_CHANGE,{currentTime:this.currentTime()})})),this.player.audioTracks().on("change",(function(){var e=t.getSelectedAudioTrackLanguage(t.player);(0,y.isNotNullish)(e)&&e!==t.selectedAudioLanguage&&t.eventCallback(c.Event.AUDIOTRACK_CHANGED,{currentTime:t.player.currentTime()})})),this.player.on("stalled",(function(){t.eventCallback(c.Event.START_BUFFERING,{currentTime:this.currentTime()})})),this.player.on("waiting",(function(){t.eventCallback(c.Event.START_BUFFERING,{currentTime:this.currentTime()})})),this.player.on("timeupdate",(function(){this.seeking()||(t.previousTime=this.currentTime()),t.eventCallback(c.Event.TIMECHANGED,{currentTime:this.currentTime()});var e=t.currentVideoJsQualityLevel();if((null==e?void 0:e.height)&&(null==e?void 0:e.width)&&(null==e?void 0:e.bitrate)){if(t.qualityChangeService.shouldAllowVideoQualityChange(e.bitrate)){var n={bitrate:e.bitrate,height:e.height,width:e.width,currentTime:this.currentTime()};t.eventCallback(c.Event.VIDEO_CHANGE,n)}t.qualityChangeService.setVideoBitrate(e.bitrate)}}));var n=function(){if(!e.onBeforeUnLoadEvent){e.onBeforeUnLoadEvent=!0;var t=void 0;(0,y.isNotNullish)(e.player)&&(t=e.player.currentTime()),e.eventCallback(c.Event.UNLOAD,{currentTime:t})}e.release()};n=n.bind(this),this.player.on("dispose",n),this.windowEventTracker.addEventListener("beforeunload",n),this.windowEventTracker.addEventListener("unload",n)},t.prototype.sourceChange=function(e){this.stateMachine.callManualSourceChangeEvent(e,this.currentTime)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.player.currentTime()},enumerable:!1,configurable:!0}),t.prototype.getSelectedAudioTrackLanguage=function(e){for(var t=0,n=e.audioTracks();t<n.length;t++){var i=n[t];if(i.enabled)return i.language}},t.prototype.getSubtitleInfo=function(e){for(var t,n=!1,i=0,a=e.textTracks()||[];i<a.length;i++){var r=a[i];if("showing"===r.mode){n=!0,t=r.language;break}}return{enabled:n,language:t}},t.prototype.currentVideoJsQualityLevel=function(){var e=this.player.tech({IWillNotUseThisInPlugins:!0});if((0,y.isNullish)(e))return null;if((0,y.isNullish)(e.vhs)&&(0,y.isNullish)(e.hls))return null;var t=this.getMediaAttributes(e);return t&&t.bitrate?{bitrate:t.bitrate,width:t.width,height:t.height}:null},t.prototype.getMediaAttributes=function(e){var t;if(e&&(e.vhs?t=e.vhs:e.hls&&(t=e.hls),t&&t.playlists&&(0,y.isFunction)(t.playlists.media))){var n=t.playlists.media();if(n){var i=n.attributes;if(i&&0!==Object.keys(i).length)return{bitrate:i.BANDWIDTH,width:(i.RESOLUTION||{}).width,height:(i.RESOLUTION||{}).height,codecs:i.CODECS}}}},t.prototype.getCodecInfo=function(e){var t=this.getMediaAttributes(e);if(t&&t.codecs){var n=t.codecs.split(",");if(n)return{videoCodec:n.find((function(e){return u.isVideoCodec(e)})),audioCodec:n.find((function(e){return u.isAudioCodec(e)}))}}},t}(n(2647).InternalAdapter);function I(e){var t,n=e.currentSrc(),i=(0,p.getStreamTypesFromURL)(n);if((0,y.isNullish)(i)){var a=null===(t=e.currentType)||void 0===t?void 0:t.call(e);a&&(i=(0,p.getStreamTypeFromMIMEType)(a))}return(0,f.buildPlaybackInfoStreamTypeFields)(i,n)}t.VideojsInternalAdapter=S},4067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeBitmovin8AdapterSsaiAdBreakMetadataAdPosition=void 0;var i=n(5063);t.sanitizeBitmovin8AdapterSsaiAdBreakMetadataAdPosition=function(e){var t=e;return(0,i.isNotNullish)(null==t?void 0:t.adPosition)&&("pre-roll"===t.adPosition?t.adPosition="preroll":"mid-roll"===t.adPosition?t.adPosition="midroll":"post-roll"===(null==t?void 0:t.adPosition)&&(t.adPosition="postroll")),t}},4179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideojsAdapter=void 0;var i=n(4350),a=n(8331),r=n(1916),o=n(2108),s=n(4926),l=n(4040),u=function(){function e(e,t,n){if((0,o.hasPlayerAlreadyBeenAugmented)(t))r.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,o.markPlayerInstanceAsAugmented)(t);var s=(0,a.sanitizeAnalyticsConfig)(e);(0,a.guardAgainstDuplicatedUserId)(s),this.internalAdapter=new l.VideojsInternalAdapter(t,n),this.analytics=i.Analytics.create(s,this.internalAdapter)}}return Object.defineProperty(e.prototype,"version",{get:function(){return s.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,o.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=s.VERSION,e}();t.VideojsAdapter=u},4300:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SsaiService=void 0;var a,r=n(3588),o=n(3458),s=n(5529),l=n(5063),u=n(2982),c=n(7906);!function(e){e[e.AD_BREAK_STARTED=0]="AD_BREAK_STARTED",e[e.ACTIVE=1]="ACTIVE",e[e.IDLE=2]="IDLE"}(a||(a={}));var d=function(){function e(){this.eventHandler=void 0,this.adIndex=-1,this.state=a.IDLE,this.isFirstSampleOfAd=!1,this.sentAdQuartiles=[],this.errorSent=!1}return e.prototype.activate=function(e){this.eventHandler=e},e.prototype.adBreakStart=function(e){E(this.eventHandler)&&this.state==a.IDLE&&(this.state=a.AD_BREAK_STARTED,this.currentAdMetadata=i({},e))},e.prototype.adStart=function(e){var t;if(E(this.eventHandler)&&this.state!=a.IDLE){var n=(new Date).getTime(),i=this.eventHandler.getPlayerCurrentTime();this.eventHandler.reportPlaybackInteraction(n,{currentTime:i}),this.state=a.ACTIVE,this.isFirstSampleOfAd=!0,this.adIndex++,this.resetAdData(),this.currentAdMetadata={adPosition:null===(t=this.currentAdMetadata)||void 0===t?void 0:t.adPosition,adId:null==e?void 0:e.adId,adSystem:null==e?void 0:e.adSystem,customData:null==e?void 0:e.customData},this.currentAdImpressionId=(0,u.generateUUID)(),this.timestampOfAdStart=(0,c.getCurrentMonotonicTimestampInMs)(),this.eventHandler.reportEngagementInteraction({type:"started",adIndex:this.adIndex,currentAdImpressionId:this.currentAdImpressionId,currentAdMetadata:(0,l.isNotNullish)(this.currentAdMetadata)?this.currentAdMetadata:{}})}},e.prototype.adQuartileFinished=function(e,t){E(this.eventHandler)&&this.state==a.ACTIVE&&(this.sentAdQuartiles.includes(e)||(this.eventHandler.reportEngagementInteraction({type:"quartile",adIndex:this.adIndex,currentAdImpressionId:this.currentAdImpressionId,currentAdMetadata:(0,l.isNotNullish)(this.currentAdMetadata)?this.currentAdMetadata:{},quartile:e,quartileMetadata:t,timeSinceAdStartedInMs:(0,c.getMonotonicTimestampInMsSince)(this.timestampOfAdStart)}),this.sentAdQuartiles.push(e)))},e.prototype.adBreakEnd=function(){if(E(this.eventHandler)&&this.state!=a.IDLE){if(this.state==a.ACTIVE){var e=(new Date).getTime(),t=this.eventHandler.getPlayerCurrentTime();this.eventHandler.reportPlaybackInteraction(e,{currentTime:t})}this.resetAdBreakData()}},e.prototype.manipulate=function(e){var t,n,i,o;if(E(this.eventHandler)&&this.state==a.ACTIVE){e.ad=r.AD_TYPE.SSAI,e.adId=null===(t=this.currentAdMetadata)||void 0===t?void 0:t.adId,e.adSystem=null===(n=this.currentAdMetadata)||void 0===n?void 0:n.adSystem,e.adPosition=null===(i=this.currentAdMetadata)||void 0===i?void 0:i.adPosition,this.isFirstSampleOfAd&&(e.adIndex=this.adIndex,this.isFirstSampleOfAd=!1);var u=null===(o=this.currentAdMetadata)||void 0===o?void 0:o.customData;(0,l.isNotNullish)(u)&&s.customDataValuesKeys.forEach((function(t){u[t]&&(e[t]=u[t])})),e[c.SSAI_RELATED_SAMPLE_MARKER]=!0}},e.prototype.sendAdEngagementErrorSample=function(e,t){E(this.eventHandler)&&this.state===a.ACTIVE&&(this.errorSent||e.code!==o.ErrorCode.QUALITY_CHANGE_THRESHOLD_EXCEEDED.code&&(this.eventHandler.reportEngagementInteraction({type:"error",adIndex:this.adIndex,currentAdImpressionId:this.currentAdImpressionId,currentAdMetadata:(0,l.isNotNullish)(this.currentAdMetadata)?this.currentAdMetadata:{},analyticsError:e,originalError:t,timeSinceAdStartedInMs:(0,c.getMonotonicTimestampInMsSince)(this.timestampOfAdStart)}),this.errorSent=!0))},e.prototype.resetSourceRelatedState=function(){this.resetAdBreakData(),this.adIndex=-1},e.prototype.resetAdBreakData=function(){this.state=a.IDLE,this.isFirstSampleOfAd=!1,delete this.currentAdMetadata,this.resetAdData()},e.prototype.resetAdData=function(){var e,t,n;null===(e=this.currentAdMetadata)||void 0===e||delete e.customData,null===(t=this.currentAdMetadata)||void 0===t||delete t.adId,null===(n=this.currentAdMetadata)||void 0===n||delete n.adSystem,this.errorSent=!1,this.currentAdImpressionId=void 0,this.sentAdQuartiles=[],this.timestampOfAdStart=void 0},e}();function E(e){return(0,l.isNotNullish)(e)}t.SsaiService=d},4350:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Analytics=void 0,t.setQualityInfoOnSample=D;var a=n(3588),r=n(3458),o=n(8525),s=n(3565),l=n(6845),u=n(5529),c=n(8331),d=n(404),E=n(1916),p=n(1820),h=n(5063),v=n(5063),f=n(2982),A=n(4926),m=n(8421),y=n(8917),S=n(3054),I=n(675),g=n(7721),T=n(2226),N=n(847),C=n(8918),_=n(7906),P=function(){function e(e,t,n,a,r,o,s){var l=this;this.adapter=t,this.backendFactory=n,this.sessionHandler=a,this.featureManager=r,this.onErrorDetailEventDispatcher=o,this.identicalErrorReportingLimiter=s,this.pageLoadTime=0,this.playerStartupTime=0,this.videoStartupTime=0,this.autoplay=void 0,this.droppedSampleFrames=0,this.startupTime=0,this.authenticationCallback={authenticationCompleted:function(e,t){l.featureManager.configureFeatures(e,t)}},this.sourceChange=function(e){if(E.logger.log("Processing Source Change for Analytics",e),(0,v.isNullish)(e))l.adapter.sourceChange(l.config);else{(0,c.guardConfigChangeAgainstMissingTitle)(l.config,e),(0,c.guardConfigChangeAgainstMissingIsLive)(l.config,e),(0,c.guardAgainstDuplicatedUserId)(e);var t=(0,c.mergeAnalyticsConfig)(l.config,e);l.adapter.sourceChange(t)}},this.setCustomDataOnce=function(e){var t=i({},l.config);l.setState("customdatachange"),l.sendAnalyticsRequestAndClearValues(e),l.config=i({},t),l.setConfigParameters(),l.setAutoDetectedDeviceInformation()},this.setCustomData=function(e){l.adapter.setCustomData(e)},this.getCurrentImpressionId=function(){return l.sample.impressionId},this.getUserId=function(){return l.sessionHandler.userId},this.changeCustomData=function(e){l.config=i(i({},l.config),(0,u.extractCustomDataFieldsOnly)(e)),l.setConfigParameters(),l.setAutoDetectedDeviceInformation()},this.config=e,this.sessionHandler=new N.SessionPersistenceHandler(this.config);var d=this;this.errorDetailTrackingSettingsProvider={get domain(){return(0,c.getDomainFromAnalyticsConfig)(d.config)},get licenseKey(){var e;return null!==(e=d.config.key)&&void 0!==e?e:""},get impressionId(){var e;return null!==(e=d.getCurrentImpressionId())&&void 0!==e?e:""},get collectorConfig(){return d.config.config}};var p=this.adapter.onLicenseKeyReceived.subscribe((function(e){l.config.key||(l.config.key=e.licenseKey),p()}));this.sample=this.setupSample(),this.init(),this.setupStateMachineCallbacks();var h=this.adapter.initialize(this);this.featureManager.registerFeatures(h),this.adapter.adModule&&(this.adAnalytics=new y.AdAnalytics(this,this.adapter.adModule))}return Object.defineProperty(e.prototype,"version",{get:function(){return A.VERSION},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetailSubscribable",{get:function(){return this.onErrorDetailEventDispatcher},enumerable:!1,configurable:!0}),e.prototype.getPlayerInformationFromAdapter=function(){var e=this.config.player||this.adapter.getPlayerName();return{player:e,version:e+"-"+this.adapter.getPlayerVersion(),playerTech:this.adapter.getPlayerTech()}},e.prototype.init=function(){!0===this.adapter.supportsDeferredLicenseLoading||(0,p.isValidString)(this.config.key)&&!(0,p.isBlank)(this.config.key)?(E.logger.initialize(this.config.debug),this.featureManager.resetFeatures(),this.backend=this.createBackend(this.config),this.videoStartupTime=0,this.identicalErrorReportingLimiter.reset(),this.setConfigParameters(),this.setAutoDetectedDeviceInformation(),this.generateNewImpressionId(),this.setUserId(),this.adapter.videoCompletionTracker&&this.adapter.videoCompletionTracker.reset(),this.adapter.qualityChangeService.resetValues(),this.adapter.ssaiService.resetSourceRelatedState()):E.logger.errorMessageToUser("Invalid analytics license key provided")},e.prototype.release=function(){var e;this.backend=new T.NoOpBackend,null===(e=this.adAnalytics)||void 0===e||e.release(),this.adapter.qualityChangeService.stopResetInterval(),this.identicalErrorReportingLimiter.reset()},e.prototype.setConfigParameters=function(){var e;this.sample.key=this.config.key,this.sample.playerKey=this.config.playerKey,this.config.player&&(this.sample.player=this.config.player),this.sample.domain=(0,c.getDomainFromAnalyticsConfig)(this.config),this.sample.deviceInformation=(0,c.getDeviceInformationFromAnalyticsConfig)(this.config),this.sample.cdnProvider=this.config.cdnProvider,this.sample.videoId=this.config.videoId,this.sample.videoTitle=this.config.title,this.sample.customUserId=null!==(e=this.config.userId)&&void 0!==e?e:this.config.customUserId,h.transferCustomDataFields(this.config,this.sample),this.sample.experimentName=this.config.experimentName},e.prototype.generateNewImpressionId=function(){this.sample.impressionId=(0,f.generateUUID)()},e.prototype.setUserId=function(){this.sample.userId=this.sessionHandler.userId},e.prototype.setAutoDetectedDeviceInformation=function(){var e,t;if(!(0,v.isNotNullish)(null===(e=this.sample.deviceInformation)||void 0===e?void 0:e.model)&&(0,m.hasWindowWebOSApi)()){var n=(0,m.getWebOSTVModelName)();(0,v.isNullish)(n)||(this.sample.deviceInformation=null!==(t=this.sample.deviceInformation)&&void 0!==t?t:{},this.sample.deviceInformation.model=n)}},e.prototype.setupStateMachineCallbacks=function(){var e=this;this.adapter.stateMachineCallbacks.setup=function(t,n){if(E.logger.log("Setup bitmovin analytics "+e.sample.analyticsVersion+" with impressionId: "+e.sample.impressionId),e.setDuration(t),e.setState(n),e.playerStartupTime=e.sample.playerStartupTime=t,window.performance&&window.performance.timing){var i=h.getCurrentTimestamp()-window.performance.timing.navigationStart;e.pageLoadTime=e.sample.pageLoadTime=i}e.startupTime=t,e.sendAnalyticsRequestAndClearValues(),e.sample.pageLoadTime=0},this.adapter.stateMachineCallbacks.startup=function(t,n){e.sample.supportedVideoCodecs=d.CodecHelper.supportedVideoFormats,e.setState(n);var i=Math.max(t,1),a=(e.startupTime||0)+i;e.sample.startupTime=a,e.startupTime=a,e.setDuration(i),e.videoStartupTime=i,e.sample.videoStartupTime=i,e.autoplay=e.sample.autoplay=e.adapter.getAutoPlay(),e.adapter.qualityChangeService.setStartupHasFinished();var r=e.adapter.getDrmPerformanceInfo();(0,v.isNotNullish)(r)&&(e.sample.drmType=r.drmType,e.sample.drmLoadTime=r.drmLoadTime),e.sendAnalyticsRequestAndClearValues(),e.sample.autoplay=void 0},this.adapter.stateMachineCallbacks.playing=function(t,n){e.setDuration(t),e.setState(n),e.sample.played=t,e.setCompletionValues(),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.unload=function(t,n){var i=e.sample.videoTimeStart;"playing"===n&&(e.setDuration(t),e.setState(n),e.sample.played=t,e.setCompletionValues(),e.sendUnloadRequest(),h.isNumber(e.sample.videoTimeEnd)&&(i=e.sample.videoTimeEnd)),e.videoStartupTime>0&&(e.setVideoTimeStart(i),e.setVideoTimeEnd(i),e.clearValues(),e.setState("closed"),e.sendUnloadRequest())},this.adapter.stateMachineCallbacks.heartbeat=function(t,n,a){e.setState(n),e.setDuration(t),e.sample=i(i({},e.sample),a),"playing"===n&&e.setCompletionValues(),e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.qualitychange_pause=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.qualitychange_rebuffering=function(t,n){e.sendQualityChange(n,t)},this.adapter.stateMachineCallbacks.videoChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackVideoPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audioChange=function(t){e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackAudioPropertiesFromEvent(t)},this.adapter.stateMachineCallbacks.audiotrack_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.pause=function(t,n){e.setDuration(t),e.setState(n),e.sample.paused=t,e.sendAnalyticsRequestAndClearValues()};var t=function(t,n){e.setDuration(t),e.setState(n),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()};this.adapter.stateMachineCallbacks.seeking=function(e){return t(e,"seeking")},this.adapter.stateMachineCallbacks.paused_seeking=t,this.adapter.stateMachineCallbacks.end_play_seeking=t,this.adapter.stateMachineCallbacks.rebuffering=function(t,n){e.setDuration(t),e.setState(n),e.sample.buffered=t,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.videoStartFailed=function(t,n){e.setState("startup"),e.sample.videoStartFailed=!0,e.sample.videoStartFailedReason=n,e.sample.duration=t,n!==s.VideoStartFailedReason.PLAYER_ERROR&&(n===s.VideoStartFailedReason.TIMEOUT&&(e.sample.errorCode=r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.code,e.sample.errorMessage=r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.message,e.sample.errorSeverity=r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.errorSeverity,e.onErrorDetailEventDispatcher.dispatch({code:r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.code,message:r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.message,severity:r.ErrorCode.VIDEO_STARTUP_TIMEOUT_REACHED.errorSeverity})),e.sendAnalyticsRequestAndClearValues())},this.adapter.stateMachineCallbacks.error=function(t){var n,i=e.transformError({code:t.code,message:t.message,severity:null!==(n=t.errorSeverity)&&void 0!==n?n:"CRITICAL"},t.originalError);!i.code||e.identicalErrorReportingLimiter.shouldReportError(i.code,i.severity)?(e.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setState("error"),e.sample.errorCode=i.code,e.sample.errorMessage=i.message,e.sample.errorSeverity=i.severity,e.sample.errorData=JSON.stringify(t.legacyData),e.sample.errorSegments=e.adapter.segments.map((function(e){return e.name})),e.adapter.onError&&e.adapter.onError(),e.onErrorDetailEventDispatcher.dispatch({code:i.code,message:i.message,severity:i.severity,errorData:t.data}),e.sendAnalyticsRequestAndClearValues()):E.logger.log("Bitmovin Analytics: Processing of the error with code ".concat(i.code," was ignored because the error limit was exceeded."))},this.adapter.stateMachineCallbacks.ad=function(t,n){e.setDuration(t),e.setState(n),e.sample.ad=a.AD_TYPE.CSAI,e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.mute=function(){e.sample.isMuted=!0},this.adapter.stateMachineCallbacks.unMute=function(){e.sample.isMuted=!1},this.adapter.stateMachineCallbacks.subtitle_changing=function(){e.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent=function(t){h.isNumber(null==t?void 0:t.currentTime)&&e.setVideoTimeEnd(h.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent=function(t){h.isNumber(null==t?void 0:t.currentTime)&&e.setVideoTimeStart(h.calculateTime(t.currentTime))},this.adapter.stateMachineCallbacks.manualSourceChange=function(t){e.adapter.resetSourceRelatedState(),e.sample=e.setupSample(),e.startupTime=0,e.config=Object.keys(t.config).length>0?t.config:e.config,e.init()},this.adapter.stateMachineCallbacks.initialSourceChange=function(t){e.config=t.config,e.setConfigParameters(),e.setAutoDetectedDeviceInformation()},this.adapter.stateMachineCallbacks.end=function(){e.sample=e.setupSample(),e.startupTime=0,e.init()},this.adapter.stateMachineCallbacks.release=function(){e.release()},this.adapter.stateMachineCallbacks.customdatachange=function(t,n,i){(0,v.isNotNullish)(null==i?void 0:i.customDataValues)&&e.changeCustomData(i.customDataValues)}},e.prototype.setDuration=function(e){this.sample.duration=e},e.prototype.setState=function(e){this.sample.state=e},e.prototype.setPlaybackVideoPropertiesFromEvent=function(e){h.isNumber(e.width)&&(this.sample.videoPlaybackWidth=e.width),h.isNumber(e.height)&&(this.sample.videoPlaybackHeight=e.height),h.isNumber(e.bitrate)&&(this.sample.videoBitrate=e.bitrate),(0,p.isValidString)(e.codec)&&(this.sample.videoCodec=e.codec)},e.prototype.setPlaybackAudioPropertiesFromEvent=function(e){h.isNumber(e.bitrate)&&(this.sample.audioBitrate=e.bitrate),(0,p.isValidString)(e.codec)&&(this.sample.audioCodec=e.codec)},e.prototype.setPlaybackInfoFromAdapter=function(){var e=this.adapter.getCurrentPlaybackInfo();e&&(this.sample.isLive=(0,v.isNotNullish)(this.config.isLive)?this.config.isLive:e.isLive,(0,v.isNullish)(this.sample.isLive)&&(this.sample.isLive=!1),(0,p.isValidString)(e.size)&&(this.sample.size=e.size),(0,p.isValidString)(e.playerTech)&&(this.sample.playerTech=e.playerTech),h.isNumber(e.videoDuration)&&(this.sample.videoDuration=h.calculateTime(e.videoDuration||0)),(0,p.isValidString)(e.streamFormat)&&(this.sample.streamFormat=e.streamFormat),(0,p.isValidString)(e.mpdUrl)&&(this.sample.mpdUrl=e.mpdUrl),(0,p.isValidString)(e.m3u8Url)&&(this.sample.m3u8Url=e.m3u8Url),(0,p.isValidString)(e.progUrl)&&(this.sample.progUrl=e.progUrl),h.isNumber(e.videoWindowWidth)&&(this.sample.videoWindowWidth=e.videoWindowWidth),h.isNumber(e.videoWindowHeight)&&(this.sample.videoWindowHeight=e.videoWindowHeight),h.isNumber(e.screenHeight)&&(this.sample.screenHeight=e.screenHeight),h.isNumber(e.screenWidth)&&(this.sample.screenWidth=e.screenWidth),h.isBoolean(e.isMuted)&&(this.sample.isMuted=e.isMuted),h.isBoolean(e.isCasting)&&(this.sample.isCasting=e.isCasting),(0,p.isValidString)(e.castTech)&&(this.sample.castTech=e.castTech),(0,p.isValidString)(e.videoTitle)&&!this.config.title&&(this.sample.videoTitle=e.videoTitle),(0,p.isValidString)(e.audioCodec)&&(this.sample.audioCodec=e.audioCodec),(0,p.isValidString)(e.videoCodec)&&(this.sample.videoCodec=e.videoCodec),(0,p.isValidString)(e.audioLanguage)&&(this.sample.audioLanguage=e.audioLanguage),h.isBoolean(e.subtitleEnabled)&&(this.sample.subtitleEnabled=e.subtitleEnabled),(0,p.isValidString)(e.subtitleLanguage)?this.sample.subtitleLanguage=e.subtitleLanguage:this.sample.subtitleLanguage=void 0,h.isNumber(e.droppedFrames)&&(this.sample.droppedFrames=Math.max(e.droppedFrames-this.droppedSampleFrames,0),this.droppedSampleFrames=e.droppedFrames))},e.prototype.setupSample=function(){var e;return this.droppedSampleFrames=0,i({platform:"web",playerStartupTime:0,pageLoadType:h.getPageLoadType(),path:h.sanitizePath(window.location.pathname),language:navigator.language||navigator.userLanguage,userAgent:navigator.userAgent,screenWidth:screen.width,screenHeight:screen.height,isLive:null!==(e=this.config.isLive)&&void 0!==e&&e,videoDuration:0,size:o.PlayerSize.Window,time:0,videoWindowWidth:0,videoWindowHeight:0,droppedFrames:0,played:0,buffered:0,paused:0,ad:0,seeked:0,videoPlaybackWidth:0,videoPlaybackHeight:0,videoBitrate:0,audioBitrate:0,videoTimeStart:0,videoTimeEnd:0,videoStartupTime:0,duration:0,startupTime:0,analyticsVersion:A.VERSION,pageLoadTime:0,completedTotal:0},this.getPlayerInformationFromAdapter())},e.prototype.sendAnalyticsRequest=function(e){if(this.setPlaybackInfoFromAdapter(),this.sample.time=h.getCurrentTimestamp(),this.sample.downloadSpeedInfo=this.adapter.downloadSpeedInfo,this.adapter.ssaiService.manipulate(this.sample),null!=e&&this.changeCustomData(e),(0,v.isNullish)(this.sample.videoBitrate)||this.sample.videoBitrate<=0){D(this.sample,this.adapter.getCurrentPlaybackInfo());var t=i({},this.sample);this.backend.sendRequest(t)}else{t=i({},this.sample);this.backend.sendRequest(t),D(this.sample,this.adapter.getCurrentPlaybackInfo())}},e.prototype.sendAnalyticsRequestAndClearValues=function(e){this.sendAnalyticsRequest(e),this.clearValues()},e.prototype.sendSsaiEngagementAdSample=function(e){var t;if(!0===(null===(t=this.config.config)||void 0===t?void 0:t.ssaiEngagementTrackingEnabled))if((0,C.isSsaiEngagementStartedData)(e)){var n=(0,_.createStartedAdSample)(this.sample,e);this.backend.sendAdRequest(n)}else if((0,C.isSsaiEngagementQuartileData)(e)){n=(0,_.createQuartileAdSample)(this.sample,e);this.backend.sendAdRequest(n)}else if((0,C.isSsaiEngagementErrorData)(e)){e.analyticsError=this.transformError(e.analyticsError,e.originalError);var i=(0,_.createErrorAdSample)(this.sample,e);this.backend.sendAdRequest(i)}else;},e.prototype.sendUnloadRequest=function(){this.backend.sendUnloadRequest(this.sample)},e.prototype.clearValues=function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.castTech=void 0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.drmLoadTime=void 0,this.sample.videoStartFailed=void 0,this.sample.videoStartFailedReason=void 0,this.sample.completed=void 0,this.sample.adId=void 0,this.sample.adSystem=void 0,this.sample.adPosition=void 0,this.sample.adIndex=void 0,this.sample[_.SSAI_RELATED_SAMPLE_MARKER]=void 0,this.sample.errorCode=void 0,this.sample.errorMessage=void 0,this.sample.errorSeverity=void 0,this.sample.errorData=void 0,this.sample.errorSegments=void 0,this.adapter.clearValues()},e.prototype.createBackend=function(e){var t=(0,c.getDomainFromAnalyticsConfig)(e);return this.backendFactory.createBackend(e,{key:e.key,domain:t,version:A.VERSION},this.adapter,this.authenticationCallback)},e.prototype.setCompletionValues=function(){if(this.adapter.videoCompletionTracker){var e=this.adapter.videoCompletionTracker.addWatched({start:this.sample.videoTimeStart,end:this.sample.videoTimeEnd}),t=this.adapter.videoCompletionTracker.getCompletionPercentage();Number.isNaN(e)||Number.isNaN(t)||(this.sample.completed=e,this.sample.completedTotal=t)}},e.prototype.setVideoTimeStart=function(e){this.sample.videoTimeStart=e},e.prototype.setVideoTimeEnd=function(e){this.sample.videoTimeEnd=e},e.prototype.sendQualityChange=function(e,t){this.adapter.qualityChangeService.startResetInterval(),this.adapter.qualityChangeService.increaseCounter(),this.adapter.qualityChangeService.isQualityChangeEventEnabled()?(D(this.sample,this.adapter.getCurrentPlaybackInfo()),this.setDuration(t),this.setState(e),this.sendAnalyticsRequestAndClearValues()):(this.setDuration(t),this.adapter.stateMachineCallbacks.error(i(i({},r.ErrorCode.QUALITY_CHANGE_THRESHOLD_EXCEEDED),{legacyData:void 0,currentTime:void 0,data:{}})))},e.prototype.transformError=function(e,t){var n,i,a={code:e.code,message:e.message,severity:e.severity};try{var r=null===(i=null===(n=this.config.config)||void 0===n?void 0:n.errorTransformerCallback)||void 0===i?void 0:i.transform(a,{originalError:t});a.code=(0,v.isNumber)(null==r?void 0:r.code)?null==r?void 0:r.code:a.code,a.message=(0,p.isValidString)(null==r?void 0:r.message)?null==r?void 0:r.message:a.message,a.severity=(0,p.isValidString)(null==r?void 0:r.severity)&&(0,v.isErrorSeverity)(null==r?void 0:r.severity)?r.severity:a.severity}catch(e){E.logger.error("Error in errorTransformerCallback",e)}return a},e.create=function(t,n){return new e(t,n,new S.BackendFactory,new N.SessionPersistenceHandler(t),new l.FeatureManager,new I.EventDispatcher,new g.IdenticalErrorReportingLimiter)},e.version=A.VERSION,e}();function D(e,t){h.isNumber(t.videoPlaybackHeight)&&(e.videoPlaybackHeight=t.videoPlaybackHeight),h.isNumber(t.videoPlaybackWidth)&&(e.videoPlaybackWidth=t.videoPlaybackWidth),h.isNumber(t.videoBitrate)&&(e.videoBitrate=t.videoBitrate),h.isNumber(t.audioBitrate)&&(e.audioBitrate=t.audioBitrate)}t.Analytics=P},4355:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CdnProvider=void 0,function(e){e.AKAMAI="akamai",e.BITGRAVITY="bitgravity",e.CHINACACHE="chinacache",e.CLOUDFLARE="cloudflare",e.CLOUDFRONT="cloudfront",e.FASTLY="fastly",e.MAXCDN="maxcdn"}(n||(t.CdnProvider=n={}))},4438:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpRequestType=void 0,function(e){e.MANIFEST_DASH="manifest/dash",e.MANIFEST_HLS_MASTER="manifest/hls/master",e.MANIFEST_HLS_VARIANT="manifest/hls/variant",e.MANIFEST_SMOOTH="manifest/smooth",e.MANIFEST_ADS="manifest/ads",e.MEDIA_AUDIO="media/audio",e.MEDIA_VIDEO="media/video",e.MEDIA_SUBTITLES="media/subtitles",e.MEDIA_THUMBNAILS="media/thumbnails",e.MEDIA_SEGMENTINDEX="media/segmentindex",e.DRM_LICENSE_WIDEVINE="drm/license/widevine",e.DRM_LICENSE_PLAYREADY="drm/license/playready",e.DRM_LICENSE_FAIRPLAY="drm/license/fairplay",e.DRM_LICENSE_PRIMETIME="drm/license/primetime",e.DRM_LICENSE_CLEARKEY="drm/license/clearkey",e.DRM_LICENSE_TVKEY="drm/license/tvkey",e.DRM_CERTIFICATE_FAIRPLAY="drm/certificate/fairplay",e.KEY_HLS_AES="key/hls/aes",e.TIME_SYNC="time/sync",e.WEBRTC_SDP_REQUEST="webrtc/sdp/request",e.WEBRTC_SDP_ANSWER="webrtc/sdp/answer",e.WEBRTC_SDP_OFFER="webrtc/sdp/offer",e.UNKNOWN="unknown",e.INTERNAL="internal"}(n||(t.HttpRequestType=n={}))},4439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdSample=void 0;var i=n(5063),a=function(){function e(t){if(this.clicked=0,this.closed=0,this.completed=0,this.midpoint=0,this.quartile1=0,this.quartile3=0,this.skipped=0,this.started=0,t){this.adClickthroughUrl=t.clickThroughUrl,this.adId=t.id,this.mediaUrl=t.mediaFileUrl;var n=i.getHostnameAndPathFromUrl(this.mediaUrl||"");this.mediaPath=n.path,this.mediaServer=n.hostname,this.isLinear=t.isLinear,this.adPlaybackHeight=t.height,this.adPlaybackWidth=t.width,t.data&&(this.videoBitrate=void 0===t.data.bitrate?void 0:1e3*t.data.bitrate,this.streamFormat=t.data.mimeType);var a=t.data;a&&(a.adSystem&&(this.adSystem=a.adSystem.name),a.advertiser&&(this.advertiserName=a.advertiser.name),this.apiFramework=a.apiFramework,a.creative&&(this.creativeAdId=a.creative.adId,this.creativeId=a.creative.id,a.creative.universalAdId&&(this.universalAdIdRegistry=a.creative.universalAdId.idRegistry,this.universalAdIdValue=a.creative.universalAdId.value)),this.adDescription=a.adDescription,this.minSuggestedDuration=i.calculateTimeWithUndefined(a.minSuggestedDuration),a.survey&&(this.surveyUrl=a.survey.uri),this.adTitle=a.adTitle,this.wrapperAdsCount=a.wrapperAdIds?a.wrapperAdIds.length:0)}var r=t;r&&(this.adSkipAfter=e.parseSkipAfter(r.skippableAfter),this.adSkippable=r.skippable||(void 0===this.adSkipAfter?void 0:this.adSkipAfter>=0),this.adDuration=i.calculateTime(r.duration))}return e.parseSkipAfter=function(e){if(void 0!==e)return-1===e?e:i.calculateTime(e)},e}();t.AdSample=a},4501:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LicensingResult=void 0,function(e){e.Denied="denied",e.Granted="granted",e.Skip="skip"}(n||(t.LicensingResult=n={}))},4649:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEQUENCE_NUMBER_LIMIT=t.ANALYTICS_MIN_SEEK_DIFFERENCE_THRESHOLD=t.ANALYTICS_REBUFFER_TIMEOUT=t.ANALYTICS_QUALITY_CHANGE_COUNT_RESET_INTERVAL=t.ANALYTICS_QUALITY_CHANGE_COUNT_THRESHOLD=t.ANALYTICS_VIDEOSTART_TIMEOUT=t.ANALYTICS_LICENSECALL_TIMEOUT=t.ANALYTICS_BACKEND_BASE_URL=t.MESSAGE_NAMESPACE=void 0,t.MESSAGE_NAMESPACE="urn:x-cast:com.bitmovin.analytics.cast",t.ANALYTICS_BACKEND_BASE_URL="https://analytics-ingress-global.bitmovin.com",t.ANALYTICS_LICENSECALL_TIMEOUT=6e4,t.ANALYTICS_VIDEOSTART_TIMEOUT=6e4,t.ANALYTICS_QUALITY_CHANGE_COUNT_THRESHOLD=50,t.ANALYTICS_QUALITY_CHANGE_COUNT_RESET_INTERVAL=36e5,t.ANALYTICS_REBUFFER_TIMEOUT=12e4,t.ANALYTICS_MIN_SEEK_DIFFERENCE_THRESHOLD=3,t.SEQUENCE_NUMBER_LIMIT=1e3},4654:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaPlayerEvent=void 0,t.ShakaPlayerEvent={UNLOADING:"unloading",ONSTATECHANGE:"onstatechange",STATECHANGED:"statechanged",BUFFERING:"buffering",ERROR:"error"}},4679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bitmovin8Adapter=void 0;var i=n(4350),a=n(6398),r=n(8331),o=n(1916),s=n(2108),l=n(4926),u=n(4067),c=n(6596),d=function(){function e(e,t){var n,l=this;if(this.ssai={adBreakStart:function(e){if((0,s.isDefined)(l.internalAdapter)){var t=(0,u.sanitizeBitmovin8AdapterSsaiAdBreakMetadataAdPosition)(e);if((0,a.hasValidSsaiAdBreakMetadataStructure)(t)){var n=(0,a.simplySanitizeSsaiAdBreakMetadata)(t);l.internalAdapter.ssaiService.adBreakStart(n)}}},adStart:function(e){if((0,s.isDefined)(l.analytics)&&(0,s.isDefined)(l.internalAdapter)&&(0,a.hasValidSsaiAdMetadataStructure)(e)){var t=(0,a.simplySanitizeSsaiAdMetadata)(e);l.internalAdapter.ssaiService.adStart(t),l.analytics.setConfigParameters(),l.analytics.setAutoDetectedDeviceInformation()}},adQuartileFinished:function(e,t){if((0,s.isDefined)(l.analytics)&&(0,s.isDefined)(l.internalAdapter)&&(0,a.hasValidSsaiAdQuartileStructure)(e)){var n=(0,a.sanitizeSsaiAdQuartileMetadata)(t);l.internalAdapter.ssaiService.adQuartileFinished(e,n)}},adBreakEnd:function(){(0,s.isDefined)(l.analytics)&&(0,s.isDefined)(l.internalAdapter)&&(l.internalAdapter.ssaiService.adBreakEnd(),l.analytics.setConfigParameters(),l.analytics.setAutoDetectedDeviceInformation())}},(0,s.hasPlayerAlreadyBeenAugmented)(e))o.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,s.markPlayerInstanceAsAugmented)(e);var d=e.getConfig(),E=(0,r.sanitizeAnalyticsConfig)(d.analytics);(0,r.guardAgainstDuplicatedUserId)(E),E.playerKey=null!==(n=E.playerKey)&&void 0!==n?n:d.key,this.internalAdapter=c.Bitmovin8InternalAdapter.create(e,t),this.analytics=i.Analytics.create(E,this.internalAdapter),e.analytics=this,this.wrapPlayerLoad(e,this.analytics)}}return e.prototype.wrapPlayerLoad=function(e,t){var n=e.load;e.load=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(i.length>0){var r=i[0].analytics;t.sourceChange(r)}return n.apply(e,i)}},Object.defineProperty(e.prototype,"version",{get:function(){return l.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,s.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,s.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,s.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,s.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=l.VERSION,e}();t.Bitmovin8Adapter=d},4778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HlsSpeedMeterAdapter=void 0;var i=n(5063),a=function(){function e(e,t){var n=this;this.meter=t,e.on(e.constructor.Events.FRAG_LOADED,(function(e,t){return n.handleFragmentLoadedEvent(t)}))}return e.prototype.getDownloadSpeedMeter=function(){return this.meter},e.prototype.handleFragmentLoadedEvent=function(e){if("main"===e.frag.type){var t=(0,i.isNotNullish)(e.networkDetails)?e.networkDetails.status:void 0;if(!(0,i.isNullish)(t)){var n=e.frag.stats,a=(n.loading.end-n.loading.start)/1e3,r=(n.loading.first-n.loading.start)/1e3,o={duration:a,size:n.total,timeToFirstByte:r,timestamp:new Date,httpStatus:t};this.meter.addMeasurement(o)}}},e}();t.HlsSpeedMeterAdapter=a},4820:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultStateMachineCallbacks=void 0,t.defaultStateMachineCallbacks={setup:function(){},startup:function(){},playing:function(){},heartbeat:function(){},qualitychange:function(){},qualitychange_pause:function(){},qualitychange_rebuffering:function(){},videoChange:function(){},audioChange:function(){},audiotrack_changing:function(){},pause:function(){},seeking:function(){},paused_seeking:function(){},end_play_seeking:function(){},rebuffering:function(){},error:function(){},end:function(){},unload:function(){},ad:function(){},mute:function(){},unMute:function(){},subtitle_changing:function(){},setVideoTimeEndFromEvent:function(){},setVideoTimeStartFromEvent:function(){},videoStartFailed:function(){},startCasting:function(){},casting:function(){},manualSourceChange:function(){},initialSourceChange:function(){},muting_ready:function(){},customdatachange:function(){},release:function(){}}},4916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceInfoFallbackService=void 0;var i=n(1820),a=n(5063),r=function(){function e(){}return e.prototype.reset=function(){this.streamFormat=void 0,this.audioCodec=void 0,this.videoCodec=void 0},e.prototype.setStreamFormat=function(e){this.streamFormat=e},e.prototype.applyStreamFormat=function(e){(0,i.isBlank)(this.streamFormat)||(e.streamFormat=this.streamFormat)},e.prototype.applyAndStoreCodecInfo=function(e,t){(0,a.isNotNullish)(null==t?void 0:t.audioCodec)&&(this.audioCodec=t.audioCodec),(0,a.isNotNullish)(null==t?void 0:t.videoCodec)&&(this.videoCodec=t.videoCodec),(0,i.isBlank)(this.audioCodec)||(e.audioCodec=this.audioCodec),(0,i.isBlank)(this.videoCodec)||(e.videoCodec=this.videoCodec)},e}();t.SourceInfoFallbackService=r},4926:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="v2.48.0"},4934:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteCookie=t.getCookie=t.setCookie=void 0;t.setCookie=function(e,t,n){var i=e+"="+t+"; path=/";(null==n?void 0:n.domain)&&(i+="; domain=".concat(n.domain)),(null==n?void 0:n.expires)&&(i+="; expires=".concat(n.expires)),(null==n?void 0:n.maxAge)&&(i+="; max-age=".concat(n.maxAge)),document.cookie=i};t.getCookie=function(e){for(var t=e+"=",n=0,i=document.cookie.split(";");n<i.length;n++){for(var a=i[n],r=a;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,a.length)}return""};t.deleteCookie=function(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")}},5063:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinUrls=t.getURLResourceName=t.calculatePercentage=t.getHostnameAndPathFromUrl=t.getHiddenProp=t.isVideoInFullscreen=t.getDocumentPropWithPrefix=t.transferCustomDataFields=t.getCustomDataString=t.noOp=t.getCurrentTimestamp=t.calculateTimeWithUndefined=t.calculateTime=t.sanitizePath=t.isFunction=t.isPlainObject=t.isObject=t.isNumber=t.toBoolean=t.isBoolean=t.isNotNullish=t.isNullish=void 0,t.isErrorSeverity=function(e){return"CRITICAL"===e||"INFO"===e},t.getPageLoadType=function(){var e=(0,t.getHiddenProp)();if((0,t.isNotNullish)(e)&&!0===document[e])return i.PAGE_LOAD_TYPE.BACKGROUND;return i.PAGE_LOAD_TYPE.FOREGROUND};var i=n(9946),a=n(5529),r=n(1820);t.isNullish=function(e){return null==e};t.isNotNullish=function(e){return!(0,t.isNullish)(e)};t.isBoolean=function(e){return!(0,t.isNullish)(e)&&"boolean"==typeof e};t.toBoolean=function(e){return Boolean(e).valueOf()};t.isNumber=function(e){return!(0,t.isNullish)(e)&&"number"==typeof e};t.isObject=function(e){return(0,t.isNotNullish)(e)&&"object"==typeof e};t.isPlainObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)};t.isFunction=function(e){return"function"==typeof e};t.sanitizePath=function(e){return e.replace(/\/$/g,"")};t.calculateTime=function(e){return Math.round(1e3*e)};t.calculateTimeWithUndefined=function(e){if(!(0,t.isNullish)(e))return(0,t.calculateTime)(e)};t.getCurrentTimestamp=function(){return Date.now()};t.noOp=function(){};t.getCustomDataString=function(e){return"object"==typeof e?JSON.stringify(e):(0,t.isFunction)(e)?(0,t.getCustomDataString)(e()):void 0===e?e:"string"!=typeof e?String(e):e};t.transferCustomDataFields=function(e,n){for(var i=1;i<=a.customDataFieldCount;i++){var r="customData".concat(i);n[r]=(0,t.getCustomDataString)(e[r])}};t.getDocumentPropWithPrefix=function(e){if(e in document)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0,i=["webkit","moz","ms","o"];n<i.length;n++){var a=i[n];if(a+t in document)return a+t}};t.isVideoInFullscreen=function(){var e=(0,t.getDocumentPropWithPrefix)("fullscreenElement");return void 0!==e&&document[e]&&"VIDEO"===document[e].nodeName};t.getHiddenProp=function(){return(0,t.getDocumentPropWithPrefix)("hidden")};t.getHostnameAndPathFromUrl=function(e){var t=document.createElement("a");return t.href=e,{hostname:t.hostname,path:t.pathname}};t.calculatePercentage=function(e,t){if(void 0!==t&&0!==t)return Math.round((e||0)/t*100)};t.getURLResourceName=function(e){return 0===e.length?"":e.split("/").pop()||""};t.joinUrls=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return((0,r.endsWith)(e,"/")&&void 0!==t?e.substr(0,e.length-1):e)+"/"+((0,r.startsWith)(t,"/")?t.substr(1):t)}))}},5127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CAFv3Adapter=void 0;var i=n(4350),a=n(8331),r=n(1916),o=n(2108),s=n(4926),l=n(3236),u=function(){function e(e,t,n){if((0,o.hasPlayerAlreadyBeenAugmented)(t))r.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this CastReceiverContext instance");else{(0,o.markPlayerInstanceAsAugmented)(t);var s=(0,a.sanitizeAnalyticsConfig)(e);(0,a.guardAgainstDuplicatedUserId)(s),this.internalAdapter=new l.CAFv3InternalAdapter(t,n),this.analytics=i.Analytics.create(s,this.internalAdapter)}}return Object.defineProperty(e.prototype,"version",{get:function(){return s.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,o.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=s.VERSION,e}();t.CAFv3Adapter=u},5182:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.VideojsAnalyticsStateMachine=void 0;var o,s=n(2595),l=n(2361),u=n(3565),c=n(1916),d=n(5063),E=n(7596),p=n(8253);!function(e){e.AD="AD",e.AUDIOTRACK_CHANGED_PLAYING="AUDIOTRACK_CHANGED_PLAYING",e.AUDIOTRACK_CHANGING="AUDIOTRACK_CHANGING",e.CASTING="CASTING",e.CUSTOMDATACHANGE="CUSTOMDATACHANGE",e.END="END",e.END_PLAY_SEEKING="END_PLAY_SEEKING",e.ERROR="ERROR",e.MUTING_PAUSE="MUTING_PAUSE",e.MUTING_PLAY="MUTING_PLAY",e.MUTING_READY="MUTING_READY",e.PAUSE="PAUSE",e.PAUSED_SEEKING="PAUSED_SEEKING",e.PLAY_SEEKING="PLAY_SEEKING",e.PLAYING="PLAYING",e.QUALITYCHANGE="QUALITYCHANGE",e.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",e.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",e.READY="READY",e.REBUFFERING="REBUFFERING",e.SETUP="SETUP",e.SOURCE_CHANGING="SOURCE_CHANGING",e.STARTUP="STARTUP",e.SUBTITLE_CHANGED_PLAYING="SUBTITLE_CHANGED_PLAYING",e.SUBTITLE_CHANGING="SUBTITLE_CHANGING",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(o||(o={}));var h=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.seekTimestamp=0,a.seekedTimestamp=0,a}return a(t,e),t.prototype.getAllStates=function(){return r(r([],Object.keys(o).map((function(e){return o[e]})),!0),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"],!1)},t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter((function(t){return t!==e}))},t.prototype.createStateMachine=function(e){var t,n=this;return s.create({initial:{state:o.SETUP,event:l.JSM_INITIAL_EVENT},error:p.customStateMachineErrorCallback,events:[{name:l.Event.SOURCE_LOADED,from:[o.SETUP,o.ERROR,o.SOURCE_CHANGING],to:o.READY},(0,p.on)(l.Event.TIMECHANGED).stayIn(o.SETUP),(0,p.on)(l.Event.SOURCE_LOADED).stayIn(o.READY),{name:l.Event.READY,from:[o.SETUP,o.ERROR],to:o.READY},{name:l.Event.PLAY,from:o.READY,to:o.STARTUP},{name:l.Event.ERROR,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.UNLOAD,from:o.STARTUP,to:o.VIDEOSTART_FAILED},{name:l.Event.VIDEOSTART_TIMEOUT,from:o.STARTUP,to:o.VIDEOSTART_FAILED},(0,p.on)(l.Event.START_BUFFERING).stayIn(o.STARTUP),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.STARTUP),(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.STARTUP),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.STARTUP),{name:l.Event.TIMECHANGED,from:o.STARTUP,to:o.PLAYING},(0,p.on)(l.Event.TIMECHANGED).stayIn(o.PLAYING),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.PLAYING),{name:l.Event.START_BUFFERING,from:o.PLAYING,to:o.REBUFFERING},(0,p.on)(l.Event.START_BUFFERING).stayIn(o.REBUFFERING),{name:l.Event.TIMECHANGED,from:o.REBUFFERING,to:o.PLAYING},(0,p.on)(l.Event.SEEK).stayIn(o.STARTUP),{name:l.Event.SEEK,from:o.PLAYING,to:o.PLAY_SEEKING},(0,p.on)(l.Event.TIMECHANGED).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.TIMECHANGED).stayIn(o.PAUSED_SEEKING),{name:l.Event.PAUSE,from:o.PLAYING,to:o.PAUSE},{name:l.Event.PAUSE,from:o.REBUFFERING,to:o.PAUSE},(0,p.on)(l.Event.TIMECHANGED).stayIn(o.PAUSE),{name:l.Event.PLAY,from:o.PAUSE,to:o.PLAYING},{name:l.Event.VIDEO_CHANGE,from:o.PLAYING,to:o.QUALITYCHANGE},{name:l.Event.AUDIO_CHANGE,from:o.PLAYING,to:o.QUALITYCHANGE},(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.QUALITYCHANGE),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.QUALITYCHANGE),{name:"FINISH_QUALITYCHANGE",from:o.QUALITYCHANGE,to:o.PLAYING},{name:l.Event.VIDEO_CHANGE,from:o.PAUSE,to:o.QUALITYCHANGE_PAUSE},{name:l.Event.AUDIO_CHANGE,from:o.PAUSE,to:o.QUALITYCHANGE_PAUSE},(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.QUALITYCHANGE_PAUSE),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.QUALITYCHANGE_PAUSE),{name:"FINISH_QUALITYCHANGE_PAUSE",from:o.QUALITYCHANGE_PAUSE,to:o.PAUSE},{name:l.Event.SEEK,from:o.PAUSE,to:o.PAUSED_SEEKING},(0,p.on)(l.Event.SEEK).stayIn(o.PAUSED_SEEKING),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.PAUSED_SEEKING),(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.PAUSED_SEEKING),(0,p.on)(l.Event.START_BUFFERING).stayIn(o.PAUSED_SEEKING),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.PAUSED_SEEKING),{name:l.Event.SEEKED,from:o.PAUSED_SEEKING,to:o.PAUSE},{name:l.Event.PLAY,from:o.PAUSED_SEEKING,to:o.PLAYING},{name:l.Event.PAUSE,from:o.PAUSED_SEEKING,to:o.PAUSE},{name:"PLAY_SEEK",from:o.PAUSE,to:o.PLAY_SEEKING},{name:"PLAY_SEEK",from:o.PAUSED_SEEKING,to:o.PLAY_SEEKING},(0,p.on)("PLAY_SEEK").stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.SEEK).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.START_BUFFERING).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.PLAY_SEEKING),(0,p.on)(l.Event.SEEKED).stayIn(o.PLAY_SEEKING),{name:l.Event.SEEKED,from:o.PLAY_SEEKING,to:o.END_PLAY_SEEKING},(0,p.on)(l.Event.START_BUFFERING).stayIn(o.END_PLAY_SEEKING),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.END_PLAY_SEEKING),(0,p.on)(l.Event.SEEKED).stayIn(o.END_PLAY_SEEKING),{name:l.Event.TIMECHANGED,from:o.END_PLAY_SEEKING,to:o.PLAYING},{name:l.Event.END,from:o.PLAY_SEEKING,to:o.END},{name:l.Event.END,from:o.PAUSED_SEEKING,to:o.END},{name:l.Event.END,from:o.PLAYING,to:o.END},{name:l.Event.END,from:o.PAUSE,to:o.END},(0,p.on)(l.Event.SEEK).stayIn(o.END),(0,p.on)(l.Event.SEEKED).stayIn(o.END),(0,p.on)(l.Event.TIMECHANGED).stayIn(o.END),(0,p.on)(l.Event.END_BUFFERING).stayIn(o.END),(0,p.on)(l.Event.START_BUFFERING).stayIn(o.END),(0,p.on)(l.Event.END).stayIn(o.END),(0,p.on)(l.Event.SEEKED).stayIn(o.PLAYING),{name:l.Event.PLAY,from:o.END,to:o.PLAYING},{name:l.Event.ERROR,from:this.getAllStatesBut(o.STARTUP),to:o.ERROR},{name:l.Event.PAUSE,from:o.ERROR,to:o.ERROR},{name:l.Event.SEEK,from:o.END_PLAY_SEEKING,to:o.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:o.END_PLAY_SEEKING,to:o.PLAYING},{name:l.Event.UNLOAD,from:this.getAllStatesBut(o.STARTUP),to:o.END},{name:l.Event.START_AD,from:o.PLAYING,to:o.AD},{name:l.Event.END_AD,from:o.AD,to:o.PLAYING},(0,p.on)(l.Event.MUTE).stayIn(o.SETUP),{name:l.Event.MUTE,from:o.READY,to:o.MUTING_READY},{name:l.Event.UN_MUTE,from:o.READY,to:o.MUTING_READY},{name:"FINISH_MUTING",from:o.MUTING_READY,to:o.READY},{name:l.Event.MUTE,from:o.PLAYING,to:o.MUTING_PLAY},{name:l.Event.UN_MUTE,from:o.PLAYING,to:o.MUTING_PLAY},{name:"FINISH_MUTING",from:o.MUTING_PLAY,to:o.PLAYING},{name:l.Event.MUTE,from:o.PAUSE,to:o.MUTING_PAUSE},{name:l.Event.UN_MUTE,from:o.PAUSE,to:o.MUTING_PAUSE},{name:"FINISH_MUTING",from:o.MUTING_PAUSE,to:o.PAUSE},{name:l.Event.START_CAST,from:[o.READY,o.PAUSE],to:o.CASTING},(0,p.on)(l.Event.PAUSE).stayIn(o.CASTING),(0,p.on)(l.Event.PLAY).stayIn(o.CASTING),(0,p.on)(l.Event.TIMECHANGED).stayIn(o.CASTING),(0,p.on)(l.Event.MUTE).stayIn(o.CASTING),(0,p.on)(l.Event.SEEK).stayIn(o.CASTING),(0,p.on)(l.Event.SEEKED).stayIn(o.CASTING),{name:l.Event.END_CAST,from:o.CASTING,to:o.READY},(0,p.on)(l.Event.SEEK).stayIn(o.READY),(0,p.on)(l.Event.SEEKED).stayIn(o.READY),{name:l.Event.SEEKED,from:o.STARTUP,to:o.STARTUP},{name:l.Event.AUDIOTRACK_CHANGED,from:o.PLAYING,to:o.AUDIOTRACK_CHANGED_PLAYING},{name:"FINISH_AUDIOTRACK_CHANGING",from:o.AUDIOTRACK_CHANGED_PLAYING,to:o.PLAYING},(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.PAUSE),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.READY),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.REBUFFERING),(0,p.on)(l.Event.AUDIOTRACK_CHANGED).stayIn(o.END_PLAY_SEEKING),{name:l.Event.AUDIOTRACK_CHANGED,from:o.AUDIOTRACK_CHANGING,to:o.AUDIOTRACK_CHANGING},{name:l.Event.SUBTITLE_CHANGE,from:o.PLAYING,to:o.SUBTITLE_CHANGED_PLAYING},{name:"FINISH_SUBTITLE_CHANGING",from:o.SUBTITLE_CHANGED_PLAYING,to:o.PLAYING},(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.PAUSE),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.READY),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.REBUFFERING),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.END_PLAY_SEEKING),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.SOURCE_CHANGING),(0,p.on)(l.Event.SUBTITLE_CHANGE).stayIn(o.SUBTITLE_CHANGING),{name:l.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut(o.READY),to:o.SOURCE_CHANGING},(0,p.on)(l.Event.MANUAL_SOURCE_CHANGE).stayIn(o.READY),(0,p.on)(l.Event.MANUAL_SOURCE_CHANGE).stayIn(o.SETUP),(0,p.on)(l.Event.TIMECHANGED).stayIn(o.SOURCE_CHANGING),{name:l.Event.PLAY,from:o.SOURCE_CHANGING,to:o.STARTUP},(0,p.on)(l.Event.SOURCE_LOADED).stayIn(o.STARTUP),{name:l.Event.VIDEO_CHANGE,from:o.REBUFFERING,to:o.QUALITYCHANGE_REBUFFERING},{name:l.Event.AUDIO_CHANGE,from:o.REBUFFERING,to:o.QUALITYCHANGE_REBUFFERING},(0,p.on)(l.Event.VIDEO_CHANGE).stayIn(o.QUALITYCHANGE_REBUFFERING),(0,p.on)(l.Event.AUDIO_CHANGE).stayIn(o.QUALITYCHANGE_REBUFFERING),{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:o.QUALITYCHANGE_REBUFFERING,to:o.REBUFFERING},{name:l.Event.CUSTOM_DATA_CHANGE,from:[o.PLAYING,o.PAUSE],to:o.CUSTOMDATACHANGE},{name:l.Event.PLAYING,from:o.CUSTOMDATACHANGE,to:o.PLAYING},{name:l.Event.PAUSE,from:o.CUSTOMDATACHANGE,to:o.PAUSE}],callbacks:(t={},t["onleave".concat(o.PLAYING)]=function(){n.playingHeartbeatService.stopHeartbeat()},t.onleavestate=function(e,t,i,a,r){if((0,p.logStateMachineTransition)("LEAVE",e,t,i),e!==l.JSM_INITIAL_EVENT&&(t===o.REBUFFERING&&n.resetRebufferingHelpers(),a)){var s=a-n.onEnterStateTimestamp;if(r&&i!==o.PAUSED_SEEKING&&i!==o.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(r),"PLAY_SEEK"===e&&t===o.PAUSE)return!0;t===o.READY&&i===o.STARTUP?n.setVideoStartTimeout():t!==o.STARTUP||i!==o.PLAYING&&i!==o.VIDEOSTART_FAILED||n.clearVideoStartTimeout();var E=String(t).toLowerCase();if(i===o.VIDEOSTART_FAILED)n.clearVideoStartTimeout(),n.stateMachineCallbacks.videoStartFailed(s,(0,u.createVideoStartFailedReason)(e));else if(t===o.PAUSED_SEEKING){var h=a-n.seekTimestamp;n.stateMachineCallbacks.paused_seeking(h,E)}else if(t===o.END_PLAY_SEEKING){h=n.seekedTimestamp-n.seekTimestamp;n.stateMachineCallbacks.end_play_seeking(h,E)}else if(e===l.Event.UNLOAD)n.stateMachineCallbacks.unload(s,E);else if(t===o.PAUSE&&i!==o.PAUSED_SEEKING)n.stateMachineCallbacks.pause(s,E);else{var v=n.stateMachineCallbacks[E];if((0,d.isFunction)(v))try{v(s,E,r)}catch(e){c.logger.error("Exception occurred in State Machine callback "+E,r,e)}else(0,p.logMissingCallbackWarning)(t,[o.READY,o.SOURCE_CHANGING,o.MUTING_PAUSE,o.MUTING_PLAY,o.AUDIOTRACK_CHANGED_PLAYING,o.SUBTITLE_CHANGED_PLAYING])}r&&i!==o.PAUSED_SEEKING&&i!==o.PLAY_SEEKING&&i!==o.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(r),e===l.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(r):e===l.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(r):e===l.Event.MUTE?n.stateMachineCallbacks.mute():e===l.Event.UN_MUTE?n.stateMachineCallbacks.unMute():e===l.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(r)}},t["onenter".concat(o.PLAYING)]=function(){n.playingHeartbeatService.startHeartbeat()},t.onenterstate=function(t,i,a,r,s){(0,p.logStateMachineTransition)("ENTER",t,i,a),n.onEnterStateTimestamp=null!=r?r:Date.now(),(0,d.isNumber)(e.starttime)&&t===l.JSM_INITIAL_EVENT&&(n.onEnterStateTimestamp=e.starttime),s&&a!==o.PAUSED_SEEKING&&a!==o.PLAY_SEEKING&&a!==o.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(s),t===l.Event.SEEK&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(s),t===l.Event.SEEKED&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(s),"PLAY_SEEK"===t&&a===o.PLAY_SEEKING&&a!==o.PLAY_SEEKING&&a!==o.END_PLAY_SEEKING&&(n.seekTimestamp=n.onEnterStateTimestamp),t===l.Event.START_CAST&&a===o.CASTING&&n.stateMachineCallbacks.startCasting(r,s),a===o.REBUFFERING&&n.startRebufferingHeartbeatInterval()},t["onafter".concat(l.Event.ERROR)]=function(e,t,i,a,r){n.stateMachineCallbacks.error(r)},t["onafter".concat(l.Event.SEEK)]=function(e,t,i,a,r){n.seekTimestamp=a},t["onafter".concat(l.Event.SEEKED)]=function(e,t,i,a,r){n.seekedTimestamp=a},t.onafterevent=function(e,t,i,a,r){i===o.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(a),i!==o.MUTING_READY&&i!==o.MUTING_PLAY&&i!==o.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(a),i===o.AUDIOTRACK_CHANGED_PLAYING&&n.stateMachine.FINISH_AUDIOTRACK_CHANGING(a),i===o.SUBTITLE_CHANGED_PLAYING&&n.stateMachine.FINISH_SUBTITLE_CHANGING(a)},t)})},t.prototype.onSsaiPlaybackInteraction=function(e,t){},t}(E.AnalyticsStateMachine);t.VideojsAnalyticsStateMachine=h},5241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeSessionMetadataAudioLanguage=function(e){if((0,i.isNullish)(e))return;return String(e).substring(0,50)},t.sanitizeSessionMetadataSubtitleEnabled=function(e){if((0,i.isNullish)(e))return;return(0,i.toBoolean)(e)},t.sanitizeSessionMetadataSubtitleLanguage=function(e){if((0,i.isNullish)(e))return;return String(e).substring(0,100)};var i=n(5063)},5248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceInfoFromBitmovinSourceConfig=void 0;var i=n(5063);t.getSourceInfoFromBitmovinSourceConfig=function(e,t){if(!e)return{progBitrate:void 0,progUrl:void 0};if("string"==typeof e)return{progBitrate:0,progUrl:e};if(Array.isArray(e)&&e.length>0){var n=t.getPlaybackVideoData(),a=0;return(0,i.isNotNullish)(n)&&!isNaN(+n.id)&&(a=+n.id),{progBitrate:e[a].bitrate||0,progUrl:e[a].url}}return"object"!=typeof e||Array.isArray(e)?{progBitrate:void 0,progUrl:void 0}:{progBitrate:e.bitrate||0,progUrl:e.url}}},5253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LicenseCall=function(e,t,n,r){var o=(0,a.joinUrls)(r,"/licensing"),s={analyticsVersion:n,domain:t,key:e};return new Promise((function(e){(0,i.post)(o,s,(function(t){e(t)}))}))};var i=n(92),a=n(5063)},5406:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BitmovinPwxAnalyticsStateMachine=t.State=void 0;var r,o=n(2595),s=n(7596),l=n(8253),u=n(2361),c=n(1652),d=n(1916),E=n(5063);!function(e){e.END="END",e.ERROR="ERROR",e.PAUSE="PAUSE",e.PLAYING="PLAYING",e.READY="READY",e.SETUP="SETUP",e.SOURCE_LOADED="SOURCE_LOADED",e.STARTUP="STARTUP",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(r||(t.State=r={}));var p=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.enabledDebugging=!1,a.debuggingStates=[],a}return a(t,e),t.prototype.getAllStatesBut=function(e){return this.getAllStates().filter((function(t){return e.indexOf(t)<0}))},t.prototype.getAllStates=function(){return Object.keys(r).map((function(e){return r[e]}))},t.prototype.onSsaiPlaybackInteraction=function(e,t){},t.prototype.createStateMachine=function(e){var t,n=this;return o.StateMachine.create({initial:{state:r.SETUP,event:u.JSM_INITIAL_EVENT},error:l.customStateMachineErrorCallback,events:[{name:u.Event.SOURCE_LOADED,from:[r.SETUP,r.ERROR],to:r.READY},(0,l.on)(u.Event.READY).stayIn(r.READY),(0,l.on)(u.Event.PAUSE).stayIn(r.READY),(0,l.on)(u.Event.TIMECHANGED).stayIn(r.READY),{name:u.Event.PLAY,from:r.READY,to:r.STARTUP},{name:u.Event.PLAYING,from:r.READY,to:r.PLAYING},(0,l.on)(u.Event.PLAY).stayIn(r.STARTUP),(0,l.on)(u.Event.PLAYING).stayIn(r.STARTUP),{name:u.Event.TIMECHANGED,from:r.STARTUP,to:r.PLAYING},(0,l.on)(u.Event.READY).stayIn(r.STARTUP),{name:u.Event.PAUSE,from:r.STARTUP,to:r.READY},(0,l.on)(u.Event.PLAYING).stayIn(r.PLAYING),(0,l.on)(u.Event.TIMECHANGED).stayIn(r.PLAYING),{name:u.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},(0,l.on)(u.Event.TIMECHANGED).stayIn(r.PAUSE),(0,l.on)(u.Event.PAUSE).stayIn(r.PAUSE),{name:u.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:u.Event.PLAYING,from:r.PAUSE,to:r.PLAYING},{name:u.Event.END,from:r.PLAYING,to:r.END},{name:u.Event.END,from:r.PAUSE,to:r.END},{name:u.Event.PLAYING,from:r.END,to:r.STARTUP},(0,l.on)(u.Event.TIMECHANGED).stayIn(r.END),(0,l.on)(u.Event.END).stayIn(r.END),{name:u.Event.PLAY,from:r.END,to:r.STARTUP},{name:u.Event.ERROR,from:r.STARTUP,to:r.VIDEOSTART_FAILED},{name:u.Event.ERROR,from:this.getAllStatesBut([r.STARTUP]),to:r.ERROR},{name:u.Event.UNLOAD,from:this.getAllStatesBut([r.STARTUP]),to:r.END},{name:u.Event.UNLOAD,from:[r.STARTUP],to:r.VIDEOSTART_FAILED}],callbacks:(t={},t["onleave".concat(r.PLAYING)]=function(){n.playingHeartbeatService.stopHeartbeat()},t.onleavestate=function(e,t,i,a,o){if((0,l.logStateMachineTransition)("LEAVE",e,t,i),e!==u.JSM_INITIAL_EVENT&&a){n.addStatesToLog(e,t,i,a,o);var s=a-n.onEnterStateTimestamp,c=t===r.STARTUP&&i===r.PLAYING;n.maybeSetOrClearVideoStartTimeouts(t,i),c&&n.stateMachineCallbacks.startup(s,r.STARTUP.toLowerCase());var p=String(t).toLowerCase();if(e===u.Event.UNLOAD)n.stateMachineCallbacks.unload(s,p);else if(t===r.SETUP)n.stateMachineCallbacks.setup(1,r.SETUP.toLowerCase());else if(e===u.Event.PAUSE&&t===r.STARTUP&&i===r.READY)n.clearVideoStartTimeout();else if(t!==r.ERROR&&!c){var h=n.stateMachineCallbacks[p];if((0,E.isFunction)(h))try{h(s,p,o)}catch(e){d.logger.error("Exception occurred in State Machine callback "+p,o,e)}else(0,l.logMissingCallbackWarning)(t,[r.READY])}}},t["onenter".concat(r.PLAYING)]=function(){n.playingHeartbeatService.startHeartbeat()},t.onenterstate=function(t,i,a,r,o){(0,l.logStateMachineTransition)("ENTER",t,i,a),n.onEnterStateTimestamp=null!=r?r:Date.now(),(0,E.isNumber)(e.starttime)&&t===u.JSM_INITIAL_EVENT&&(n.onEnterStateTimestamp=e.starttime)},t["onafter".concat(u.Event.ERROR)]=function(e,t,i,a,r){n.stateMachineCallbacks.error(r)},t)})},t.prototype.sourceChange=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.addStatesToLog=function(e,t,n,i,a){this.enabledDebugging&&this.debuggingStates.push(new c.EventDebugging(e,t,n,i,a))},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(e){this.enabledDebugging=e},t.prototype.maybeSetOrClearVideoStartTimeouts=function(e,t){e===r.READY&&t===r.STARTUP?this.setVideoStartTimeout():e===r.STARTUP&&t===r.PLAYING&&this.clearVideoStartTimeout()},t}(s.AnalyticsStateMachine);t.BitmovinPwxAnalyticsStateMachine=p},5426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsCall=void 0;var i=n(7906),a=n(92),r=n(5063),o=function(){function e(e){this.analyticsServerUrl=(0,r.joinUrls)(e,"analytics"),this.adAnalyticsServerUrl=(0,r.joinUrls)(e,"analytics/a")}return e.prototype.sendRequest=function(e,t){var n=this.analyticsServerUrl;(0,i.isSsaiRelatedSample)(e)&&(n=(0,i.appendSsaiRoutingParam)(n)),(0,a.post)(n,e,t)},e.prototype.sendUnloadRequest=function(e){var t=this,n=this.analyticsServerUrl;(0,i.isSsaiRelatedSample)(e)&&(n=(0,i.appendSsaiRoutingParam)(n)),this.trySendBeacon((function(e){return t.sendRequestSynchronous(e,r.noOp)}),n,e)},e.prototype.trySendBeacon=function(e,t,n,i){if(void 0===i&&(i={}),void 0===navigator.sendBeacon)e(n);else{var a=new Blob([JSON.stringify(n)],i);navigator.sendBeacon(t,a)||e(n)}},e.prototype.sendRequestSynchronous=function(e,t){var n=this.analyticsServerUrl;(0,i.isSsaiRelatedSample)(e)&&(n=(0,i.appendSsaiRoutingParam)(n)),(0,a.post)(n,e,t,!1)},e.prototype.sendAdRequest=function(e){var t=this.adAnalyticsServerUrl;(0,i.isSsaiRelatedSample)(e)&&(t=(0,i.appendSsaiRoutingParam)(t));this.trySendBeacon((function(e){return(0,a.post)(t,e,r.noOp)}),t,e)},e}();t.AnalyticsCall=o},5440:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSPlayerContext=void 0;var n=function(){function e(e){this.player=e}return Object.defineProperty(e.prototype,"position",{get:function(){return this.player.getPosition()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLive",{get:function(){return this.player.getDuration()===1/0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentQuality",{get:function(){return this.player.getQuality()},enumerable:!1,configurable:!0}),e}();t.AmazonIVSPlayerContext=n},5517:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdCallbacks=void 0;var n=function(){this.onAdStarted=function(e){},this.onAdFinished=function(e){},this.onAdBreakStarted=function(e){},this.onAdBreakFinished=function(e){},this.onAdClicked=function(e){},this.onAdError=function(e){},this.onAdManifestLoaded=function(e){},this.onAdQuartile=function(e){},this.onAdSkipped=function(e){},this.onPlay=function(e){},this.onPause=function(e){},this.onBeforeUnload=function(){}};t.AdCallbacks=n},5529:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractCustomDataFieldsOnly=t.customDataFieldCount=t.customDataValuesKeys=void 0,t.customDataValuesKeys=["customData1","customData2","customData3","customData4","customData5","customData6","customData7","customData8","customData9","customData10","customData11","customData12","customData13","customData14","customData15","customData16","customData17","customData18","customData19","customData20","customData21","customData22","customData23","customData24","customData25","customData26","customData27","customData28","customData29","customData30","customData31","customData32","customData33","customData34","customData35","customData36","customData37","customData38","customData39","customData40","customData41","customData42","customData43","customData44","customData45","customData46","customData47","customData48","customData49","customData50","experimentName"],t.customDataFieldCount=t.customDataValuesKeys.filter((function(e){return e.match("customData\\d+")})).length;t.extractCustomDataFieldsOnly=function(e){var n={};return t.customDataValuesKeys.forEach((function(t){e[t]&&(n[t]=e[t])})),n}},5611:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSStateMachine=void 0;var r,o=n(2595),s=n(2361),l=n(3565),u=n(5063),c=n(7596),d=n(8253);!function(e){e.ERROR="ERROR",e.PAUSE="PAUSE",e.PLAYING="PLAYING",e.QUALITY_CHANGE="QUALITY_CHANGE",e.READY="READY",e.REBUFFERING="REBUFFERING",e.SEEKING="SEEKING",e.SETUP="SETUP",e.STARTUP="STARTUP",e.UNLOADED="UNLOADED",e.VIDEOSTART_FAILED="VIDEOSTART_FAILED"}(r||(r={}));var E=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.getStateHandler=function(){var e;return(e={})[r.SETUP]={onenterstate:function(){},onleavestate:function(e){a.stateMachineCallbacks.setup(e,r.SETUP.toLowerCase())}},e[r.READY]={onenterstate:function(){},onleavestate:function(){}},e[r.STARTUP]={onenterstate:function(){a.setVideoStartTimeout()},onleavestate:function(e,t,n){a.clearVideoStartTimeout(),t==r.PLAYING&&a.stateMachineCallbacks.startup(e,r.STARTUP.toLowerCase()),t==r.VIDEOSTART_FAILED&&a.stateMachineCallbacks.videoStartFailed(e,(0,l.createVideoStartFailedReason)(n))}},e[r.PLAYING]={onenterstate:function(){a.playingHeartbeatService.startHeartbeat()},onleavestate:function(e){a.playingHeartbeatService.stopHeartbeat(),a.stateMachineCallbacks.playing(e,r.PLAYING.toLowerCase())}},e[r.PAUSE]={onenterstate:function(){},onleavestate:function(e){a.stateMachineCallbacks.pause(e,r.PAUSE.toLowerCase())}},e[r.REBUFFERING]={onenterstate:function(){a.startRebufferingHeartbeatInterval()},onleavestate:function(e){a.resetRebufferingHelpers(),a.stateMachineCallbacks.rebuffering(e,r.REBUFFERING.toLowerCase())}},e[r.VIDEOSTART_FAILED]={onenterstate:function(e,t){e===s.Event.ERROR&&a.stateMachineCallbacks.error(t)},onleavestate:function(){}},e[r.ERROR]={onenterstate:function(e,t){a.stateMachineCallbacks.error(t)},onleavestate:function(){}},e[r.UNLOADED]={onenterstate:function(){a.stateMachineCallbacks.unload(0,r.UNLOADED)},onleavestate:function(){}},e[r.QUALITY_CHANGE]={onenterstate:function(e,t){a.stateMachine.FINISH_QUALITYCHANGE(a.onEnterStateTimestamp,t)},onleavestate:function(){a.stateMachineCallbacks.qualitychange(0,r.QUALITY_CHANGE.toLowerCase())}},e[r.SEEKING]={onenterstate:function(){},onleavestate:function(e){a.stateMachineCallbacks.end_play_seeking(e,r.SEEKING.toLowerCase())}},e},a}return a(t,e),t.prototype.createStateMachine=function(e){var t=this;return o.StateMachine.create({initial:{state:r.SETUP,event:s.JSM_INITIAL_EVENT},error:d.customStateMachineErrorCallback,events:[{name:s.Event.READY,from:r.SETUP,to:r.READY},{name:s.Event.PLAY,from:r.READY,to:r.STARTUP},{name:s.Event.PLAYING,from:r.STARTUP,to:r.PLAYING},{name:s.Event.PAUSE,from:r.PLAYING,to:r.PAUSE},{name:s.Event.PLAYING,from:r.PAUSE,to:r.PLAYING},{name:s.Event.PLAY,from:r.PAUSE,to:r.PLAYING},{name:s.Event.UNLOAD,from:r.PLAYING,to:r.UNLOADED},{name:s.Event.PLAYING,from:r.ERROR,to:r.PLAYING},{name:s.Event.VIDEO_CHANGE,from:r.PLAYING,to:r.QUALITY_CHANGE},{name:"FINISH_QUALITYCHANGE",from:r.QUALITY_CHANGE,to:r.PLAYING},{name:s.Event.SEEK,from:r.PLAYING,to:r.SEEKING},{name:s.Event.SEEKED,from:r.SEEKING,to:r.PLAYING},{name:s.Event.PAUSE,from:r.SEEKING,to:r.PAUSE},{name:s.Event.START_BUFFERING,from:r.PLAYING,to:r.REBUFFERING},{name:s.Event.PLAYING,from:r.REBUFFERING,to:r.PLAYING},{name:s.Event.ERROR,from:r.STARTUP,to:r.VIDEOSTART_FAILED},{name:s.Event.UNLOAD,from:r.STARTUP,to:r.VIDEOSTART_FAILED},{name:s.Event.VIDEOSTART_TIMEOUT,from:r.STARTUP,to:r.VIDEOSTART_FAILED},{name:s.Event.ERROR,from:p([r.STARTUP,r.VIDEOSTART_FAILED]),to:r.ERROR},(0,d.on)(s.Event.PAUSE).stayIn(r.PAUSE),(0,d.on)(s.Event.PAUSE).stayIn(r.STARTUP),(0,d.on)(s.Event.PAUSE).stayIn(r.REBUFFERING),(0,d.on)(s.Event.PLAY).stayIn(r.PLAYING),(0,d.on)(s.Event.PLAYING).stayIn(r.PLAYING),(0,d.on)(s.Event.START_BUFFERING).stayIn(r.PAUSE),(0,d.on)(s.Event.START_BUFFERING).stayIn(r.REBUFFERING),(0,d.on)(s.Event.VIDEOSTART_TIMEOUT).stayIn(r.PLAYING),(0,d.on)(s.Event.VIDEOSTART_TIMEOUT).stayIn(r.PAUSE),(0,d.on)(s.Event.VIDEOSTART_TIMEOUT).stayIn(r.SEEKING),(0,d.on)(s.Event.UNLOAD).stayIn(r.READY),(0,d.on)(s.Event.UNLOAD).stayIn(r.SEEKING),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.QUALITY_CHANGE),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.STARTUP),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.REBUFFERING),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.PAUSE),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.ERROR),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.VIDEOSTART_FAILED),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.READY),(0,d.on)(s.Event.VIDEO_CHANGE).stayIn(r.SEEKING),(0,d.on)(s.Event.SEEK).stayIn(r.SEEKING),(0,d.on)(s.Event.SEEK).stayIn(r.PAUSE),(0,d.on)(s.Event.SEEK).stayIn(r.QUALITY_CHANGE),(0,d.on)(s.Event.SEEK).stayIn(r.REBUFFERING),(0,d.on)(s.Event.SEEK).stayIn(r.ERROR),(0,d.on)(s.Event.SEEK).stayIn(r.STARTUP),(0,d.on)(s.Event.SEEK).stayIn(r.READY),(0,d.on)(s.Event.SEEK).stayIn(r.VIDEOSTART_FAILED),(0,d.on)(s.Event.SEEKED).stayIn(r.PAUSE),(0,d.on)(s.Event.SEEKED).stayIn(r.QUALITY_CHANGE),(0,d.on)(s.Event.SEEKED).stayIn(r.REBUFFERING),(0,d.on)(s.Event.SEEKED).stayIn(r.ERROR),(0,d.on)(s.Event.SEEKED).stayIn(r.STARTUP),(0,d.on)(s.Event.SEEKED).stayIn(r.READY),(0,d.on)(s.Event.SEEKED).stayIn(r.VIDEOSTART_FAILED)],callbacks:{onleavestate:function(e,n,i,a,r){if(!((0,u.isNullish)(e)||(0,u.isNullish)(n)||(0,u.isNullish)(i))&&((0,d.logStateMachineTransition)("LEAVE",e,n,i),e!==s.JSM_INITIAL_EVENT&&a)){r&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(r);var o=a-t.onEnterStateTimestamp;t.getStateHandler()[n].onleavestate(o,i,e)}},onenterstate:function(n,i,a,r,o){(0,u.isNullish)(n)||(0,u.isNullish)(i)||(0,u.isNullish)(a)||((0,d.logStateMachineTransition)("ENTER",n,i,a),t.onEnterStateTimestamp=null!=r?r:Date.now(),(0,u.isNumber)(e.starttime)&&n===s.JSM_INITIAL_EVENT&&(t.onEnterStateTimestamp=e.starttime),o&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(o),t.getStateHandler()[a].onenterstate(n,o))}}})},t.prototype.onSsaiPlaybackInteraction=function(e,t){},t}(c.AnalyticsStateMachine);t.AmazonIVSStateMachine=E;var p=function(e){return h().filter((function(t){return e.indexOf(t)<0}))},h=function(){return Object.keys(r).map((function(e){return r[e]}))}},5626:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoCodec=function(e){if(!e)return!1;return-1!==n.findIndex((function(t){return e.startsWith(t)}))},t.isAudioCodec=function(e){if(!e)return!1;return-1!==i.findIndex((function(t){return e.startsWith(t)}))};var n=["avc1","avc3","hvc1","av01","av1","hev1","vp9"],i=["mp4a","ec-3","ac-3","opus","audio/mp4"]},5766:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;var n=function(){function e(){}return e.bytesToBits=function(e){return 8*e},e.bitsToBytes=function(e){return Math.round(e/8)},e.kiloBitsToBits=function(e){return 1e3*e},e}();t.Converter=n},5791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdAnalyticsSample=void 0;var i=n(5063),a=function(e){this.platform="web",e&&(this.videoImpressionId=e.impressionId,this.userAgent=e.userAgent,this.language=e.language,this.cdnProvider=e.cdnProvider,i.transferCustomDataFields(e,this),this.customUserId=e.customUserId,this.domain=e.domain,this.experimentName=e.experimentName,this.key=e.key,this.path=e.path,this.player=e.player,this.playerKey=e.playerKey,this.playerTech=e.playerTech,this.screenHeight=e.screenHeight,this.screenWidth=e.screenWidth,this.version=e.version,this.size=e.size,this.userId=e.userId,this.videoId=e.videoId,this.videoTitle=e.videoTitle,this.videoWindowHeight=e.videoWindowHeight,this.videoWindowWidth=e.videoWindowWidth,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec)};t.AdAnalyticsSample=a},5878:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CastTech=void 0,function(e){e.AirPlay="AirPlay",e.GoogleCast="GoogleCast",e.WebSocket="WebSocket"}(n||(t.CastTech=n={}))},6235:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentTracker=void 0;var n=function(){function e(){this.segments=[]}return e.prototype.reset=function(){this.segments=[]},e.prototype.addSegment=function(e){this.segments.push(e)},e.prototype.removeSegment=function(e){this.segments=this.segments.filter((function(t){return t.url!==e}))},e.prototype.getSegments=function(){return this.segments},e}();t.SegmentTracker=n},6398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAdPosition=s,t.hasValidSsaiAdBreakMetadataStructure=function(e){if((0,o.isNullish)(e))return!0;if(!(0,o.isPlainObject)(e))return a.logger.errorMessageToUser("Invalid SsaiAdBreakMetadata: not a plain object"),!1;var t=e;if((0,o.isNotNullish)(t.adPosition)&&!s(t.adPosition))return a.logger.errorMessageToUser("Invalid SsaiAdBreakMetadata: 'adPosition' property is not valid"),!1;return!0},t.simplySanitizeSsaiAdBreakMetadata=function(e){if((0,o.isNullish)(e))return;return{adPosition:e.adPosition}},t.hasValidSsaiAdMetadataStructure=function(e){if((0,o.isNullish)(e))return!0;if(!(0,o.isPlainObject)(e))return a.logger.errorMessageToUser("Invalid SsaiAdMetadata: not a plain object"),!1;var t=e;if((0,o.isNotNullish)(t.adId)&&!(0,r.isValidString)(t.adId))return a.logger.errorMessageToUser("Invalid SsaiAdMetadata: 'adId' property is not string"),!1;if((0,o.isNotNullish)(t.adSystem)&&!(0,r.isValidString)(t.adSystem))return a.logger.errorMessageToUser("Invalid SsaiAdMetadata: 'adSystem' property is not string"),!1;if((0,o.isNotNullish)(t.customData)&&!(0,o.isPlainObject)(t.customData))return a.logger.errorMessageToUser("Invalid SsaiAdMetadata: 'customData' property is not a plain object"),!1;return!0},t.simplySanitizeSsaiAdMetadata=function(e){if((0,o.isNullish)(e))return;var t=void 0;if((0,o.isNotNullish)(e.customData)){var n=(0,i.extractCustomDataFieldsOnly)(e.customData);t={},(0,o.transferCustomDataFields)(n,t)}return{adId:e.adId,adSystem:e.adSystem,customData:t}},t.isSsaiAdQuartile=l,t.hasValidSsaiAdQuartileStructure=function(e){if(!l(e))return a.logger.errorMessageToUser("Invalid SsaiAdQuartile"),!1;return!0},t.sanitizeSsaiAdQuartileMetadata=function(e){if((0,o.isNullish)(e))return{};if(!(0,o.isPlainObject)(e))return a.logger.errorMessageToUser("Invalid SsaiAdQuartileMetadata: not a plain object"),{};var t={failedBeaconUrl:e.failedBeaconUrl};(0,r.isValidString)(t.failedBeaconUrl)?t.failedBeaconUrl=t.failedBeaconUrl.substring(0,500):(a.logger.errorMessageToUser("Invalid SsaiAdQuartileMetadata: 'failedBeaconUrl' property is not string"),t.failedBeaconUrl=void 0);return t};var i=n(5529),a=n(1916),r=n(1820),o=n(5063);function s(e){return"preroll"===e||"midroll"===e||"postroll"===e}function l(e){return"first"===e||"midpoint"===e||"third"===e||"completed"===e}},6596:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Bitmovin8InternalAdapter=void 0;var o,s=n(2403),l=n(9664),u=n(2663),c=n(6235),d=n(4916),E=n(6743),p=n(5878),h=n(3458),v=n(2361),f=n(556),A=n(8525),m=n(7614),y=n(9557),S=n(7881),I=n(3413),g=n(5248),T=n(1916),N=n(4649),C=n(5063),_=n(2647),P=n(887),D=n(7543),b=n(8676),R=n(665);!function(e){e.Fullscreen="fullscreen",e.Inline="inline",e.PictureInPicture="pictureinpicture"}(o||(o={}));var U=function(e){function t(t,n,i,a,r,o,l){var c=e.call(this,l)||this;c.player=t,c.speedMeter=n,c.segmentTracker=i,c.videoCompletionTracker=a,c.httpRequestTrackingAdapter=r,c.onBeforeUnLoadEvent=!1,c.getPlayerVersion=function(){return c.player.version},c.getPlayerName=function(){return f.Player.BITMOVIN},c.getPlayerTech=function(){return c.player.getPlayerType()},c.getDrmPerformanceInfo=function(){return c.drmPerformanceInfo};var d=new u.HeartbeatService((function(){return t.getCurrentTime()})),E=new s.Bitmovin8AnalyticsStateMachine(c.stateMachineCallbacks,d,c.opts);return d.setListener(E),c.sourceInfoFallbackService=o,c.stateMachine=E,c}return a(t,e),Object.defineProperty(t.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return this.segmentTracker.getSegments()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adModule",{get:function(){return this._adModule},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsDeferredLicenseLoading",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){var e;try{if((0,C.isNotNullish)(null===(e=this.player)||void 0===e?void 0:e.getCurrentTime)&&!this.isAdPlaying)return this.player.getCurrentTime()}catch(e){T.logger.warn("Analytics Collector attempted to access player, but player is not available anymore")}return this.lastTrackedCurrentTime?this.lastTrackedCurrentTime:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAdPlaying",{get:function(){var e=this.player.ads&&this.player.ads.getActiveAd();return(0,C.isNotNullish)(e)},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this;this.registerPlayerEventListeners(),this.registerUnloadEventListeners(),this._adModule=new P.Bitmovin8AdModule(this.player,this.windowEventTracker),this.ssaiService.activate({getPlayerCurrentTime:function(){return t.currentTime},reportEngagementInteraction:function(t){e.sendSsaiEngagementAdSample(t)},reportPlaybackInteraction:function(e,n){return t.stateMachine.onSsaiPlaybackInteraction(e,n)}});var n=new S.HttpRequestTracking([this.httpRequestTrackingAdapter]);return[new y.ErrorDetailTracking(e.errorDetailTrackingSettingsProvider,new m.ErrorDetailBackend(e.errorDetailTrackingSettingsProvider.collectorConfig),[e.errorDetailSubscribable],n)]},t.prototype.clearValues=function(){this.speedMeter.reset()},t.prototype.clearSegments=function(){this.segmentTracker.reset()},t.prototype.resetSourceRelatedState=function(){this.ssaiService.resetSourceRelatedState(),e.prototype.resetSourceRelatedState.call(this)},t.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},t.prototype.getCurrentPlaybackInfo=function(){var t,n=r(r({},e.prototype.getCommonPlaybackInfo.call(this)),{size:this.player.getViewMode()===o.Fullscreen?A.PlayerSize.Fullscreen:A.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:(0,I.normalizeVideoDuration)(this.videoDuration),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getContainer().offsetWidth,videoWindowHeight:this.player.getContainer().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting(),audioLanguage:(0,C.isNotNullish)(this.player.getAudio())?null===(t=this.player.getAudio())||void 0===t?void 0:t.lang:void 0,subtitleEnabled:!1,droppedFrames:(0,C.isNotNullish)(this.player.getSource())?this.player.getDroppedVideoFrames():0});return this.applySubtitleProperties(n),this.applyPlaybackQualityProperties(n),this.applyCastingProperties(n),this.applySourceProperties(n),((0,C.isNullish)(n.streamFormat)||"unknown"===n.streamFormat)&&this.sourceInfoFallbackService.applyStreamFormat(n),n},t.prototype.sourceChange=function(e){this.stateMachine.callManualSourceChangeEvent(e,this.currentTime)},t.prototype.onError=function(){this.clearSegments()},t.prototype.registerPlayerEventListeners=function(){var e=this;this.player.on(this.player.exports.PlayerEvent.SourceUnloaded,(function(t){e.segmentTracker.reset(),e.eventCallback(v.Event.SOURCE_UNLOADED,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.SourceLoaded,(function(t){e.videoCompletionTracker.reset(),e.videoDuration=e.player.getDuration(),e.videoCompletionTracker.setVideoDuration(e.player.getDuration()),e.sourceInfoFallbackService.setStreamFormat(e.player.getStreamType()),e.eventCallback(v.Event.SOURCE_LOADED,{})})),this.player.on(this.player.exports.PlayerEvent.CastStarted,(function(t){e.eventCallback(v.Event.START_CAST,t)})),this.player.on(this.player.exports.PlayerEvent.CastStopped,(function(){e.eventCallback(v.Event.END_CAST,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Play,(function(t){"ui-seek"!==t.issuer&&e.eventCallback(v.Event.PLAY,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Playing,(function(t){"advertising-api"!==t.issuer&&e.eventCallback(v.Event.PLAYING,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Paused,(function(t){"ui-seek"!==t.issuer&&e.eventCallback(v.Event.PAUSE,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.TimeChanged,(function(t){e.isAdPlaying||(e.lastTrackedCurrentTime=e.player.getCurrentTime()),e.eventCallback(v.Event.TIMECHANGED,{currentTime:e.lastTrackedCurrentTime})})),this.player.on(this.player.exports.PlayerEvent.Seek,(function(t){e.allowSeeking(t)&&e.eventCallback(v.Event.SEEK,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Seeked,(function(){e.eventCallback(v.Event.SEEKED,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.StallStarted,(function(){e.eventCallback(v.Event.START_BUFFERING,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.StallEnded,(function(){e.eventCallback(v.Event.END_BUFFERING,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.AudioPlaybackQualityChanged,(function(t){var n=t,i=n.sourceQuality,a=n.targetQuality;(0,C.isNullish)(a)||((0,C.isNullish)(i)||e.qualityChangeService.shouldAllowAudioQualityChange(a.bitrate)&&e.eventCallback(v.Event.AUDIO_CHANGE,{bitrate:a.bitrate,currentTime:e.currentTime,codec:a.codec}),e.qualityChangeService.setAudioBitrate(a.bitrate))})),this.player.on(this.player.exports.PlayerEvent.VideoPlaybackQualityChanged,(function(t){var n=t,i=n.sourceQuality,a=n.targetQuality;(0,C.isNullish)(a)||((0,C.isNullish)(i)||e.qualityChangeService.shouldAllowVideoQualityChange(a.bitrate)&&e.eventCallback(v.Event.VIDEO_CHANGE,{width:a.width,height:a.height,bitrate:a.bitrate,currentTime:e.currentTime,codec:a.codec}),e.qualityChangeService.setVideoBitrate(a.bitrate))})),this.player.on(this.player.exports.PlayerEvent.ViewModeChanged,(function(t){"fullscreen"===t.to?e.eventCallback(v.Event.START_FULLSCREEN,{currentTime:e.currentTime}):"fullscreen"===t.from&&e.eventCallback(v.Event.END_FULLSCREEN,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.AdStarted,(function(t){e.eventCallback(v.Event.START_AD,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.AdFinished,(function(t){e.eventCallback(v.Event.END_AD,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.AdSkipped,(function(t){e.eventCallback(v.Event.END_AD,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.AdError,(function(t){e.eventCallback(v.Event.END_AD,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Muted,(function(){e.eventCallback(v.Event.MUTE,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Unmuted,(function(){e.eventCallback(v.Event.UN_MUTE,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.Error,(function(t){e.eventCallback(v.Event.ERROR,{code:t.code,message:t.name,legacyData:t.data,currentTime:e.currentTime,originalError:t,data:{additionalData:JSON.stringify(t.data)}}),t.code!==h.ErrorCode.BITMOVIN_PLAYER_LICENSING_ERROR.code&&t.code!==h.ErrorCode.SETUP_MISSING_LICENSE_WHITELIST.code||e._onLicenseCallFailed.dispatch({}),e.ssaiService.sendAdEngagementErrorSample({code:t.code,message:t.name,severity:"CRITICAL"},t)})),this.player.on(this.player.exports.PlayerEvent.PlaybackFinished,(function(){e.eventCallback(v.Event.END,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.DownloadFinished,(function(t){0===t.downloadType.indexOf("drm/license/")&&(e.drmPerformanceInfo={drmType:t.downloadType.replace("drm/license/",""),drmLoadTime:1e3*t.downloadTime})})),this.player.on(this.player.exports.PlayerEvent.AudioChanged,(function(t){e.eventCallback(v.Event.AUDIOTRACK_CHANGED,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.SubtitleEnabled,(function(t){e.eventCallback(v.Event.SUBTITLE_CHANGE,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.SubtitleDisabled,(function(t){e.eventCallback(v.Event.SUBTITLE_CHANGE,{currentTime:e.currentTime})})),this.player.on(this.player.exports.PlayerEvent.LicenseValidated,(function(t){t.data.analytics&&void 0!==t.data.analytics.key?e._onLicenseKeyReceived.dispatch({licenseKey:t.data.analytics.key}):e._onLicenseCallFailed.dispatch({})}))},t.prototype.registerUnloadEventListeners=function(){var e=this,t=function(){if(!e.onBeforeUnLoadEvent){e.onBeforeUnLoadEvent=!0;var t=e.lastTrackedCurrentTime;e.eventCallback(v.Event.UNLOAD,{currentTime:t})}e.release()};t=t.bind(!0),this.player.on(this.player.exports.PlayerEvent.Destroy,t),this.windowEventTracker.addEventListener("beforeunload",t),this.windowEventTracker.addEventListener("unload",t)},t.prototype.applySourceProperties=function(e){var t=this.player.getSource();if(!(0,C.isNullish)(t)){e.videoTitle=t.title,e.mpdUrl=t.dash,e.m3u8Url=t.hls;var n=(0,g.getSourceInfoFromBitmovinSourceConfig)(t.progressive,this.player);e.progUrl=n.progUrl,"progressive"===this.player.getStreamType()&&(e.videoBitrate=n.progBitrate)}},t.prototype.applySubtitleProperties=function(e){var t;this.player.subtitles&&(t=this.player.subtitles.list().find((function(e){return!0===e.enabled}))),e.subtitleEnabled=(0,C.isNotNullish)(t),e.subtitleLanguage=(0,C.isNotNullish)(t)?t.lang:null},t.prototype.applyPlaybackQualityProperties=function(e){var t=this.player.getPlaybackVideoData();(0,C.isNotNullish)(t)&&(e.videoBitrate=t.bitrate,e.videoPlaybackHeight=t.height,e.videoPlaybackWidth=t.width,e.videoCodec=t.codec);var n=this.player.getPlaybackAudioData();(0,C.isNotNullish)(n)&&(e.audioBitrate=n.bitrate,e.audioCodec=n.codec)},t.prototype.applyCastingProperties=function(e){var t=this.player.isCasting()||this.player.isAirplayActive()||!1;if(e.isCasting=t,t)if(this.player.isAirplayActive())e.castTech=p.CastTech.AirPlay;else{var n=this.player.getConfig().remotecontrol;if(!(0,C.isNullish)(n))switch(n.type){case"googlecast":e.castTech=p.CastTech.GoogleCast;break;case"websocket":e.castTech=p.CastTech.WebSocket}}},t.prototype.allowSeeking=function(e){var t=e;return Math.abs(t.position-t.seekTarget)>N.ANALYTICS_MIN_SEEK_DIFFERENCE_THRESHOLD},t.create=function(e,n){var i=new R.SpeedMeterAdapter(e,new l.DownloadSpeedMeter).getDownloadSpeedMeter(),a=new b.SegmentTrackerAdapter(e,new c.SegmentTracker).getSegmentTracker(),r=new D.HttpRequestTrackingAdapter(e);return new t(e,i,a,new E.default,r,new d.SourceInfoFallbackService,n)},t}(_.InternalAdapter);t.Bitmovin8InternalAdapter=U},6743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(5063);!function(e){e[e.None=0]="None",e[e.Overlapping=1]="Overlapping",e[e.FirstContainedInSecond=2]="FirstContainedInSecond",e[e.SecondContainedInFirst=3]="SecondContainedInFirst"}(i||(i={}));var r=function(){function e(){this.watched=[],this.videoDuration=null}return e.prototype.reset=function(){this.watched=[]},e.prototype.setVideoDuration=function(e){this.videoDuration=1e3*e},e.prototype.addWatched=function(e){if((0,a.isNullish)(this.videoDuration))throw new Error("no video duration set for completion tracker");this.watched.push(e);var t=this.mergeWatched(this.watched);return(this.getDuration(e)-t)/this.videoDuration},e.prototype.getCompletionPercentage=function(){if((0,a.isNullish)(this.videoDuration))throw new Error("no video duration set for completion tracker");for(var e=0,t=0,n=this.watched;t<n.length;t++){var i=n[t];e+=this.getDuration(i)}return e/this.videoDuration},e.prototype.mergeWatched=function(e){for(var t=0;t<e.length;t++)for(var n=e[t],a=t+1;a<e.length;a++){var r=e[a],o=0,s=this.getOverlappingType(n,r);if(s===i.Overlapping?(this.mergeAndReplace(n,t,r,a),o=this.getOverlappingTimespan(n,r)):s===i.FirstContainedInSecond?(this.watched.splice(t,1),o=this.getDuration(n)):s===i.SecondContainedInFirst&&(this.watched.splice(a,1),o=this.getDuration(r)),s!==i.None)return o+this.mergeWatched(this.watched)}return 0},e.prototype.getOverlappingType=function(e,t){return this.isMomentInTimespan(e.end,t)&&e.start<t.start||this.isMomentInTimespan(e.start,t)&&e.end>t.end?i.Overlapping:this.isMomentInTimespan(e.start,t)&&this.isMomentInTimespan(e.end,t)?i.FirstContainedInSecond:this.isMomentInTimespan(t.start,e)&&this.isMomentInTimespan(t.end,e)?i.SecondContainedInFirst:i.None},e.prototype.isMomentInTimespan=function(e,t){return e>=t.start&&e<t.end},e.prototype.mergeAndReplace=function(e,t,n,i){var a=e.end>n.end?e.end:n.end,r={start:e.start<n.start?e.start:n.start,end:a};this.watched.splice(t,1,r),this.watched.splice(i,1)},e.prototype.getOverlappingTimespan=function(e,t){return(e.end<t.end?e.end:t.end)-(e.start>=t.start?e.start:t.start)},e.prototype.getDuration=function(e){return Math.abs(e.end-e.start)},e}();t.default=r},6845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureManager=void 0;var i=n(1916),a=function(){function e(){this.features=[]}return e.prototype.registerFeatures=function(e){this.features=e},e.prototype.unregisterFeatures=function(){this.features.forEach((function(e){return e.disable()})),this.features=[]},e.prototype.resetFeatures=function(){this.features.forEach((function(e){return e.reset()}))},e.prototype.configureFeatures=function(e,t){this.features=this.features.filter((function(n){var a=n.configure(e,t);return!(!e||!0!==(null==a?void 0:a.enabled))||(i.logger.log("Disabling feature ".concat(n.constructor.name," as it isn't enabled according to license callback.")),n.disable(),!1)})),this.features.forEach((function(e){return e.enabled()}))},e}();t.FeatureManager=a},7124:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HTML5InternalAdapter=void 0;var o=n(3674),s=n(2663),l=n(6743),u=n(2361),c=n(2168),d=n(556),E=n(8525),p=n(7224),h=n(3413),v=n(1916),f=n(5063),A=n(2647),m=n(8510),y=function(e){function t(t,n){var i=e.call(this,n)||this;i.needsFirstPlayIntent=!0,i.onBeforeUnLoadEvent=!1,i.isBuffering=!1,i.isPaused=!1,i.isSeeking=!1,i.previousMediaTimeInSeconds=0,i.previousMutedValue=!1,i.getPlayerName=function(){return d.Player.HTML5},i.getPlayerTech=function(){return"html5"},i.getAutoPlay=function(){return!!i.mediaElement&&i.mediaElement.autoplay},i.getDrmPerformanceInfo=function(){return i.drmPerformanceInfo},i.isLive=function(){if(i.mediaElement&&!isNaN(i.mediaElement.duration))return i.mediaElement.duration===1/0};var a=new s.HeartbeatService((function(){var e;return null!==(e=null==t?void 0:t.currentTime)&&void 0!==e?e:0})),r=new o.HTML5AnalyticsStateMachine(i.stateMachineCallbacks,a,i.opts);return a.setListener(r),i.stateMachine=r,i.mediaElement=t,i.mediaElementEventHandlers=[],i.mediaElementOriginalLoadFn=void 0,i.bufferingTimeout=void 0,i.isBuffering=!1,i.isPaused=!1,i.isSeeking=!1,i.previousMediaTimeInSeconds=0,i.previousClientTime=0,i.needsReadyEvent=!0,i.needsFirstPlayIntent=!0,i.videoCompletionTracker=new l.default,i.playerStatisticsProvider=new m.default(t),i}return a(t,e),Object.defineProperty(t.prototype,"segments",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.resetSourceRelatedState=function(){e.prototype.resetSourceRelatedState.call(this),this.playerStatisticsProvider.reset(),this.needsFirstPlayIntent=!0,this.isBuffering=!1,this.isPaused=!1,this.isSeeking=!1,this.previousMediaTimeInSeconds=0,clearTimeout(this.bufferingTimeout)},t.prototype.release=function(){this.unregisterMediaElement(),e.prototype.release.call(this)},t.prototype.initialize=function(e){return this.mediaElement&&this.setMediaElement(),this.registerWindowEvents(),[]},t.prototype.getCurrentPlaybackInfo=function(){var e=this.getStreamType();(0,f.isNotNullish)(e)&&this.sourceInfoFallbackService.setStreamFormat(e);var t=r(r(r({},this.getCommonPlaybackInfo()),(0,h.buildPlaybackInfoStreamTypeFields)(e,this.getStreamURL())),{isLive:this.isLive(),size:(0,f.isVideoInFullscreen)()?E.PlayerSize.Fullscreen:E.PlayerSize.Window,playerTech:this.getPlayerTech(),droppedFrames:this.playerStatisticsProvider.getDroppedFrames()});this.mediaElement&&(t=r(r({},t),{videoDuration:(0,h.normalizeVideoDuration)(this.mediaElement.duration),isMuted:this.mediaElement.muted,videoWindowHeight:this.mediaElement.height,videoWindowWidth:this.mediaElement.width}));var n=this.getCurrentQualityLevelInfo();return n&&(t=r(r({},t),{videoPlaybackHeight:n.height,videoPlaybackWidth:n.width,videoBitrate:n.bitrate})),this.sourceInfoFallbackService.applyStreamFormat(t),t},Object.defineProperty(t.prototype,"currentTime",{get:function(){if(!this.mediaElement)throw new Error("No media attached");return this.mediaElement.currentTime},enumerable:!1,configurable:!0}),t.prototype.setMediaElement=function(e){if(void 0===e&&(e=null),e&&(this.mediaElement&&this.unregisterMediaElement(),this.mediaElement=e),!this.mediaElement)throw new Error("No media element owned");if(this.mediaElementEventHandlers.length>0)throw new Error("Media element already set (only call this once)");this.registerMediaElement(),this.onMaybeReady()},t.prototype.getMIMEType=function(){var e=this.getStreamURL();if(e&&void 0!==e)return(0,c.getMIMETypeFromFileExtension)(e)},t.prototype.getStreamType=function(){var e=this.getMIMEType();if(e)return(0,p.getStreamTypeFromMIMEType)(e)},t.prototype.getStreamURL=function(){var e=this.mediaElement;if(e)return e.src},t.prototype.registerMediaElement=function(){var e=this,t=this.mediaElement;if(t){this.mediaElementOriginalLoadFn=t.load;var n=this.mediaElementOriginalLoadFn;t.load=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];e.sourceChange({}),n.apply(t,i)},this.listenToMediaElementEvent("loadstart",(function(){S("loadstart ".concat(t.currentTime)),e.sourceChange({})})),this.listenToMediaElementEvent("loadedmetadata",(function(){S("loadedmetadata time:".concat(t.currentTime," / readyState: ").concat(t.readyState)),e.checkQualityLevelAttributes(!0);var n=e.getStreamType();(0,f.isNotNullish)(n)&&e.sourceInfoFallbackService.setStreamFormat(n),(0,f.isNotNullish)(e.mediaElement)&&(e.videoCompletionTracker.reset(),e.videoCompletionTracker.setVideoDuration(e.mediaElement.duration),e.previousMutedValue=e.mediaElement.muted),e.eventCallback(u.Event.SOURCE_LOADED,{})})),this.listenToMediaElementEvent("play",(function(){S("play ".concat(t.currentTime));var n=t.currentTime;e.needsFirstPlayIntent&&(e.previousMediaTimeInSeconds=n),e.needsFirstPlayIntent=!1,e.eventCallback(u.Event.PLAY,{currentTime:n})})),this.listenToMediaElementEvent("pause",(function(){S("pause ".concat(t.currentTime)),e.onPaused()})),this.listenToMediaElementEvent("playing",(function(){S("playing ".concat(t.currentTime)),clearTimeout(e.bufferingTimeout),e.isPaused=!1,e.needsFirstPlayIntent=!1})),this.registerMediaElementErrorEvent(t),this.listenToMediaElementEvent("volumechange",(function(){S("volumechange ".concat(t.currentTime));var n=t.muted,i=t.currentTime,a=t.volume,r=e.isAudioMuted(n,a);e.previousMutedValue!==r&&(r?e.eventCallback(u.Event.MUTE,{currentTime:i}):e.eventCallback(u.Event.UN_MUTE,{currentTime:i}),e.previousMutedValue=r)})),this.listenToMediaElementEvent("seeking",(function(){S("seeking ".concat(t.currentTime));var n=t.currentTime;e.eventCallback(u.Event.SEEK,{currentTime:n})})),this.listenToMediaElementEvent("seeked",(function(){S("seeked ".concat(t.currentTime));var n=t.currentTime;clearTimeout(e.bufferingTimeout),e.eventCallback(u.Event.SEEKED,{currentTime:n})})),this.listenToMediaElementEvent("timeupdate",(function(){var n=t.currentTime;if(e.isBuffering=!1,e.isSeeking=!1,!e.needsFirstPlayIntent){if(!e.isPaused)1e3*Math.abs(n-e.previousMediaTimeInSeconds)>0&&e.eventCallback(u.Event.TIMECHANGED,{currentTime:n});e.checkQualityLevelAttributes(),e.checkSeeking(),e.checkPlayheadProgress(),e.previousMediaTimeInSeconds=n}})),this.listenToMediaElementEvent("stalled",(function(){})),this.listenToMediaElementEvent("waiting",(function(){S("waiting ".concat(t.currentTime)),e.checkSeeking(),e.onBuffering()}))}},t.prototype.registerMediaElementErrorEvent=function(e){var t=this;this.listenToMediaElementEvent("error",(function(){var n,i;S("error ".concat(e.currentTime));var a=e.currentTime,r=e.error;t.eventCallback(u.Event.ERROR,{currentTime:a,code:null!==(n=null==r?void 0:r.code)&&void 0!==n?n:void 0,message:null!==(i=null==r?void 0:r.message)&&void 0!==i?i:void 0,originalError:r,data:{}})}))},t.prototype.listenToMediaElementEvent=function(e,t){if(!this.mediaElement)throw new Error("No media attached");var n=t.bind(this);this.mediaElementEventHandlers.push({event:e,handler:n}),this.mediaElement.addEventListener(e,n,!1)},t.prototype.onMaybeReady=function(){this.needsReadyEvent&&this.mediaElement&&(this.needsReadyEvent=!1,this.getCurrentPlaybackInfo(),this.videoCompletionTracker.reset(),this.videoCompletionTracker.setVideoDuration(this.mediaElement.duration))},t.prototype.unregisterMediaElement=function(){if(!this.mediaElement)throw new Error("No media element attached");var e=this.mediaElement;this.mediaElementEventHandlers.forEach((function(t){e.removeEventListener(t.event,t.handler)}));var t=this.mediaElementOriginalLoadFn;(0,f.isNotNullish)(t)&&(e.load=t),this.mediaElement=void 0,this.mediaElementEventHandlers=[],this.mediaElementOriginalLoadFn=void 0,window.clearTimeout(this.bufferingTimeout)},t.prototype.registerWindowEvents=function(){this.windowEventTracker.addEventListener("beforeunload",this.onPageClose.bind(this)),this.windowEventTracker.addEventListener("unload",this.onPageClose.bind(this))},t.prototype.onPageClose=function(){if(!this.onBeforeUnLoadEvent){this.onBeforeUnLoadEvent=!0;var e=this.mediaElement,t=void 0;(0,f.isNotNullish)(e)&&(t=e.currentTime),this.eventCallback(u.Event.UNLOAD,{currentTime:t})}this.release()},t.prototype.checkQualityLevelAttributes=function(e){if(void 0===e&&(e=!1),!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement,n=this.getCurrentQualityLevelInfo();if(n){var i=n.bitrate,a=n.width,r=n.height;if((0,f.isNotNullish)(i))if(this.qualityChangeService.shouldAllowVideoQualityChange(i)){this.qualityChangeService.setVideoBitrate(i);var o={width:a,height:r,bitrate:i,currentTime:t.currentTime};e||this.eventCallback(u.Event.VIDEO_CHANGE,o)}else this.qualityChangeService.setVideoBitrate(i)}},t.prototype.sourceChange=function(e){var t;this.stateMachine.callManualSourceChangeEvent(e,null===(t=this.mediaElement)||void 0===t?void 0:t.currentTime)},t.prototype.getSelectedSubtitleFromMediaElement=function(e){if(!(0,f.isNullish)(e.textTracks)){for(var t=0,n=e.textTracks;t<n.length;t++){var i=n[t];if((0,f.isNotNullish)(i.mode)&&"showing"===i.mode){var a=(0,f.isNotNullish)(i.language)&&i.language.length>0;return{enabled:a,language:a?i.language:void 0}}}return{enabled:!1}}},t.prototype.onPaused=function(e){if(!this.isPaused){if(!this.mediaElement)throw new Error("No media attached");e||(e=this.mediaElement.currentTime),this.eventCallback(u.Event.PAUSE,{currentTime:e}),this.isPaused=!0}},t.prototype.onBuffering=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime;this.isBuffering||this.isPaused&&!this.isSeeking||(this.isSeeking?this.eventCallback(u.Event.SEEK,{currentTime:e}):this.eventCallback(u.Event.START_BUFFERING,{currentTime:e}),this.isBuffering=!0)},t.prototype.checkPlayheadProgress=function(){var e=this;if(!this.mediaElement)throw new Error("No media attached");var n=this.mediaElement;n.paused&&this.onPaused(),clearTimeout(this.bufferingTimeout),this.bufferingTimeout=window.setTimeout((function(){n.paused||n.ended&&!e.isBuffering||n.currentTime-e.previousMediaTimeInSeconds<t.BUFFERING_TIMECHANGED_TIMEOUT_IN_MS/1e3*.8&&e.onBuffering()}),t.BUFFERING_TIMECHANGED_TIMEOUT_IN_MS)},t.prototype.checkSeeking=function(){if(!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement.currentTime,t=Math.abs(e-this.previousMediaTimeInSeconds);if(t<1)this.previousClientTime=Date.now();else{var n=(Date.now()-this.previousClientTime)/1e3;t>n*(this.mediaElement.playbackRate+.5)&&(this.isSeeking=!0,this.onPaused(this.previousMediaTimeInSeconds+n)),this.previousClientTime=Date.now()}},t.BUFFERING_TIMECHANGED_TIMEOUT_IN_MS=1e3,t}(A.InternalAdapter);t.HTML5InternalAdapter=y;var S=function(e){var t=(new Date).toISOString().substring(11),n="".concat(t,"[HTML5InternalAdapter]"),i="".concat(n,": ").concat(e);v.logger.log(i)}},7224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamTypes=void 0,t.getStreamTypesFromURL=function(e){if((0,r.isNullish)(e)||(0,a.isBlank)(e))return;var t=e.split(/[?#]/)[0].toLowerCase();if((0,a.endsWith)(t,".m3u8"))return i.hls;if((0,a.endsWith)(t,".mp4")||(0,a.endsWith)(t,".m4v")||(0,a.endsWith)(t,".m4a"))return i.prog;if((0,a.endsWith)(t,".webm"))return i.prog;if((0,a.endsWith)(t,".mpd"))return i.dash;return},t.getStreamTypeFromMIMEType=function(e){var t;return((t={})[o.MIMETypes.MP4]=i.prog,t[o.MIMETypes.WEBM]=i.prog,t[o.MIMETypes.HLS]=i.hls,t[o.MIMETypes.DASH]=i.dash,t)[e]};var i,a=n(1820),r=n(5063),o=n(2168);!function(e){e.dash="dash",e.hls="hls",e.prog="progressive"}(i||(t.StreamTypes=i={}))},7232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdBreakSample=void 0;var i=n(5063),a=function(e,t){this.adFallbackIndex=0,t&&(this.manifestDownloadTime=i.calculateTime(t.downloadTiming.downloadTime)),e&&(this.adReplaceContentDuration=i.calculateTimeWithUndefined(e.replaceContentDuration),this.adFallbackIndex=(e.currentFallbackIndex||-1)+1);var n=e;n&&("pre"===n.position||"post"===n.position?this.adPosition=n.position:(this.adPosition="mid",this.adOffset=n.position),this.adPreloadOffset=i.calculateTimeWithUndefined(n.preloadOffset));var a=e;if(a){this.adIsPersistent=a.persistent;var r=a.tag;if(this.adFallbackIndex>0&&a.fallbackTags&&a.fallbackTags.length>=this.adFallbackIndex&&(r=a.fallbackTags[this.adFallbackIndex-1]),r&&(this.adTagType=r.type,this.adTagUrl=r.url),this.adTagUrl){var o=i.getHostnameAndPathFromUrl(this.adTagUrl);this.adTagServer=o.hostname,this.adTagPath=o.path}}var s=e;s&&(this.adScheduleTime=i.calculateTimeWithUndefined(s.scheduleTime),this.adIdPlayer=s.id)};t.AdBreakSample=a},7238:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLVideoElementInternalAdapter=void 0;var r=n(556),o=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.sessionData={},a.getPlayerName=function(){return r.Player.HTML5},a.getPlayerVersion=function(){return""},a.sessionData.streamFormat=null==i?void 0:i.streamFormat,a.sessionData.audioCodec=null==i?void 0:i.audioCodec,a.sessionData.videoCodec=null==i?void 0:i.videoCodec,a.sessionData.audioLanguage=null==i?void 0:i.audioLanguage,a}return a(t,e),t.prototype.getStreamURL=function(){return this.mediaElement?this.mediaElement.currentSrc:void 0},t.prototype.getCurrentQualityLevelInfo=function(){return{bitrate:void 0,width:this.mediaElement?this.mediaElement.videoWidth:void 0,height:this.mediaElement?this.mediaElement.videoHeight:void 0}},t.prototype.getCurrentPlaybackInfo=function(){var t,n,i,a,r,o,s=e.prototype.getCurrentPlaybackInfo.call(this);s.streamFormat=null!==(t=this.sessionData.streamFormat)&&void 0!==t?t:s.streamFormat,s.audioCodec=null!==(n=this.sessionData.audioCodec)&&void 0!==n?n:s.audioCodec,s.videoCodec=null!==(i=this.sessionData.videoCodec)&&void 0!==i?i:s.videoCodec,s.subtitleEnabled=null!==(a=this.sessionData.subtitleEnabled)&&void 0!==a?a:s.subtitleEnabled;var l=null!==(r=this.sessionData.subtitleLanguage)&&void 0!==r?r:s.subtitleLanguage;return s.subtitleLanguage=!0===s.subtitleEnabled?l:void 0,s.audioLanguage=null!==(o=this.sessionData.audioLanguage)&&void 0!==o?o:s.audioLanguage,s},t.prototype.resetSourceRelatedState=function(){e.prototype.resetSourceRelatedState.call(this),this.sessionData={}},t}(n(7124).HTML5InternalAdapter);t.HTMLVideoElementInternalAdapter=o},7299:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourcesApiExportNames=t.SourceExportNames=t.PlaybackApiEventsPackageExportNames=t.CoreExportNames=t.BundleExportNames=void 0;t.BundleExportNames={Logger:"logger",PlayerConfig:"player-config"};t.CoreExportNames={Utils:"utils",Constants:"constants",CoreEffects:"core-effects",CoreStateAtoms:"core-state-atoms"};t.PlaybackApiEventsPackageExportNames={PlaybackEvent:"playback-event"};t.SourceExportNames={CreateSourceStateAtom:"create-source-state-atom",CreateSourceReference:"create-source-reference",SourceReferences:"source-references",SourceState:"source-state-atom"};t.SourcesApiExportNames={SourceApiManager:"source-api-manager",VideoElementUtils:"video-element-utils",SourceEventBus:"source-event-bus"}},7390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceNumberBackend=void 0;var i=n(4649),a=function(){function e(e){this.sequenceNumber=0,this.nextBackend=e}return e.prototype.sendRequest=function(e){this.updateSampleBeforeSending(e),this.isSequenceNumberAboveThreshold(e)||this.nextBackend.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.updateSampleBeforeSending(e),this.isSequenceNumberAboveThreshold(e)||this.nextBackend.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.updateSampleBeforeSending(e),this.isSequenceNumberAboveThreshold(e)||this.nextBackend.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.isSequenceNumberAboveThreshold(e)||this.nextBackend.sendAdRequest(e)},e.prototype.updateSampleBeforeSending=function(e){e.sequenceNumber=this.sequenceNumber++},e.prototype.isSequenceNumberAboveThreshold=function(e){var t;return(null!==(t=e.sequenceNumber)&&void 0!==t?t:0)>i.SEQUENCE_NUMBER_LIMIT},e}();t.SequenceNumberBackend=a},7540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingBackend=void 0;var i=n(1916),a=function(){function e(e,t){this.underlying=t,e.debug&&e.debug.fields&&(this.debugFields=e.debug.fields)}return e.prototype.sendRequest=function(e){this.printFields(e),this.underlying.sendRequest(e)},e.prototype.sendUnloadRequest=function(e){this.printFields(e),this.underlying.sendUnloadRequest(e)},e.prototype.sendRequestSynchronous=function(e){this.printFields(e),this.underlying.sendRequestSynchronous(e)},e.prototype.sendAdRequest=function(e){this.underlying.sendAdRequest(e)},e.prototype.printFields=function(e){if(this.debugFields&&this.debugFields.length){var t={};this.debugFields.forEach((function(n){return t[n]=e[n]})),i.logger.table([t])}},e}();t.DebuggingBackend=a},7543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpRequestTrackingAdapter=void 0;var i=n(675),a=n(2974),r=n(5063),o=n(4438),s=function(){function e(e){var t=this;this.eventDispatcher=new i.EventDispatcher,this.playerExports=e.exports,e.on(this.playerExports.PlayerEvent.DownloadFinished,(function(e){return t.onDownloadFinished(e)}))}return e.prototype.subscribe=function(e){return this.eventDispatcher.subscribe(e)},e.prototype.unsubscribe=function(e){this.eventDispatcher.unsubscribe(e)},e.prototype.onDownloadFinished=function(e){var t,n,i;this.eventDispatcher.dispatch({httpRequest:{downloadTime:null!==(t=(0,r.calculateTimeWithUndefined)(null==e?void 0:e.downloadTime))&&void 0!==t?t:0,httpStatus:null!==(n=null==e?void 0:e.httpStatus)&&void 0!==n?n:0,success:null!==(i=null==e?void 0:e.success)&&void 0!==i&&i,timestamp:(0,r.getCurrentTimestamp)(),url:null==e?void 0:e.url,size:null==e?void 0:e.size,timeToFirstByte:(0,r.calculateTimeWithUndefined)(null==e?void 0:e.timeToFirstByte),type:this.mapHttpRequestType(null==e?void 0:e.downloadType)}})},e.prototype.mapHttpRequestType=function(e){return(0,a.objectValues)(o.HttpRequestType).includes(e)?e:o.HttpRequestType.UNKNOWN},e}();t.HttpRequestTrackingAdapter=s},7596:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsStateMachine=void 0;var a=n(7906),r=n(3458),o=n(2361),s=n(1916),l=n(4649),u=n(5063),c=n(5063),d=[3e3,5e3,1e4,3e4,59700],E=function(){function e(e,t,n){this.stateMachineCallbacks=e,this.onEnterStateTimestamp=0,this.videoStartupTimeoutMs=l.ANALYTICS_VIDEOSTART_TIMEOUT,this.rebufferTimeoutMs=l.ANALYTICS_REBUFFER_TIMEOUT,this.currentRebufferingIntervalIndex=0,this.stateMachine=this.createStateMachine(n),this.playingHeartbeatService=t}return e.prototype.callEvent=function(e,t,n){var i=this.stateMachine[e];if(null!=i)try{i.call(this.stateMachine,n,t)}catch(i){s.logger.error('StateMachine ignored event "'.concat(e,'" call, because it has thrown exception in the current state "').concat(this.currentState,'"'),t,n,i)}else s.logger.warn('StateMachine ignored event "'.concat(e,'" call, because it was not defined'),t,n)},e.prototype.callManualSourceChangeEvent=function(e,t){this.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:e,currentTime:t},Date.now())},Object.defineProperty(e.prototype,"currentState",{get:function(){return this.stateMachine.current},enumerable:!1,configurable:!0}),e.prototype.resetIntervals=function(){this.clearVideoStartTimeout(),this.clearRebufferingTimeoutHandle(!0),this.clearRebufferingHeartbeatHandle()},e.prototype.startRebufferingHeartbeatInterval=function(e){var t=this;void 0===e&&(e=!0),this.resetRebufferingHelpers(e),this.startRebufferingTimeoutHandle(),this.rebufferingHeartbeatIntervalHandle=window.setInterval((function(){var e=t.stateMachine.current.toLowerCase();if("rebuffering"===e){var n=(new Date).getTime(),i=n-t.onEnterStateTimestamp;t.stateMachineCallbacks.heartbeat(i,e,{buffered:i}),t.onEnterStateTimestamp=n,t.currentRebufferingIntervalIndex=Math.min(t.currentRebufferingIntervalIndex+1,d.length-1),t.startRebufferingHeartbeatInterval(!1)}else t.resetRebufferingHelpers()}),d[this.currentRebufferingIntervalIndex])},e.prototype.resetRebufferingHelpers=function(e){void 0===e&&(e=!0),e&&(this.currentRebufferingIntervalIndex=0),this.clearRebufferingHeartbeatHandle(),this.clearRebufferingTimeoutHandle(e)},e.prototype.clearRebufferingHeartbeatHandle=function(){(0,c.isNotNullish)(this.rebufferingHeartbeatIntervalHandle)&&(window.clearInterval(this.rebufferingHeartbeatIntervalHandle),this.rebufferingHeartbeatIntervalHandle=void 0)},e.prototype.startRebufferingTimeoutHandle=function(){var e=this;this.currentRebufferingIntervalIndex>0||(this.rebufferingTimeoutHandle=window.setTimeout((function(){e.callEvent(o.Event.ERROR,i(i({},r.ErrorCode.BUFFERING_TIMEOUT_REACHED),{data:{additionalData:"StateMachine timed out after ".concat(e.rebufferTimeoutMs," ms of consecutive buffering.")}}),u.getCurrentTimestamp()),e.stateMachineCallbacks.release()}),this.rebufferTimeoutMs))},e.prototype.clearRebufferingTimeoutHandle=function(e){e&&(0,c.isNotNullish)(this.rebufferingTimeoutHandle)&&(window.clearTimeout(this.rebufferingTimeoutHandle),this.rebufferingTimeoutHandle=void 0)},e.prototype.setVideoStartTimeout=function(){var e=this;(0,c.isNotNullish)(this.videoStartTimeout)&&this.clearVideoStartTimeout(),this.videoStartTimeout=window.setTimeout((function(){e.callEvent(o.Event.VIDEOSTART_TIMEOUT,{},Date.now()),e.stateMachineCallbacks.release()}),this.videoStartupTimeoutMs)},e.prototype.clearVideoStartTimeout=function(){window.clearTimeout(this.videoStartTimeout),this.videoStartTimeout=void 0},e.prototype.onHeartbeat=function(e){this.sendPlayingSample(Date.now(),e)},e.prototype.sendPlayingSample=function(e,t,n){void 0===n&&(n=!1);var i=this.stateMachine.current.toLowerCase();if("playing"===i){this.stateMachineCallbacks.setVideoTimeEndFromEvent(t);var r=e-this.onEnterStateTimestamp,o={played:r};n&&(o[a.SSAI_RELATED_SAMPLE_MARKER]=!0),this.stateMachineCallbacks.heartbeat(r,i,o),this.onEnterStateTimestamp=e,this.stateMachineCallbacks.setVideoTimeStartFromEvent(t)}else s.logger.warn('Unexpected call of "sendPlayingSample" in AnalyticsStateMachine from "'.concat(i,'" state'))},e}();t.AnalyticsStateMachine=E},7614:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorDetailBackend=void 0;var r=n(92),o=n(4649),s=n(5063),l=function(){function e(e){var t;this._queue=[],this._enabled=!1,this.backendUrl=(0,s.joinUrls)(null!==(t=null==e?void 0:e.backendUrl)&&void 0!==t?t:o.ANALYTICS_BACKEND_BASE_URL,"/analytics/error")}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!1,configurable:!0}),e.copyErrorDetailTruncateStringsAndUrls=function(e,t,n){var a,r,o=this;return i(i({},e),{message:null===(a=e.message)||void 0===a?void 0:a.substr(0,t),data:this.copyErrorDataTruncateStrings(e.data,t),httpRequests:null===(r=e.httpRequests)||void 0===r?void 0:r.map((function(e){return o.copyHttpRequestTruncateUrls(e,n)}))})},e.copyHttpRequestTruncateUrls=function(e,t){var n,a;return i(i({},e),{url:null===(n=e.url)||void 0===n?void 0:n.substr(0,t),lastRedirectLocation:null===(a=e.lastRedirectLocation)||void 0===a?void 0:a.substr(0,t)})},e.copyErrorDataTruncateStrings=function(e,t){var n,a;return i(i({},e),{exceptionMessage:null===(n=e.exceptionMessage)||void 0===n?void 0:n.substr(0,t),additionalData:null===(a=e.additionalData)||void 0===a?void 0:a.substr(0,t)})},e.copyErrorDetailTruncateHttpRequests=function(e,t){var n;return i(i({},e),{httpRequests:null===(n=e.httpRequests)||void 0===n?void 0:n.slice(-t)})},e.prototype.limitHttpRequestsOfQueuedErrorDetails=function(t){var n=this;this._queue.forEach((function(i,a){n._queue[a]=e.copyErrorDetailTruncateHttpRequests(i,t)}))},e.prototype.send=function(t){var n=e.copyErrorDetailTruncateStringsAndUrls(t,e.MAX_STRING_LENGTH,e.MAX_URL_LENGTH);this.enabled?(0,r.post)(this.backendUrl,n,(function(){})):this._queue.push(n)},e.prototype.flush=function(){for(var e=a([],this._queue,!0),t=e.shift();(0,s.isNotNullish)(t);)this.removeFromQueue(t),this.send(t),t=e.shift()},e.prototype.clear=function(){this._queue.splice(0,this._queue.length)},e.prototype.removeFromQueue=function(e){var t=this._queue.findIndex((function(t){return t===e}));t>=0&&this._queue.splice(t,1)},e.MAX_URL_LENGTH=450,e.MAX_STRING_LENGTH=400,e}();t.ErrorDetailBackend=l},7721:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalErrorReportingLimiter=void 0;var n=function(){function e(){this._currentErrorCount=0}return e.prototype.shouldReportError=function(t,n){return t===this._lastErrorCode&&n===this._lastErrorSeverity?(this._currentErrorCount++,this._currentErrorCount<=e.MAX_IDENTICAL_ERROR_REPORTING):(this._lastErrorCode=t,this._lastErrorSeverity=n,this._currentErrorCount=1,!0)},e.prototype.reset=function(){this._lastErrorCode=void 0,this._lastErrorSeverity=void 0,this._currentErrorCount=0},e.MAX_IDENTICAL_ERROR_REPORTING=5,e}();t.IdenticalErrorReportingLimiter=n},7881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpRequestTracking=void 0;var i=n(1916),a=n(3129),r=function(){function e(t){var n=this;this.subscribables=t,this._maxRequests=e.DEFAULT_MAX_REQUESTS,this._httpRequestQueue=new a.Queue,this.onDownloadFinishedHandler=function(e){try{n.addRequest(e.httpRequest)}catch(e){i.logger.error("HttpRequestTracking.onDownloadFinished: Error in handler",e)}},t.forEach((function(e){return e.subscribe(n.onDownloadFinishedHandler)}))}return Object.defineProperty(e.prototype,"maxRequests",{get:function(){return this._maxRequests},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"httpRequests",{get:function(){return this._httpRequestQueue.items},enumerable:!1,configurable:!0}),e.prototype.configure=function(e){this._maxRequests=e,this._httpRequestQueue.limit(e)},e.prototype.disable=function(){var e=this;this.subscribables.forEach((function(t){return t.unsubscribe(e.onDownloadFinishedHandler)})),this._httpRequestQueue.clear()},e.prototype.reset=function(){this._httpRequestQueue.clear()},e.prototype.addRequest=function(e){this._httpRequestQueue.offer(e),this._httpRequestQueue.limit(this._maxRequests)},e.DEFAULT_MAX_REQUESTS=10,e}();t.HttpRequestTracking=r},7906:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ROUTING_URL_PARAM_VALUE_SSAI=t.ROUTING_URL_PARAM=t.SSAI_RELATED_SAMPLE_MARKER=void 0,t.isSsaiRelatedSample=function(e){if(e[t.SSAI_RELATED_SAMPLE_MARKER])return delete e[t.SSAI_RELATED_SAMPLE_MARKER],!0;if(2===e.adType)return!0;return!1},t.appendSsaiRoutingParam=function(e){return"".concat(e,"?").concat(t.ROUTING_URL_PARAM,"=").concat(t.ROUTING_URL_PARAM_VALUE_SSAI)},t.createErrorAdSample=function(e,t){return o({playbackSample:e,currentAdImpressionId:t.currentAdImpressionId,adIndex:t.adIndex,currentAdMetadata:t.currentAdMetadata,quartile:void 0,quartileMetadata:void 0,errorCode:t.analyticsError.code,errorMessage:t.analyticsError.message,errorSeverity:t.analyticsError.severity,timeSinceAdStartedInMs:t.timeSinceAdStartedInMs})},t.createStartedAdSample=function(e,t){return o({playbackSample:e,currentAdImpressionId:t.currentAdImpressionId,adIndex:t.adIndex,currentAdMetadata:t.currentAdMetadata,quartile:"started",quartileMetadata:void 0,errorCode:void 0,errorMessage:void 0,errorSeverity:void 0,timeSinceAdStartedInMs:void 0})},t.createQuartileAdSample=function(e,t){return o({playbackSample:e,currentAdImpressionId:t.currentAdImpressionId,adIndex:t.adIndex,currentAdMetadata:t.currentAdMetadata,quartile:t.quartile,quartileMetadata:t.quartileMetadata,timeSinceAdStartedInMs:t.timeSinceAdStartedInMs,errorCode:void 0,errorMessage:void 0,errorSeverity:void 0})},t.getCurrentMonotonicTimestampInMs=s,t.getMonotonicTimestampInMsSince=function(e){if((0,r.isNullish)(e))return;return s()-e};var a=n(5529),r=n(5063);function o(e){var t,n=e.playbackSample,o=e.currentAdImpressionId,s=e.adIndex,l=e.currentAdMetadata,u=e.quartile,c=e.quartileMetadata,d=e.errorCode,E=e.errorMessage,p=e.errorSeverity,h=e.timeSinceAdStartedInMs,v=i(i({},{audioBitrate:null==(t=n)?void 0:t.audioBitrate,analyticsVersion:null==t?void 0:t.analyticsVersion,adPlaybackHeight:null==t?void 0:t.videoPlaybackHeight,adPlaybackWidth:null==t?void 0:t.videoPlaybackWidth,cdnProvider:null==t?void 0:t.cdnProvider,customData1:null==t?void 0:t.customData1,customData2:null==t?void 0:t.customData2,customData3:null==t?void 0:t.customData3,customData4:null==t?void 0:t.customData4,customData5:null==t?void 0:t.customData5,customData6:null==t?void 0:t.customData6,customData7:null==t?void 0:t.customData7,customData8:null==t?void 0:t.customData8,customData9:null==t?void 0:t.customData9,customData10:null==t?void 0:t.customData10,customData11:null==t?void 0:t.customData11,customData12:null==t?void 0:t.customData12,customData13:null==t?void 0:t.customData13,customData14:null==t?void 0:t.customData14,customData15:null==t?void 0:t.customData15,customData16:null==t?void 0:t.customData16,customData17:null==t?void 0:t.customData17,customData18:null==t?void 0:t.customData18,customData19:null==t?void 0:t.customData19,customData20:null==t?void 0:t.customData20,customData21:null==t?void 0:t.customData21,customData22:null==t?void 0:t.customData22,customData23:null==t?void 0:t.customData23,customData24:null==t?void 0:t.customData24,customData25:null==t?void 0:t.customData25,customData26:null==t?void 0:t.customData26,customData27:null==t?void 0:t.customData27,customData28:null==t?void 0:t.customData28,customData29:null==t?void 0:t.customData29,customData30:null==t?void 0:t.customData30,customData31:null==t?void 0:t.customData31,customData32:null==t?void 0:t.customData32,customData33:null==t?void 0:t.customData33,customData34:null==t?void 0:t.customData34,customData35:null==t?void 0:t.customData35,customData36:null==t?void 0:t.customData36,customData37:null==t?void 0:t.customData37,customData38:null==t?void 0:t.customData38,customData39:null==t?void 0:t.customData39,customData40:null==t?void 0:t.customData40,customData41:null==t?void 0:t.customData41,customData42:null==t?void 0:t.customData42,customData43:null==t?void 0:t.customData43,customData44:null==t?void 0:t.customData44,customData45:null==t?void 0:t.customData45,customData46:null==t?void 0:t.customData46,customData47:null==t?void 0:t.customData47,customData48:null==t?void 0:t.customData48,customData49:null==t?void 0:t.customData49,customData50:null==t?void 0:t.customData50,customUserId:null==t?void 0:t.customUserId,domain:null==t?void 0:t.domain,experimentName:null==t?void 0:t.experimentName,key:null==t?void 0:t.key,language:null==t?void 0:t.language,path:null==t?void 0:t.path,platform:null==t?void 0:t.platform,player:null==t?void 0:t.player,playerKey:null==t?void 0:t.playerKey,playerTech:null==t?void 0:t.playerTech,size:null==t?void 0:t.size,screenHeight:null==t?void 0:t.screenHeight,screenWidth:null==t?void 0:t.screenWidth,streamFormat:null==t?void 0:t.streamFormat,userAgent:null==t?void 0:t.userAgent,userId:null==t?void 0:t.userId,version:null==t?void 0:t.version,videoBitrate:null==t?void 0:t.videoBitrate,videoId:null==t?void 0:t.videoId,videoImpressionId:null==t?void 0:t.impressionId,videoTitle:null==t?void 0:t.videoTitle,videoWindowHeight:null==t?void 0:t.videoWindowHeight,videoWindowWidth:null==t?void 0:t.videoWindowWidth}),{adId:null==l?void 0:l.adId,adImpressionId:o,adIndex:s,adPosition:null==l?void 0:l.adPosition,adSystem:null==l?void 0:l.adSystem,adType:2,errorCode:d,errorMessage:E,errorSeverity:p,time:Date.now(),timeSinceAdStartedInMs:h});switch(u){case"started":v.started=1;break;case"first":v.quartile1=1,v.quartile1FailedBeaconUrl=null==c?void 0:c.failedBeaconUrl;break;case"midpoint":v.midpoint=1,v.midpointFailedBeaconUrl=null==c?void 0:c.failedBeaconUrl;break;case"third":v.quartile3=1,v.quartile3FailedBeaconUrl=null==c?void 0:c.failedBeaconUrl;break;case"completed":v.completed=1,v.completedFailedBeaconUrl=null==c?void 0:c.failedBeaconUrl}var f=null==l?void 0:l.customData;return(0,r.isNotNullish)(f)&&a.customDataValuesKeys.forEach((function(e){f[e]&&(v[e]=f[e])})),v}function s(){var e;return(0,r.isNullish)(null===(e=window.performance)||void 0===e?void 0:e.now)||!(0,r.isFunction)(window.performance.now)?Date.now():Math.floor(performance.now())}t.SSAI_RELATED_SAMPLE_MARKER="triggeredBySsai",t.ROUTING_URL_PARAM="routingParam",t.ROUTING_URL_PARAM_VALUE_SSAI="ssai"},7922:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HLS_PLAYER_EVENT=t.PlaylistLevelType=void 0,function(e){e.AUDIO="audio",e.MAIN="main",e.SUBTITLE="subtitle"}(n||(t.PlaylistLevelType=n={})),t.HLS_PLAYER_EVENT={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_DETACHING:"hlsMediaDetaching",MANIFEST_LOADING:"hlsManifestLoading",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",DESTROYING:"hlsDestroying",ERROR:"hlsError"}},8253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logStateMachineTransition=t.logMissingCallbackWarning=t.customStateMachineErrorCallback=t.whileIn=t.on=void 0,t.getAllStates=s,t.getAllStatesBut=function(e,t){return s(t).filter((function(t){return e.indexOf(t)<0}))};var i=n(2595),a=n(1916),r=n(2974),o=n(5063);t.on=function(e){return{stayIn:function(t){return{name:e,from:t,to:t}}}};t.whileIn=function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.map((function(t){return{name:t,from:e,to:e}}))};return{runEventCallbacksFor:t,passOver:t}};t.customStateMachineErrorCallback=function(e,t,n,r,s,l,u){var c='StateMachine ignored event "'.concat(e,'", ').concat(l),d={eventName:e,from:t,to:n,args:(0,o.isNotNullish)(r)?JSON.stringify(r):void 0,errorCode:s,errorMessage:l};s!==i.Error.INVALID_TRANSITION?a.logger.error(c,d):a.logger.log(c,d)};t.logMissingCallbackWarning=function(e,t){(void 0===t&&(t=[]),(0,o.isNullish)(e))||(0,o.isNullish)(t.find((function(t){return e===t})))&&a.logger.warn("Could not find StateMachine callback function for "+e)};function s(e){return(0,r.objectValues)(e)}t.logStateMachineTransition=function(e,t,n,i){"ENTER"===e?a.logger.log("[ENTER] ".concat((0,a.padRight)(i,20)," EVENT: ").concat((0,a.padRight)(t,20)," from ").concat((0,a.padRight)(n,20))):a.logger.log("[LEAVE] ".concat((0,a.padRight)(n,20)," EVENT: ").concat((0,a.padRight)(t,20)," to ").concat((0,a.padRight)(i,20)))}},8331:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAnalyticsConfig=function(e){if((0,s.isNullish)(e))return{};o.isBoolean(e.isLive)||(e.isLive=void 0);(0,s.isNotNullish)(e.config)&&(0,s.isNotNullish)(e.config.errorTransformerCallback)&&((0,s.isFunction)(e.config.errorTransformerCallback.transform)||(e.config.errorTransformerCallback=void 0));return e},t.guardConfigChangeAgainstMissingTitle=function(e,t){if((0,s.isNullish)(e)||(0,s.isNullish)(t))return;e.title&&(0,r.isBlank)(t.title)&&a.logger.error("The new analytics configuration does not contain the field `title`")},t.guardConfigChangeAgainstMissingIsLive=function(e,t){if((0,s.isNullish)(e)||(0,s.isNullish)(t))return;e.isLive&&(0,s.isNullish)(t.isLive)&&a.logger.error("The new analytics configuration does not contain the field `isLive`. It will default to `false` which might be unintended? Once stream playback information is available the type will be populated.")},t.guardAgainstDuplicatedUserId=function(e){if((0,s.isNullish)(e))return;(0,s.isNotNullish)(e.customUserId)&&(0,s.isNotNullish)(e.userId)&&a.logger.warn("Configuration Warning: \nCustomUserId and UserId are set in the config \nValue of UserId will be used in sample \nPlease only use one configuration field to set your userId")},t.getDeviceInformationFromAnalyticsConfig=function(e){if((0,s.isNullish)(e))return;var t={};(0,r.isValidString)(e.deviceType)&&!(0,r.isBlank)(e.deviceType)&&(t.model=e.deviceType);(0,r.isValidString)(e.deviceClass)&&!(0,r.isBlank)(e.deviceClass)&&(t.deviceClass=e.deviceClass);if(0===Object.keys(t).length)return;return t},t.getDomainFromAnalyticsConfig=function(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.origin)&&void 0!==n?n:o.sanitizePath(window.location.hostname)},t.mergeAnalyticsConfig=function(e,t){var n=function(e){var t=["cdnProvider","videoId","title","isLive","experimentName"],n=/customData\d{1,2}$/g;for(var i in e)((0,s.isNotNullish)(i.match(n))||t.includes(i))&&delete e[i];return e}(e),a=function(e,t){if((0,s.isNotNullish)(t))return i(i(i({},e),{enabled:!0}),t);return null!=e?e:{}}(e.config,t.config);return i(i(i({},n),t),{config:a})};var a=n(1916),r=n(1820),o=n(5063),s=n(5063)},8421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebOSTVModelName=function(){var e,t;try{var n=(null===(e=window.webOSSystem)||void 0===e?void 0:e.deviceInfo)?JSON.parse(window.webOSSystem.deviceInfo):(null===(t=window.PalmSystem)||void 0===t?void 0:t.deviceInfo)&&JSON.parse(window.PalmSystem.deviceInfo);return(0,i.isValidString)(null==n?void 0:n.modelName)&&!(0,i.isBlank)(null==n?void 0:n.modelName)?n.modelName:void 0}catch(e){return}},t.hasWindowWebOSApi=function(){return void 0!==window.webOSSystem||void 0!==window.PalmSystem};var i=n(1820)},8510:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.videoElement=e,this.previousTotalDroppedFrames=0}return e.prototype.getDroppedFrames=function(){if(null==this.videoElement)return 0;if(void 0===this.videoElement.getVideoPlaybackQuality)return 0;var e=this.videoElement.getVideoPlaybackQuality().droppedVideoFrames,t=e-this.previousTotalDroppedFrames;return this.previousTotalDroppedFrames=e,t},e.prototype.reset=function(){this.previousTotalDroppedFrames=0},e}();t.default=n},8525:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerSize=void 0,function(e){e.Fullscreen="FULLSCREEN",e.Window="WINDOW"}(n||(t.PlayerSize=n={}))},8676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentTrackerAdapter=void 0;var i=n(5063),a=function(){function e(e,t){var n=this;this.handleSegmentPlaybackEvent=function(e){n.segmentTracker.removeSegment(e.url)},this.segmentTracker=t,e.on(e.exports.PlayerEvent.DownloadFinished,(function(e){return n.handleOnDownloadFinishEvent(e)})),e.on(e.exports.PlayerEvent.SegmentPlayback,(function(e){return n.handleSegmentPlaybackEvent(e)}))}return e.prototype.getSegmentTracker=function(){return this.segmentTracker},e.prototype.handleOnDownloadFinishEvent=function(e){if(0===e.downloadType.indexOf("media/video")){var t=e.url,n={name:i.getURLResourceName(t),url:t,timestamp:e.timestamp};this.segmentTracker.addSegment(n)}},e}();t.SegmentTrackerAdapter=a},8917:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AdAnalytics=void 0;var a,r=n(5791),o=n(7232),s=n(4439),l=n(1916),u=n(5063),c=n(2982),d=n(4926),E=n(3612);!function(e){e.FIRST_QUARTILE="firstQuartile",e.MIDPOINT="midpoint",e.THIRD_QUARTILE="thirdQuartile"}(a||(a={}));var p=function(){function e(e,t){var n=this;this.onBeforeUnLoadEvent=!1,this.adManifestLoadedEvents=[],this.isPlaying=!1,this.adPodPosition=0,this.analytics=e,this.adapter=t,this.adapter.adCallbacks.onAdStarted=function(e){return n.onAdStarted(e)},this.adapter.adCallbacks.onAdFinished=function(e){return n.onAdFinished(e)},this.adapter.adCallbacks.onAdBreakStarted=function(e){return n.onAdBreakStarted(e)},this.adapter.adCallbacks.onAdBreakFinished=function(e){return n.onAdBreakFinished(e)},this.adapter.adCallbacks.onAdClicked=function(e){return n.onAdClicked(e)},this.adapter.adCallbacks.onAdError=function(e){return n.onAdError(e)},this.adapter.adCallbacks.onAdManifestLoaded=function(e){return n.onAdManifestLoaded(e)},this.adapter.adCallbacks.onPlay=function(){return n.onPlay()},this.adapter.adCallbacks.onPause=function(){return n.onPause()},this.adapter.adCallbacks.onBeforeUnload=function(){return n.onBeforeUnload()},this.adapter.adCallbacks.onAdSkipped=function(e){return n.onAdSkipped(e)},this.adapter.adCallbacks.onAdQuartile=function(e){return n.onAdQuartile(e)},this.viewportTracker=new E.ViewportTracker(this.adapter.getContainer(),(function(){return n.onIntersectionChanged()}),.5)}return e.prototype.release=function(){this.clearCurrentTimeInterval(),this.viewportTracker.dispose()},e.prototype.onIntersectionChanged=function(){this.activeAdSample&&(this.isContainerInViewport()?this.enterViewportTimestamp=u.getCurrentTimestamp():this.enterViewportTimestamp&&(this.activeAdSample.timeInViewport=(this.activeAdSample.timeInViewport||0)+u.getCurrentTimestamp()-this.enterViewportTimestamp))},e.prototype.isContainerInViewport=function(){return!this.viewportTracker||this.viewportTracker.isInViewport()},e.prototype.onPlay=function(){if(this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample){var e=u.getCurrentTimestamp();this.beginPlayingTimestamp=e,this.enterViewportTimestamp=e,this.isPlaying=!0}},e.prototype.onPause=function(){this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample&&(this.updatePlayingTime(this.activeAdSample),this.isPlaying=!1)},e.prototype.onAdManifestLoaded=function(e){var t=e.adConfig;t&&t.tag&&"vmap"===t.tag.type?this.sendAnalyticsRequest(new o.AdBreakSample(e.adConfig,e)):e.adBreak&&this.adManifestLoadedEvents.push(e)},e.prototype.onAdBreakStarted=function(e){this.adPodPosition=0,this.activeAdBreakSample=new o.AdBreakSample(e.adBreak,this.getAdManifestLoadedEvent(e.adBreak)),this.adStartupTimestamp=u.getCurrentTimestamp()},e.prototype.onAdBreakFinished=function(e){this.resetActiveAd(),this.activeAdBreakSample=void 0},e.prototype.onAdStarted=function(e){e.ad.isLinear&&(this.resetActiveAd(),this.activeAdSample=new s.AdSample(e.ad),this.currentTime=void 0,this.activeAdSample.adStartupTime=this.adStartupTimestamp?u.getCurrentTimestamp()-this.adStartupTimestamp:void 0,this.startAd(this.activeAdSample))},e.prototype.onAdFinished=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=i({},this.activeAdSample);t.completed=1,this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.adDuration)}},e.prototype.onAdSkipped=function(e){if(this.activeAdBreakSample&&this.activeAdSample){var t=i({},this.activeAdSample);t.skipped=1,t.skipPosition=this.currentTime,t.skipPercentage=u.calculatePercentage(this.activeAdSample.skipPosition,this.activeAdSample.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.skipPosition)}},e.prototype.onAdError=function(e){var t,n,i=this,a=e.data||{adBreak:void 0,adConfig:void 0,code:void 0,message:void 0},r=a.adConfig,s=a.adBreak,l=a.code,c=a.message,d=new o.AdBreakSample(s||r,s?this.getAdManifestLoadedEvent(s):void 0),E=this.analytics.transformError({code:l||e.code,message:c||e.name,severity:"CRITICAL"},e);d.errorCode=E.code,d.errorData=JSON.stringify(e.data),d.errorMessage=E.message,d.errorSeverity=E.severity,this.activeAdSample&&s&&s.ads&&s.ads.includes((function(e){return e.id===i.activeAdSample.adId}))&&(n=(t=this.activeAdSample).errorPosition=this.currentTime,t.errorPercentage=u.calculatePercentage(t.errorPosition,t.adDuration)),this.completeAd(d,t,n)},e.prototype.onAdClicked=function(e){this.activeAdSample&&(this.activeAdSample.adClickthroughUrl=e.clickThroughUrl,this.activeAdSample.clicked=1,this.activeAdSample.clickPosition=this.currentTime,this.activeAdSample.clickPercentage=u.calculatePercentage(this.activeAdSample.clickPosition,this.activeAdSample.adDuration))},e.prototype.onAdQuartile=function(e){this.activeAdSample&&(e.quartile===a.FIRST_QUARTILE?this.activeAdSample.quartile1=1:e.quartile===a.MIDPOINT?this.activeAdSample.midpoint=1:e.quartile===a.THIRD_QUARTILE&&(this.activeAdSample.quartile3=1))},e.prototype.onBeforeUnload=function(){if(!this.onBeforeUnLoadEvent&&(this.onBeforeUnLoadEvent=!0,this.activeAdSample&&this.activeAdBreakSample)){var e=i({},this.activeAdSample);e.closed=1,e.closePosition=this.currentTime,e.closePercentage=u.calculatePercentage(e.closePosition,e.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,e,e.closePosition)}},e.prototype.createNewAdAnalyticsSample=function(e){var t=this.adapter.getAdModuleInfo();return i(i({},new r.AdAnalyticsSample(e)),{analyticsVersion:d.VERSION,adModule:t.name,adModuleVersion:t.version,playerStartupTime:this.analytics.playerStartupTime,pageLoadTime:this.analytics.pageLoadTime,autoplay:this.analytics.autoplay,pageLoadType:u.getPageLoadType()})},e.prototype.getAdManifestLoadedEvent=function(e){if(e)return this.adManifestLoadedEvents.find((function(t){return t.adBreak&&t.adBreak.id===e.id}))},e.prototype.sendAnalyticsRequest=function(e,t){var n=i(i(i({},this.createNewAdAnalyticsSample(this.analytics.sample)),e),t||new s.AdSample);n.time=u.getCurrentTimestamp(),n.adImpressionId=(0,c.generateUUID)(),n.percentageInViewport=u.calculatePercentage(n.timeInViewport,n.timePlayed),this.analytics.backend.sendAdRequest(n)},e.prototype.updatePlayingTime=function(e){var t=u.getCurrentTimestamp();this.beginPlayingTimestamp&&this.isPlaying&&(void 0!==e.timePlayed&&(e.timePlayed+=t-this.beginPlayingTimestamp),this.isContainerInViewport()&&this.enterViewportTimestamp&&void 0!==e.timeInViewport&&(e.timeInViewport+=t-this.enterViewportTimestamp))},e.prototype.startAd=function(t){var n=this;t.started=1,t.timePlayed=0,t.timeInViewport=0,t.adPodPosition=this.adPodPosition;var i=u.getCurrentTimestamp();this.beginPlayingTimestamp=i,this.enterViewportTimestamp=this.isContainerInViewport()?i:void 0,this.isPlaying=!0,this.currentTime=0,this.adPodPosition++,this.currentTimeInterval=window.setInterval((function(){try{t&&void 0!==t.adDuration&&t.adDuration>0&&n.adapter.isLinearAdActive()&&(n.currentTime=u.calculateTime(Math.max(n.adapter.currentTime(),0)))}catch(e){l.logger.log("AdStarted monitoring interval failed and got cleared",e),n.resetActiveAd()}}),e.TIMEOUT_CURRENT_TIME_INTERVAL)},e.prototype.completeAd=function(e,t,n){void 0===t&&(t=new s.AdSample),t.exitPosition=n,t.playPercentage=u.calculatePercentage(t.exitPosition,t.adDuration),this.adStartupTimestamp=u.getCurrentTimestamp(),this.updatePlayingTime(t),this.isPlaying=!1,this.sendAnalyticsRequest(e,t)},e.prototype.resetActiveAd=function(){this.clearCurrentTimeInterval(),this.activeAdSample=void 0},e.prototype.clearCurrentTimeInterval=function(){window.clearInterval(this.currentTimeInterval),delete this.currentTime},e.MODULE_NAME="ads",e.TIMEOUT_CURRENT_TIME_INTERVAL=100,e}();t.AdAnalytics=p},8918:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSsaiEngagementErrorData=function(e){return"error"===e.type},t.isSsaiEngagementQuartileData=function(e){return"quartile"===e.type},t.isSsaiEngagementStartedData=function(e){return"started"===e.type}},9027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowEventListener=void 0;var i,a=n(2361),r=n(9653);!function(e){e[e.IDLE=0]="IDLE",e[e.UNLOADED=1]="UNLOADED"}(i||(i={}));var o=function(){function e(e,t,n){var o=this;this.windowEventTracker=e,this.dispatcher=t,this.playerContext=n,this.state=i.IDLE,this.onPageUnload=function(){o.state==i.IDLE&&(o.dispatcher.eventCallback(a.Event.UNLOAD,{currentTime:o.playerContext.position}),o.state=i.UNLOADED,r.default.RELEASE.trigger())}}return e.prototype.startMonitoring=function(){this.windowEventTracker.addEventListener("beforeunload",this.onPageUnload),this.windowEventTracker.addEventListener("unload",this.onPageUnload)},e}();t.WindowEventListener=o},9557:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorDetailTracking=void 0;var o=n(1916),s=n(5063),l=n(4926),u=function(e){function t(t,n,i,a){var u=e.call(this)||this;return u.settingsProvider=t,u.backend=n,u.subscribables=i,u.httpRequestTracking=a,u.errorIndex=0,u.onErrorHandler=function(e){var t,n;try{if(!u.isEnabled)return;var i=null===(t=u.httpRequestTracking)||void 0===t?void 0:t.httpRequests,a=(0,s.isNullish)(i)?void 0:r([],i,!0),c=u.errorIndex;u.errorIndex++;var d={platform:"web",licenseKey:u.settingsProvider.licenseKey,domain:u.settingsProvider.domain,impressionId:u.settingsProvider.impressionId,analyticsVersion:l.VERSION,errorId:c,timestamp:(0,s.getCurrentTimestamp)(),code:e.code,message:e.message,data:null!==(n=e.errorData)&&void 0!==n?n:{additionalData:void 0,exceptionMessage:void 0,exceptionStacktrace:void 0},httpRequests:a,severity:e.severity};o.logger.log("ErrorDetailTracking.onError: ".concat(JSON.stringify(d))),u.backend.send(d)}catch(e){o.logger.error("ErrorDetailTracking.onError: Error in handler",e)}},i.forEach((function(e){return e.subscribe(u.onErrorHandler)})),u}return a(t,e),t.prototype.reset=function(){var e;null===(e=this.httpRequestTracking)||void 0===e||e.reset(),this.errorIndex=0},t.prototype.enabled=function(){this.backend.enabled=!0,this.backend.flush()},t.prototype.disabled=function(){var e,t=this;this.errorIndex=0,null===(e=this.httpRequestTracking)||void 0===e||e.disable(),this.backend.clear(),this.subscribables.forEach((function(e){return e.unsubscribe(t.onErrorHandler)}))},t.prototype.configured=function(e,t){var n,i,a=Math.max(null!==(n=null==t?void 0:t.numberOfHttpRequests)&&void 0!==n?n:0,0);null===(i=this.httpRequestTracking)||void 0===i||i.configure(a),this.backend.limitHttpRequestsOfQueuedErrorDetails(a)},t.prototype.extractConfig=function(e){return e.errorDetails},t}(n(348).Feature);t.ErrorDetailTracking=u},9566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HlsAdapter=void 0;var i=n(4350),a=n(8331),r=n(1916),o=n(2108),s=n(4926),l=n(1601),u=function(){function e(e,t,n){if((0,o.hasPlayerAlreadyBeenAugmented)(t))r.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,o.markPlayerInstanceAsAugmented)(t);var s=(0,a.sanitizeAnalyticsConfig)(e);(0,a.guardAgainstDuplicatedUserId)(s),this.internalAdapter=new l.HlsInternalAdapter(t,n),this.analytics=i.Analytics.create(s,this.internalAdapter)}}return Object.defineProperty(e.prototype,"version",{get:function(){return s.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,o.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=s.VERSION,e}();t.HlsAdapter=u},9653:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i="RELEASE",a=function(){function e(){var e;this.observer=((e={})[i]=[],e)}return e.prototype.subscribe=function(e,t){this.observer[e].push(t)},e.prototype.trigger=function(e){this.observer[e].forEach((function(e){e()}))},e}(),r=new a,o={RELEASE:(n=i,{subscribe:function(e){r.subscribe(n,e)},trigger:function(){r.trigger(n)}})};t.default=o},9664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadSpeedMeter=void 0;var i=n(5766),a=n(3786),r=function(){function e(){this.measures=[]}return e.prototype.reset=function(){this.measures=[]},e.prototype.addMeasurement=function(e){if(!(e.httpStatus>=400)){var t=new a.Measure(e),n=i.Converter.bitsToBytes(3e8);t.speed>=n||this.measures.push(t)}},e.prototype.getInfo=function(){return{segmentsDownloadCount:this.measures.length,segmentsDownloadSize:this.measures.map((function(e){return e.size})).reduce(this.add,0),segmentsDownloadTime:Math.ceil(1e3*this.totalTime()),avgDownloadSpeed:this.avgSpeed(),minDownloadSpeed:this.minSpeed(),maxDownloadSpeed:this.maxSpeed(),avgTimeToFirstByte:this.avgTimeToFirstByte()}},e.prototype.add=function(e,t){return e+t},e.prototype.avgSpeed=function(){if(0===this.measures.length)return 0;var e=this.speeds().reduce((function(e,t){return e+t}),0),t=this.measures.length;return this.bytePerSecondToBitPerSecond(e/t)},e.prototype.bytePerSecondToBitPerSecond=function(e){return i.Converter.bytesToBits(e)},e.prototype.minSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.min.apply(Math,this.speeds()))},e.prototype.speeds=function(){return this.measures.map((function(e){return e.speed}))},e.prototype.maxSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.max.apply(Math,this.speeds()))},e.prototype.totalTime=function(){return 0===this.measures.length?0:this.measures.reduce((function(e,t){return e+t.duration}),0)},e.prototype.avgTimeToFirstByte=function(){if(0===this.measures.length)return 0;var e=this.measures.reduce((function(e,t){return e+1e3*t.timeToFirstByte}),0)/this.measures.length;return Math.ceil(e)},e}();t.DownloadSpeedMeter=r},9796:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4649),a=n(4649),r=n(5063),o=function(){function e(e){void 0===e&&(e=i.ANALYTICS_QUALITY_CHANGE_COUNT_THRESHOLD),this.qualityChangeThreshold=e,this.qualityChangeCount=0,this.previousVideoBitrate=0,this.previousAudioBitrate=0,this.startupHasFinished=!1}return e.prototype.resetValues=function(){this.qualityChangeCount=0,this.previousAudioBitrate=0,this.previousVideoBitrate=0,this.startupHasFinished=!1,this.stopResetInterval()},e.prototype.isQualityChangeEventEnabled=function(){return this.qualityChangeCount<=this.qualityChangeThreshold},e.prototype.increaseCounter=function(){this.qualityChangeCount++},e.prototype.shouldAllowVideoQualityChange=function(e){return this.startupHasFinished&&(0,r.isNotNullish)(e)&&!isNaN(e)&&0!==this.previousVideoBitrate&&this.previousVideoBitrate!==e&&this.isQualityChangeEventEnabled()},e.prototype.setVideoBitrate=function(e){this.startupHasFinished&&(this.previousVideoBitrate=e)},e.prototype.setStartupHasFinished=function(){this.startupHasFinished=!0},e.prototype.shouldAllowAudioQualityChange=function(e){return this.startupHasFinished&&(0,r.isNotNullish)(e)&&!isNaN(e)&&0!==this.previousAudioBitrate&&this.previousAudioBitrate!==e&&this.isQualityChangeEventEnabled()},e.prototype.setAudioBitrate=function(e){this.startupHasFinished&&(this.previousAudioBitrate=e)},e.prototype.startResetInterval=function(){var e=this;void 0===this.resetIntervalId&&(this.resetIntervalId=window.setInterval((function(){e.resetCounter()}),a.ANALYTICS_QUALITY_CHANGE_COUNT_RESET_INTERVAL))},e.prototype.stopResetInterval=function(){void 0!==this.resetIntervalId&&(window.clearInterval(this.resetIntervalId),delete this.resetIntervalId)},e.prototype.resetCounter=function(){this.qualityChangeCount=0},e}();t.default=o},9810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackService=void 0;var i=n(2361),a=n(3003),r=function(){function e(e,t,n,i){this.dispatcher=e,this.playerContext=t,this.pauseDispatcher=n,this.qualityChangeService=i,this.ignorePause=!1}return e.prototype.onStartupPlaying=function(){var e=this;this.ignorePause=!0,setTimeout((function(){e.ignorePause=!1}),100)},e.prototype.onPause=function(){this.ignorePause||this.pauseDispatcher.schedulePauseEvent()},e.prototype.onPlaying=function(){this.pauseDispatcher.cancelPause(),this.playing()},e.prototype.onRebuffering=function(){this.pauseDispatcher.cancelPause(),this.startBuffering()},e.prototype.onQualityChange=function(e){this.qualityChange(e)},e.prototype.onSeek=function(){this.seek()},e.prototype.onSeeked=function(){this.seeked()},e.prototype.startBuffering=function(){var e=this.playerContext.position;this.dispatcher.eventCallback(i.Event.START_BUFFERING,{currentTime:e})},e.prototype.playing=function(){var e=this.playerContext.position;this.dispatcher.eventCallback(i.Event.PLAYING,{currentTime:e})},e.prototype.qualityChange=function(e){if(this.qualityChangeService.shouldAllowVideoQualityChange(e.bitrate)){this.qualityChangeService.setVideoBitrate(e.bitrate);var t=this.playerContext.position;this.dispatcher.eventCallback(i.Event.VIDEO_CHANGE,{currentTime:t})}else this.qualityChangeService.setVideoBitrate(e.bitrate)},e.prototype.seek=function(){if(!this.playerContext.isLive){this.pauseDispatcher.cancelPause();var e=this.playerContext.position;this.dispatcher.eventCallback(i.Event.SEEK,{currentTime:e})}},e.prototype.seeked=function(){if(!this.playerContext.isLive){this.pauseDispatcher.cancelPause();var e=this.playerContext.position;this.dispatcher.eventCallback(i.Event.SEEKED,{currentTime:e})}},e.create=function(t,n,i){return new e(t,n,new a.PauseEventDispatcher(t,n),i)},e}();t.PlaybackService=r},9876:function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonIVSInternalAdapter=void 0;var o=n(5611),s=n(2663),l=n(556),u=n(8525),c=n(7224),d=n(3413),E=n(5063),p=n(8510),h=n(2647),v=n(5440),f=n(2751),A=n(9653),m=n(9027),y=function(e){function t(t,n,i){var a=e.call(this,i)||this;a.player=t,a.sourceUrlProvider=n,a.supportsDeferredLicenseLoading=!1,a.getPlayerVersion=function(){return a.player.getVersion()},a.getPlayerName=function(){return l.Player.AMAZON_IVS},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return a.player.isAutoplay()},a.getDrmPerformanceInfo=function(){};var r=new s.HeartbeatService((function(){return a.player.getPosition()})),u=new o.AmazonIVSStateMachine(a.stateMachineCallbacks,r,a.opts);r.setListener(u),a.stateMachine=u;var c=new v.AmazonIVSPlayerContext(t);return a.listener=f.AmazonIVSPlayerEventListener.create(a,c,a.qualityChangeService),a.playerStatisticsProvider=new p.default(t.getHTMLVideoElement()),a.windowEventListener=new m.WindowEventListener(a.windowEventTracker,a,c),a}return a(t,e),t.prototype.initialize=function(e){var t=this;return this.listener.startMonitoring(this.player),this.windowEventListener.startMonitoring(),A.default.RELEASE.subscribe((function(){t.release()})),[]},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.player.getPosition()},enumerable:!1,configurable:!0}),t.prototype.resetSourceRelatedState=function(){this.drmPerformanceInfo=void 0,this.playerStatisticsProvider.reset()},t.prototype.getCurrentPlaybackInfo=function(){var e=this.player.getHTMLVideoElement();return r(r(r({droppedFrames:this.playerStatisticsProvider.getDroppedFrames(),isLive:this.player.getDuration()===1/0,isMuted:this.player.isMuted(),playerTech:this.getPlayerTech(),videoWindowWidth:e.clientWidth,videoWindowHeight:e.clientHeight,videoPlaybackHeight:e.videoHeight,videoPlaybackWidth:e.videoWidth,videoBitrate:this.player.getQuality().bitrate,videoDuration:(0,d.normalizeVideoDuration)(this.player.getDuration()),size:E.isVideoInFullscreen()?u.PlayerSize.Fullscreen:u.PlayerSize.Window},this.getVideoAndAudioCodecs()),this.getCommonPlaybackInfo()),{streamFormat:c.StreamTypes.hls,m3u8Url:this.sourceUrlProvider.m3u8Url})},t.prototype.sourceChange=function(e){throw new Error("Method not implemented.")},t.prototype.getVideoAndAudioCodecs=function(){var e=this.player.getQuality().codecs.split(",");return 2==e.length?{videoCodec:e[0],audioCodec:e[1]}:{}},t}(h.InternalAdapter);t.AmazonIVSInternalAdapter=y},9946:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PAGE_LOAD_TYPE=void 0,function(e){e[e.FOREGROUND=1]="FOREGROUND",e[e.BACKGROUND=2]="BACKGROUND"}(n||(t.PAGE_LOAD_TYPE=n={}))},9991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCodecInfo=t.getQualityLevelInfo=void 0;var i=n(5766),a=n(1820),r=n(5063);t.getQualityLevelInfo=function(e){if(function(e){return(0,r.isFunction)(e.getBitrateInfoListFor)&&(0,r.isFunction)(e.getQualityFor)}(e)){var t=e.getBitrateInfoListFor("video")[e.getQualityFor("video")];return(0,r.isNullish)(t)?null:{width:t.width,height:t.height,bitrate:t.bitrate}}var n=e.getCurrentRepresentationForType("video");return(0,r.isNullish)(n)?null:{width:n.width,height:n.height,bitrate:(0,r.isNumber)(n.bitrateInKbit)?i.Converter.kiloBitsToBits(n.bitrateInKbit):0}};t.getCodecInfo=function(e){var t,n,i,r,o=new RegExp(/codecs="(.*)"/);try{var s=null===(t=e.getCurrentTrackFor("video"))||void 0===t?void 0:t.codec;if((0,a.isValidString)(s)&&!(0,a.isBlank)(s))i=null==(l=o.exec(s))?void 0:l[1]}catch(e){i=void 0}try{var l,u=null===(n=e.getCurrentTrackFor("audio"))||void 0===n?void 0:n.codec;if((0,a.isValidString)(u)&&!(0,a.isBlank)(u))r=null==(l=o.exec(u))?void 0:l[1]}catch(e){r=void 0}return{videoCodec:i,audioCodec:r}}},9999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashjsAdapter=void 0;var i=n(4350),a=n(8331),r=n(1916),o=n(2108),s=n(4926),l=n(236),u=function(){function e(e,t,n){if((0,o.hasPlayerAlreadyBeenAugmented)(t))r.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{(0,o.markPlayerInstanceAsAugmented)(t);var s=(0,a.sanitizeAnalyticsConfig)(e);(0,a.guardAgainstDuplicatedUserId)(s),this.internalAdapter=new l.DashjsInternalAdapter(t,n),this.analytics=i.Analytics.create(s,this.internalAdapter)}}return Object.defineProperty(e.prototype,"version",{get:function(){return s.VERSION},enumerable:!1,configurable:!0}),e.prototype.getCurrentImpressionId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getCurrentImpressionId()},e.prototype.getUserId=function(){if((0,o.isDefined)(this.analytics))return this.analytics.getUserId()},e.prototype.setCustomData=function(e){(0,o.isDefined)(this.internalAdapter)&&this.internalAdapter.setCustomData(e)},e.prototype.setCustomDataOnce=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.setCustomDataOnce(e)},e.prototype.sourceChange=function(e){(0,o.isDefined)(this.analytics)&&this.analytics.sourceChange(e)},e.version=s.VERSION,e}();t.DashjsAdapter=u}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}var i={};return function(){"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerModule=e.BitmovinPwxAnalyticsPackage=e.adapters=e.VideojsAdapter=e.ShakaAdapter=e.HlsAdapter=e.HTMLVideoElementAdapter=e.DashjsAdapter=e.CAFv3Adapter=e.Bitmovin8Adapter=e.AmazonIVSAdapter=e.CdnProviders=e.Players=e.version=void 0;var t=n(3703);Object.defineProperty(e,"AmazonIVSAdapter",{enumerable:!0,get:function(){return t.AmazonIVSAdapter}});var a=n(4679);Object.defineProperty(e,"Bitmovin8Adapter",{enumerable:!0,get:function(){return a.Bitmovin8Adapter}});var r=n(681);Object.defineProperty(e,"PlayerModule",{enumerable:!0,get:function(){return r.PlayerModule}});var o=n(2506);Object.defineProperty(e,"BitmovinPwxAnalyticsPackage",{enumerable:!0,get:function(){return o.BitmovinPwxAnalyticsPackage}});var s=n(5127);Object.defineProperty(e,"CAFv3Adapter",{enumerable:!0,get:function(){return s.CAFv3Adapter}});var l=n(9999);Object.defineProperty(e,"DashjsAdapter",{enumerable:!0,get:function(){return l.DashjsAdapter}});var u=n(9566);Object.defineProperty(e,"HlsAdapter",{enumerable:!0,get:function(){return u.HlsAdapter}});var c=n(701);Object.defineProperty(e,"HTMLVideoElementAdapter",{enumerable:!0,get:function(){return c.HTMLVideoElementAdapter}});var d=n(2063);Object.defineProperty(e,"ShakaAdapter",{enumerable:!0,get:function(){return d.ShakaAdapter}});var E=n(4179);Object.defineProperty(e,"VideojsAdapter",{enumerable:!0,get:function(){return E.VideojsAdapter}});var p=n(4355);Object.defineProperty(e,"CdnProviders",{enumerable:!0,get:function(){return p.CdnProvider}});var h=n(556);Object.defineProperty(e,"Players",{enumerable:!0,get:function(){return h.Player}});var v=n(4926);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return v.VERSION}}),e.adapters={AmazonIVSAdapter:t.AmazonIVSAdapter,Bitmovin8Adapter:a.Bitmovin8Adapter,CAFv3Adapter:s.CAFv3Adapter,DashjsAdapter:l.DashjsAdapter,HTMLVideoElementAdapter:c.HTMLVideoElementAdapter,HlsAdapter:u.HlsAdapter,ShakaAdapter:d.ShakaAdapter,VideojsAdapter:E.VideojsAdapter},e.default={PlayerModule:r.PlayerModule}}(),i}()}));
//# sourceMappingURL=bitmovin-analytics.js.map